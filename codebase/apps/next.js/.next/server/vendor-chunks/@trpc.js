"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@trpc";
exports.ids = ["vendor-chunks/@trpc"];
exports.modules = {

/***/ "(rsc)/../../node_modules/@trpc/server/dist/TRPCError-98d44758.mjs":
/*!*******************************************************************!*\
  !*** ../../node_modules/@trpc/server/dist/TRPCError-98d44758.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   T: () => (/* binding */ TRPCError),\n/* harmony export */   g: () => (/* binding */ getTRPCErrorFromUnknown)\n/* harmony export */ });\n/* harmony import */ var _getCauseFromUnknown_2d66414a_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getCauseFromUnknown-2d66414a.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/getCauseFromUnknown-2d66414a.mjs\");\n\n\nfunction getTRPCErrorFromUnknown(cause) {\n    if (cause instanceof TRPCError) {\n        return cause;\n    }\n    if (cause instanceof Error && cause.name === 'TRPCError') {\n        // https://github.com/trpc/trpc/pull/4848\n        return cause;\n    }\n    const trpcError = new TRPCError({\n        code: 'INTERNAL_SERVER_ERROR',\n        cause\n    });\n    // Inherit stack from error\n    if (cause instanceof Error && cause.stack) {\n        trpcError.stack = cause.stack;\n    }\n    return trpcError;\n}\nclass TRPCError extends Error {\n    constructor(opts){\n        const cause = (0,_getCauseFromUnknown_2d66414a_mjs__WEBPACK_IMPORTED_MODULE_0__.g)(opts.cause);\n        const message = opts.message ?? cause?.message ?? opts.code;\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore https://github.com/tc39/proposal-error-cause\n        super(message, {\n            cause\n        });\n        this.code = opts.code;\n        this.name = 'TRPCError';\n        if (!this.cause) {\n            // < ES2022 / < Node 16.9.0 compatability\n            this.cause = cause;\n        }\n    }\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzL0B0cnBjL3NlcnZlci9kaXN0L1RSUENFcnJvci05OGQ0NDc1OC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQThFOztBQUU5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isb0VBQW1CO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFd0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYm9pbGVycGxhdGUvbmV4dGpzLy4uLy4uL25vZGVfbW9kdWxlcy9AdHJwYy9zZXJ2ZXIvZGlzdC9UUlBDRXJyb3ItOThkNDQ3NTgubWpzPzk3NTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZyBhcyBnZXRDYXVzZUZyb21Vbmtub3duIH0gZnJvbSAnLi9nZXRDYXVzZUZyb21Vbmtub3duLTJkNjY0MTRhLm1qcyc7XG5cbmZ1bmN0aW9uIGdldFRSUENFcnJvckZyb21Vbmtub3duKGNhdXNlKSB7XG4gICAgaWYgKGNhdXNlIGluc3RhbmNlb2YgVFJQQ0Vycm9yKSB7XG4gICAgICAgIHJldHVybiBjYXVzZTtcbiAgICB9XG4gICAgaWYgKGNhdXNlIGluc3RhbmNlb2YgRXJyb3IgJiYgY2F1c2UubmFtZSA9PT0gJ1RSUENFcnJvcicpIHtcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3RycGMvdHJwYy9wdWxsLzQ4NDhcbiAgICAgICAgcmV0dXJuIGNhdXNlO1xuICAgIH1cbiAgICBjb25zdCB0cnBjRXJyb3IgPSBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgIGNhdXNlXG4gICAgfSk7XG4gICAgLy8gSW5oZXJpdCBzdGFjayBmcm9tIGVycm9yXG4gICAgaWYgKGNhdXNlIGluc3RhbmNlb2YgRXJyb3IgJiYgY2F1c2Uuc3RhY2spIHtcbiAgICAgICAgdHJwY0Vycm9yLnN0YWNrID0gY2F1c2Uuc3RhY2s7XG4gICAgfVxuICAgIHJldHVybiB0cnBjRXJyb3I7XG59XG5jbGFzcyBUUlBDRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3Iob3B0cyl7XG4gICAgICAgIGNvbnN0IGNhdXNlID0gZ2V0Q2F1c2VGcm9tVW5rbm93bihvcHRzLmNhdXNlKTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IG9wdHMubWVzc2FnZSA/PyBjYXVzZT8ubWVzc2FnZSA/PyBvcHRzLmNvZGU7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWNvbW1lbnRcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1lcnJvci1jYXVzZVxuICAgICAgICBzdXBlcihtZXNzYWdlLCB7XG4gICAgICAgICAgICBjYXVzZVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jb2RlID0gb3B0cy5jb2RlO1xuICAgICAgICB0aGlzLm5hbWUgPSAnVFJQQ0Vycm9yJztcbiAgICAgICAgaWYgKCF0aGlzLmNhdXNlKSB7XG4gICAgICAgICAgICAvLyA8IEVTMjAyMiAvIDwgTm9kZSAxNi45LjAgY29tcGF0YWJpbGl0eVxuICAgICAgICAgICAgdGhpcy5jYXVzZSA9IGNhdXNlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgeyBUUlBDRXJyb3IgYXMgVCwgZ2V0VFJQQ0Vycm9yRnJvbVVua25vd24gYXMgZyB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/@trpc/server/dist/TRPCError-98d44758.mjs\n");

/***/ }),

/***/ "(rsc)/../../node_modules/@trpc/server/dist/adapters/fetch/index.mjs":
/*!*********************************************************************!*\
  !*** ../../node_modules/@trpc/server/dist/adapters/fetch/index.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetchRequestHandler: () => (/* binding */ fetchRequestHandler)\n/* harmony export */ });\n/* harmony import */ var _index_f91d720c_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../index-f91d720c.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/index-f91d720c.mjs\");\n/* harmony import */ var _resolveHTTPResponse_2fc435bb_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../resolveHTTPResponse-2fc435bb.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/resolveHTTPResponse-2fc435bb.mjs\");\n/* harmony import */ var _batchStreamFormatter_fc1ffb26_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../batchStreamFormatter-fc1ffb26.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/batchStreamFormatter-fc1ffb26.mjs\");\n/* harmony import */ var _toURL_8f0ea228_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../toURL-8f0ea228.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/toURL-8f0ea228.mjs\");\n/* harmony import */ var _codes_c924c3db_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../codes-c924c3db.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/codes-c924c3db.mjs\");\n/* harmony import */ var _config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../config-d5fdbd39.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/config-d5fdbd39.mjs\");\n/* harmony import */ var _TRPCError_98d44758_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../TRPCError-98d44758.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/TRPCError-98d44758.mjs\");\n/* harmony import */ var _getCauseFromUnknown_2d66414a_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../getCauseFromUnknown-2d66414a.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/getCauseFromUnknown-2d66414a.mjs\");\n/* harmony import */ var _transformTRPCResponse_1153b421_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../transformTRPCResponse-1153b421.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/transformTRPCResponse-1153b421.mjs\");\n/* harmony import */ var _contentType_9fd995d3_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../contentType-9fd995d3.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/contentType-9fd995d3.mjs\");\n\n\n\n\n\n\n\n\n\n\n\nconst trimSlashes = (path)=>{\n    path = path.startsWith('/') ? path.slice(1) : path;\n    path = path.endsWith('/') ? path.slice(0, -1) : path;\n    return path;\n};\nasync function fetchRequestHandler(opts) {\n    const resHeaders = new Headers();\n    const createContext = async ()=>{\n        return opts.createContext?.({\n            req: opts.req,\n            resHeaders\n        });\n    };\n    const url = (0,_toURL_8f0ea228_mjs__WEBPACK_IMPORTED_MODULE_3__.t)(opts.req.url);\n    const pathname = trimSlashes(url.pathname);\n    const endpoint = trimSlashes(opts.endpoint);\n    const path = trimSlashes(pathname.slice(endpoint.length));\n    const req = {\n        query: url.searchParams,\n        method: opts.req.method,\n        headers: Object.fromEntries(opts.req.headers),\n        body: opts.req.headers.get('content-type')?.startsWith('application/json') ? await opts.req.text() : ''\n    };\n    let resolve;\n    const promise = new Promise((r)=>resolve = r);\n    let status = 200;\n    let isStream = false;\n    let controller;\n    let encoder;\n    let formatter;\n    const unstable_onHead = (head, isStreaming)=>{\n        for (const [key, value] of Object.entries(head.headers ?? {})){\n            /* istanbul ignore if -- @preserve */ if (typeof value === 'undefined') {\n                continue;\n            }\n            if (typeof value === 'string') {\n                resHeaders.set(key, value);\n                continue;\n            }\n            for (const v of value){\n                resHeaders.append(key, v);\n            }\n        }\n        status = head.status;\n        if (isStreaming) {\n            resHeaders.set('Transfer-Encoding', 'chunked');\n            resHeaders.append('Vary', 'trpc-batch-mode');\n            const stream = new ReadableStream({\n                start (c) {\n                    controller = c;\n                }\n            });\n            const response = new Response(stream, {\n                status,\n                headers: resHeaders\n            });\n            resolve(response);\n            encoder = new TextEncoder();\n            formatter = (0,_batchStreamFormatter_fc1ffb26_mjs__WEBPACK_IMPORTED_MODULE_2__.g)();\n            isStream = true;\n        }\n    };\n    const unstable_onChunk = ([index, string])=>{\n        if (index === -1) {\n            // full response, no streaming\n            const response = new Response(string || null, {\n                status,\n                headers: resHeaders\n            });\n            resolve(response);\n        } else {\n            controller.enqueue(encoder.encode(formatter(index, string)));\n        }\n    };\n    (0,_resolveHTTPResponse_2fc435bb_mjs__WEBPACK_IMPORTED_MODULE_1__.r)({\n        req,\n        createContext,\n        path,\n        router: opts.router,\n        batching: opts.batching,\n        responseMeta: opts.responseMeta,\n        onError (o) {\n            opts?.onError?.({\n                ...o,\n                req: opts.req\n            });\n        },\n        unstable_onHead,\n        unstable_onChunk\n    }).then(()=>{\n        if (isStream) {\n            controller.enqueue(encoder.encode(formatter.end()));\n            controller.close();\n        }\n    }).catch(()=>{\n        if (isStream) {\n            controller.close();\n        }\n    });\n    return promise;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzL0B0cnBjL3NlcnZlci9kaXN0L2FkYXB0ZXJzL2ZldGNoL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFrQztBQUNnRDtBQUNLO0FBQ2pDO0FBQ3BCO0FBQ0M7QUFDRztBQUNVO0FBQ0U7QUFDVjs7QUFFeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLGdCQUFnQixzREFBSztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0Esd0JBQXdCLHFFQUF1QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsSUFBSSxvRUFBbUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRStCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGJvaWxlcnBsYXRlL25leHRqcy8uLi8uLi9ub2RlX21vZHVsZXMvQHRycGMvc2VydmVyL2Rpc3QvYWRhcHRlcnMvZmV0Y2gvaW5kZXgubWpzPzYyNmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICcuLi8uLi9pbmRleC1mOTFkNzIwYy5tanMnO1xuaW1wb3J0IHsgciBhcyByZXNvbHZlSFRUUFJlc3BvbnNlIH0gZnJvbSAnLi4vLi4vcmVzb2x2ZUhUVFBSZXNwb25zZS0yZmM0MzViYi5tanMnO1xuaW1wb3J0IHsgZyBhcyBnZXRCYXRjaFN0cmVhbUZvcm1hdHRlciB9IGZyb20gJy4uLy4uL2JhdGNoU3RyZWFtRm9ybWF0dGVyLWZjMWZmYjI2Lm1qcyc7XG5pbXBvcnQgeyB0IGFzIHRvVVJMIH0gZnJvbSAnLi4vLi4vdG9VUkwtOGYwZWEyMjgubWpzJztcbmltcG9ydCAnLi4vLi4vY29kZXMtYzkyNGMzZGIubWpzJztcbmltcG9ydCAnLi4vLi4vY29uZmlnLWQ1ZmRiZDM5Lm1qcyc7XG5pbXBvcnQgJy4uLy4uL1RSUENFcnJvci05OGQ0NDc1OC5tanMnO1xuaW1wb3J0ICcuLi8uLi9nZXRDYXVzZUZyb21Vbmtub3duLTJkNjY0MTRhLm1qcyc7XG5pbXBvcnQgJy4uLy4uL3RyYW5zZm9ybVRSUENSZXNwb25zZS0xMTUzYjQyMS5tanMnO1xuaW1wb3J0ICcuLi8uLi9jb250ZW50VHlwZS05ZmQ5OTVkMy5tanMnO1xuXG5jb25zdCB0cmltU2xhc2hlcyA9IChwYXRoKT0+e1xuICAgIHBhdGggPSBwYXRoLnN0YXJ0c1dpdGgoJy8nKSA/IHBhdGguc2xpY2UoMSkgOiBwYXRoO1xuICAgIHBhdGggPSBwYXRoLmVuZHNXaXRoKCcvJykgPyBwYXRoLnNsaWNlKDAsIC0xKSA6IHBhdGg7XG4gICAgcmV0dXJuIHBhdGg7XG59O1xuYXN5bmMgZnVuY3Rpb24gZmV0Y2hSZXF1ZXN0SGFuZGxlcihvcHRzKSB7XG4gICAgY29uc3QgcmVzSGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG4gICAgY29uc3QgY3JlYXRlQ29udGV4dCA9IGFzeW5jICgpPT57XG4gICAgICAgIHJldHVybiBvcHRzLmNyZWF0ZUNvbnRleHQ/Lih7XG4gICAgICAgICAgICByZXE6IG9wdHMucmVxLFxuICAgICAgICAgICAgcmVzSGVhZGVyc1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNvbnN0IHVybCA9IHRvVVJMKG9wdHMucmVxLnVybCk7XG4gICAgY29uc3QgcGF0aG5hbWUgPSB0cmltU2xhc2hlcyh1cmwucGF0aG5hbWUpO1xuICAgIGNvbnN0IGVuZHBvaW50ID0gdHJpbVNsYXNoZXMob3B0cy5lbmRwb2ludCk7XG4gICAgY29uc3QgcGF0aCA9IHRyaW1TbGFzaGVzKHBhdGhuYW1lLnNsaWNlKGVuZHBvaW50Lmxlbmd0aCkpO1xuICAgIGNvbnN0IHJlcSA9IHtcbiAgICAgICAgcXVlcnk6IHVybC5zZWFyY2hQYXJhbXMsXG4gICAgICAgIG1ldGhvZDogb3B0cy5yZXEubWV0aG9kLFxuICAgICAgICBoZWFkZXJzOiBPYmplY3QuZnJvbUVudHJpZXMob3B0cy5yZXEuaGVhZGVycyksXG4gICAgICAgIGJvZHk6IG9wdHMucmVxLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKT8uc3RhcnRzV2l0aCgnYXBwbGljYXRpb24vanNvbicpID8gYXdhaXQgb3B0cy5yZXEudGV4dCgpIDogJydcbiAgICB9O1xuICAgIGxldCByZXNvbHZlO1xuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocik9PnJlc29sdmUgPSByKTtcbiAgICBsZXQgc3RhdHVzID0gMjAwO1xuICAgIGxldCBpc1N0cmVhbSA9IGZhbHNlO1xuICAgIGxldCBjb250cm9sbGVyO1xuICAgIGxldCBlbmNvZGVyO1xuICAgIGxldCBmb3JtYXR0ZXI7XG4gICAgY29uc3QgdW5zdGFibGVfb25IZWFkID0gKGhlYWQsIGlzU3RyZWFtaW5nKT0+e1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhoZWFkLmhlYWRlcnMgPz8ge30pKXtcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAtLSBAcHJlc2VydmUgKi8gaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgcmVzSGVhZGVycy5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHYgb2YgdmFsdWUpe1xuICAgICAgICAgICAgICAgIHJlc0hlYWRlcnMuYXBwZW5kKGtleSwgdik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RhdHVzID0gaGVhZC5zdGF0dXM7XG4gICAgICAgIGlmIChpc1N0cmVhbWluZykge1xuICAgICAgICAgICAgcmVzSGVhZGVycy5zZXQoJ1RyYW5zZmVyLUVuY29kaW5nJywgJ2NodW5rZWQnKTtcbiAgICAgICAgICAgIHJlc0hlYWRlcnMuYXBwZW5kKCdWYXJ5JywgJ3RycGMtYmF0Y2gtbW9kZScpO1xuICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gbmV3IFJlYWRhYmxlU3RyZWFtKHtcbiAgICAgICAgICAgICAgICBzdGFydCAoYykge1xuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyID0gYztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gbmV3IFJlc3BvbnNlKHN0cmVhbSwge1xuICAgICAgICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiByZXNIZWFkZXJzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgICAgICAgICAgZm9ybWF0dGVyID0gZ2V0QmF0Y2hTdHJlYW1Gb3JtYXR0ZXIoKTtcbiAgICAgICAgICAgIGlzU3RyZWFtID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgdW5zdGFibGVfb25DaHVuayA9IChbaW5kZXgsIHN0cmluZ10pPT57XG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIC8vIGZ1bGwgcmVzcG9uc2UsIG5vIHN0cmVhbWluZ1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBuZXcgUmVzcG9uc2Uoc3RyaW5nIHx8IG51bGwsIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogcmVzSGVhZGVyc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShlbmNvZGVyLmVuY29kZShmb3JtYXR0ZXIoaW5kZXgsIHN0cmluZykpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmVzb2x2ZUhUVFBSZXNwb25zZSh7XG4gICAgICAgIHJlcSxcbiAgICAgICAgY3JlYXRlQ29udGV4dCxcbiAgICAgICAgcGF0aCxcbiAgICAgICAgcm91dGVyOiBvcHRzLnJvdXRlcixcbiAgICAgICAgYmF0Y2hpbmc6IG9wdHMuYmF0Y2hpbmcsXG4gICAgICAgIHJlc3BvbnNlTWV0YTogb3B0cy5yZXNwb25zZU1ldGEsXG4gICAgICAgIG9uRXJyb3IgKG8pIHtcbiAgICAgICAgICAgIG9wdHM/Lm9uRXJyb3I/Lih7XG4gICAgICAgICAgICAgICAgLi4ubyxcbiAgICAgICAgICAgICAgICByZXE6IG9wdHMucmVxXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgdW5zdGFibGVfb25IZWFkLFxuICAgICAgICB1bnN0YWJsZV9vbkNodW5rXG4gICAgfSkudGhlbigoKT0+e1xuICAgICAgICBpZiAoaXNTdHJlYW0pIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShlbmNvZGVyLmVuY29kZShmb3JtYXR0ZXIuZW5kKCkpKTtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH0pLmNhdGNoKCgpPT57XG4gICAgICAgIGlmIChpc1N0cmVhbSkge1xuICAgICAgICAgICAgY29udHJvbGxlci5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbmV4cG9ydCB7IGZldGNoUmVxdWVzdEhhbmRsZXIgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/@trpc/server/dist/adapters/fetch/index.mjs\n");

/***/ }),

/***/ "(rsc)/../../node_modules/@trpc/server/dist/batchStreamFormatter-fc1ffb26.mjs":
/*!******************************************************************************!*\
  !*** ../../node_modules/@trpc/server/dist/batchStreamFormatter-fc1ffb26.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   g: () => (/* binding */ getBatchStreamFormatter)\n/* harmony export */ });\n/**\n * Format a batch response as a line-delimited JSON stream\n * that the `unstable_httpBatchStreamLink` can parse:\n *\n * @example\n * ```ts\n * const formatter = getBatchStreamFormatter();\n * res.send(formatter(1, 'response #2'));\n * res.send(formatter(0, 'response #1'));\n * res.send(formatter.end());\n * ```\n *\n * Expected format:\n * ```json\n * {\"1\":\"response #2\"\n * ,\"0\":\"response #1\"\n * }\n * ```\n */ function getBatchStreamFormatter() {\n    let first = true;\n    function format(index, string) {\n        const prefix = first ? '{' : ',';\n        first = false;\n        return `${prefix}\"${index}\":${string}\\n`;\n    }\n    format.end = ()=>'}';\n    return format;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzL0B0cnBjL3NlcnZlci9kaXN0L2JhdGNoU3RyZWFtRm9ybWF0dGVyLWZjMWZmYjI2Lm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQSxrQkFBa0IsT0FBTyxHQUFHLE1BQU0sSUFBSSxPQUFPO0FBQzdDO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7O0FBRXdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGJvaWxlcnBsYXRlL25leHRqcy8uLi8uLi9ub2RlX21vZHVsZXMvQHRycGMvc2VydmVyL2Rpc3QvYmF0Y2hTdHJlYW1Gb3JtYXR0ZXItZmMxZmZiMjYubWpzP2Q2YzUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBGb3JtYXQgYSBiYXRjaCByZXNwb25zZSBhcyBhIGxpbmUtZGVsaW1pdGVkIEpTT04gc3RyZWFtXG4gKiB0aGF0IHRoZSBgdW5zdGFibGVfaHR0cEJhdGNoU3RyZWFtTGlua2AgY2FuIHBhcnNlOlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3QgZm9ybWF0dGVyID0gZ2V0QmF0Y2hTdHJlYW1Gb3JtYXR0ZXIoKTtcbiAqIHJlcy5zZW5kKGZvcm1hdHRlcigxLCAncmVzcG9uc2UgIzInKSk7XG4gKiByZXMuc2VuZChmb3JtYXR0ZXIoMCwgJ3Jlc3BvbnNlICMxJykpO1xuICogcmVzLnNlbmQoZm9ybWF0dGVyLmVuZCgpKTtcbiAqIGBgYFxuICpcbiAqIEV4cGVjdGVkIGZvcm1hdDpcbiAqIGBgYGpzb25cbiAqIHtcIjFcIjpcInJlc3BvbnNlICMyXCJcbiAqICxcIjBcIjpcInJlc3BvbnNlICMxXCJcbiAqIH1cbiAqIGBgYFxuICovIGZ1bmN0aW9uIGdldEJhdGNoU3RyZWFtRm9ybWF0dGVyKCkge1xuICAgIGxldCBmaXJzdCA9IHRydWU7XG4gICAgZnVuY3Rpb24gZm9ybWF0KGluZGV4LCBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgcHJlZml4ID0gZmlyc3QgPyAneycgOiAnLCc7XG4gICAgICAgIGZpcnN0ID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBgJHtwcmVmaXh9XCIke2luZGV4fVwiOiR7c3RyaW5nfVxcbmA7XG4gICAgfVxuICAgIGZvcm1hdC5lbmQgPSAoKT0+J30nO1xuICAgIHJldHVybiBmb3JtYXQ7XG59XG5cbmV4cG9ydCB7IGdldEJhdGNoU3RyZWFtRm9ybWF0dGVyIGFzIGcgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/@trpc/server/dist/batchStreamFormatter-fc1ffb26.mjs\n");

/***/ }),

/***/ "(rsc)/../../node_modules/@trpc/server/dist/codes-c924c3db.mjs":
/*!***************************************************************!*\
  !*** ../../node_modules/@trpc/server/dist/codes-c924c3db.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   T: () => (/* binding */ TRPC_ERROR_CODES_BY_KEY),\n/* harmony export */   a: () => (/* binding */ TRPC_ERROR_CODES_BY_NUMBER),\n/* harmony export */   i: () => (/* binding */ invert)\n/* harmony export */ });\n/**\n * @internal\n */ function invert(obj) {\n    const newObj = Object.create(null);\n    for(const key in obj){\n        const v = obj[key];\n        newObj[v] = key;\n    }\n    return newObj;\n}\n\n// reference: https://www.jsonrpc.org/specification\n/**\n * JSON-RPC 2.0 Error codes\n *\n * `-32000` to `-32099` are reserved for implementation-defined server-errors.\n * For tRPC we're copying the last digits of HTTP 4XX errors.\n */ const TRPC_ERROR_CODES_BY_KEY = {\n    /**\n   * Invalid JSON was received by the server.\n   * An error occurred on the server while parsing the JSON text.\n   */ PARSE_ERROR: -32700,\n    /**\n   * The JSON sent is not a valid Request object.\n   */ BAD_REQUEST: -32600,\n    // Internal JSON-RPC error\n    INTERNAL_SERVER_ERROR: -32603,\n    NOT_IMPLEMENTED: -32603,\n    // Implementation specific errors\n    UNAUTHORIZED: -32001,\n    FORBIDDEN: -32003,\n    NOT_FOUND: -32004,\n    METHOD_NOT_SUPPORTED: -32005,\n    TIMEOUT: -32008,\n    CONFLICT: -32009,\n    PRECONDITION_FAILED: -32012,\n    PAYLOAD_TOO_LARGE: -32013,\n    UNPROCESSABLE_CONTENT: -32022,\n    TOO_MANY_REQUESTS: -32029,\n    CLIENT_CLOSED_REQUEST: -32099\n};\nconst TRPC_ERROR_CODES_BY_NUMBER = invert(TRPC_ERROR_CODES_BY_KEY);\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzL0B0cnBjL3NlcnZlci9kaXN0L2NvZGVzLWM5MjRjM2RiLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFc0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYm9pbGVycGxhdGUvbmV4dGpzLy4uLy4uL25vZGVfbW9kdWxlcy9AdHJwYy9zZXJ2ZXIvZGlzdC9jb2Rlcy1jOTI0YzNkYi5tanM/NWQxOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIGludmVydChvYmopIHtcbiAgICBjb25zdCBuZXdPYmogPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIGZvcihjb25zdCBrZXkgaW4gb2JqKXtcbiAgICAgICAgY29uc3QgdiA9IG9ialtrZXldO1xuICAgICAgICBuZXdPYmpbdl0gPSBrZXk7XG4gICAgfVxuICAgIHJldHVybiBuZXdPYmo7XG59XG5cbi8vIHJlZmVyZW5jZTogaHR0cHM6Ly93d3cuanNvbnJwYy5vcmcvc3BlY2lmaWNhdGlvblxuLyoqXG4gKiBKU09OLVJQQyAyLjAgRXJyb3IgY29kZXNcbiAqXG4gKiBgLTMyMDAwYCB0byBgLTMyMDk5YCBhcmUgcmVzZXJ2ZWQgZm9yIGltcGxlbWVudGF0aW9uLWRlZmluZWQgc2VydmVyLWVycm9ycy5cbiAqIEZvciB0UlBDIHdlJ3JlIGNvcHlpbmcgdGhlIGxhc3QgZGlnaXRzIG9mIEhUVFAgNFhYIGVycm9ycy5cbiAqLyBjb25zdCBUUlBDX0VSUk9SX0NPREVTX0JZX0tFWSA9IHtcbiAgICAvKipcbiAgICogSW52YWxpZCBKU09OIHdhcyByZWNlaXZlZCBieSB0aGUgc2VydmVyLlxuICAgKiBBbiBlcnJvciBvY2N1cnJlZCBvbiB0aGUgc2VydmVyIHdoaWxlIHBhcnNpbmcgdGhlIEpTT04gdGV4dC5cbiAgICovIFBBUlNFX0VSUk9SOiAtMzI3MDAsXG4gICAgLyoqXG4gICAqIFRoZSBKU09OIHNlbnQgaXMgbm90IGEgdmFsaWQgUmVxdWVzdCBvYmplY3QuXG4gICAqLyBCQURfUkVRVUVTVDogLTMyNjAwLFxuICAgIC8vIEludGVybmFsIEpTT04tUlBDIGVycm9yXG4gICAgSU5URVJOQUxfU0VSVkVSX0VSUk9SOiAtMzI2MDMsXG4gICAgTk9UX0lNUExFTUVOVEVEOiAtMzI2MDMsXG4gICAgLy8gSW1wbGVtZW50YXRpb24gc3BlY2lmaWMgZXJyb3JzXG4gICAgVU5BVVRIT1JJWkVEOiAtMzIwMDEsXG4gICAgRk9SQklEREVOOiAtMzIwMDMsXG4gICAgTk9UX0ZPVU5EOiAtMzIwMDQsXG4gICAgTUVUSE9EX05PVF9TVVBQT1JURUQ6IC0zMjAwNSxcbiAgICBUSU1FT1VUOiAtMzIwMDgsXG4gICAgQ09ORkxJQ1Q6IC0zMjAwOSxcbiAgICBQUkVDT05ESVRJT05fRkFJTEVEOiAtMzIwMTIsXG4gICAgUEFZTE9BRF9UT09fTEFSR0U6IC0zMjAxMyxcbiAgICBVTlBST0NFU1NBQkxFX0NPTlRFTlQ6IC0zMjAyMixcbiAgICBUT09fTUFOWV9SRVFVRVNUUzogLTMyMDI5LFxuICAgIENMSUVOVF9DTE9TRURfUkVRVUVTVDogLTMyMDk5XG59O1xuY29uc3QgVFJQQ19FUlJPUl9DT0RFU19CWV9OVU1CRVIgPSBpbnZlcnQoVFJQQ19FUlJPUl9DT0RFU19CWV9LRVkpO1xuXG5leHBvcnQgeyBUUlBDX0VSUk9SX0NPREVTX0JZX0tFWSBhcyBULCBUUlBDX0VSUk9SX0NPREVTX0JZX05VTUJFUiBhcyBhLCBpbnZlcnQgYXMgaSB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/@trpc/server/dist/codes-c924c3db.mjs\n");

/***/ }),

/***/ "(rsc)/../../node_modules/@trpc/server/dist/config-d5fdbd39.mjs":
/*!****************************************************************!*\
  !*** ../../node_modules/@trpc/server/dist/config-d5fdbd39.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   a: () => (/* binding */ defaultTransformer),\n/* harmony export */   b: () => (/* binding */ createCallerFactory),\n/* harmony export */   c: () => (/* binding */ createRouterFactory),\n/* harmony export */   d: () => (/* binding */ defaultFormatter),\n/* harmony export */   e: () => (/* binding */ callProcedure),\n/* harmony export */   g: () => (/* binding */ getDataTransformer),\n/* harmony export */   i: () => (/* binding */ isServerDefault),\n/* harmony export */   p: () => (/* binding */ procedureTypes)\n/* harmony export */ });\n/* harmony import */ var _TRPCError_98d44758_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./TRPCError-98d44758.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/TRPCError-98d44758.mjs\");\n/* harmony import */ var _index_f91d720c_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-f91d720c.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/index-f91d720c.mjs\");\n/* harmony import */ var _codes_c924c3db_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./codes-c924c3db.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/codes-c924c3db.mjs\");\n\n\n\n\n/**\n * @public\n */ /**\n * @internal\n */ function getDataTransformer(transformer) {\n    if ('input' in transformer) {\n        return transformer;\n    }\n    return {\n        input: transformer,\n        output: transformer\n    };\n}\n/**\n * @internal\n */ const defaultTransformer = {\n    _default: true,\n    input: {\n        serialize: (obj)=>obj,\n        deserialize: (obj)=>obj\n    },\n    output: {\n        serialize: (obj)=>obj,\n        deserialize: (obj)=>obj\n    }\n};\n\nconst defaultFormatter = ({ shape  })=>{\n    return shape;\n};\n\n/**\n * Create an object without inheriting anything from `Object.prototype`\n * @internal\n */ function omitPrototype(obj) {\n    return Object.assign(Object.create(null), obj);\n}\n\nconst procedureTypes = [\n    'query',\n    'mutation',\n    'subscription'\n];\n\nfunction isRouter(procedureOrRouter) {\n    return 'router' in procedureOrRouter._def;\n}\nconst emptyRouter = {\n    _ctx: null,\n    _errorShape: null,\n    _meta: null,\n    queries: {},\n    mutations: {},\n    subscriptions: {},\n    errorFormatter: defaultFormatter,\n    transformer: defaultTransformer\n};\n/**\n * Reserved words that can't be used as router or procedure names\n */ const reservedWords = [\n    /**\n   * Then is a reserved word because otherwise we can't return a promise that returns a Proxy\n   * since JS will think that `.then` is something that exists\n   */ 'then'\n];\n/**\n * @internal\n */ function createRouterFactory(config) {\n    return function createRouterInner(procedures) {\n        const reservedWordsUsed = new Set(Object.keys(procedures).filter((v)=>reservedWords.includes(v)));\n        if (reservedWordsUsed.size > 0) {\n            throw new Error('Reserved words used in `router({})` call: ' + Array.from(reservedWordsUsed).join(', '));\n        }\n        const routerProcedures = omitPrototype({});\n        function recursiveGetPaths(procedures, path = '') {\n            for (const [key, procedureOrRouter] of Object.entries(procedures ?? {})){\n                const newPath = `${path}${key}`;\n                if (isRouter(procedureOrRouter)) {\n                    recursiveGetPaths(procedureOrRouter._def.procedures, `${newPath}.`);\n                    continue;\n                }\n                if (routerProcedures[newPath]) {\n                    throw new Error(`Duplicate key: ${newPath}`);\n                }\n                routerProcedures[newPath] = procedureOrRouter;\n            }\n        }\n        recursiveGetPaths(procedures);\n        const _def = {\n            _config: config,\n            router: true,\n            procedures: routerProcedures,\n            ...emptyRouter,\n            record: procedures,\n            queries: Object.entries(routerProcedures).filter((pair)=>pair[1]._def.query).reduce((acc, [key, val])=>({\n                    ...acc,\n                    [key]: val\n                }), {}),\n            mutations: Object.entries(routerProcedures).filter((pair)=>pair[1]._def.mutation).reduce((acc, [key, val])=>({\n                    ...acc,\n                    [key]: val\n                }), {}),\n            subscriptions: Object.entries(routerProcedures).filter((pair)=>pair[1]._def.subscription).reduce((acc, [key, val])=>({\n                    ...acc,\n                    [key]: val\n                }), {})\n        };\n        const router = {\n            ...procedures,\n            _def,\n            createCaller (ctx) {\n                return createCallerFactory()(router)(ctx);\n            },\n            getErrorShape (opts) {\n                const { path , error  } = opts;\n                const { code  } = opts.error;\n                const shape = {\n                    message: error.message,\n                    code: _codes_c924c3db_mjs__WEBPACK_IMPORTED_MODULE_2__.T[code],\n                    data: {\n                        code,\n                        httpStatus: (0,_index_f91d720c_mjs__WEBPACK_IMPORTED_MODULE_1__.g)(error)\n                    }\n                };\n                if (config.isDev && typeof opts.error.stack === 'string') {\n                    shape.data.stack = opts.error.stack;\n                }\n                if (typeof path === 'string') {\n                    shape.data.path = path;\n                }\n                return this._def._config.errorFormatter({\n                    ...opts,\n                    shape\n                });\n            }\n        };\n        return router;\n    };\n}\n/**\n * @internal\n */ function callProcedure(opts) {\n    const { type , path  } = opts;\n    if (!(path in opts.procedures) || !opts.procedures[path]?._def[type]) {\n        throw new _TRPCError_98d44758_mjs__WEBPACK_IMPORTED_MODULE_0__.T({\n            code: 'NOT_FOUND',\n            message: `No \"${type}\"-procedure on path \"${path}\"`\n        });\n    }\n    const procedure = opts.procedures[path];\n    return procedure(opts);\n}\nfunction createCallerFactory() {\n    return function createCallerInner(router) {\n        const def = router._def;\n        return function createCaller(ctx) {\n            const proxy = (0,_index_f91d720c_mjs__WEBPACK_IMPORTED_MODULE_1__.a)(({ path , args  })=>{\n                // interop mode\n                if (path.length === 1 && procedureTypes.includes(path[0])) {\n                    return callProcedure({\n                        procedures: def.procedures,\n                        path: args[0],\n                        rawInput: args[1],\n                        ctx,\n                        type: path[0]\n                    });\n                }\n                const fullPath = path.join('.');\n                const procedure = def.procedures[fullPath];\n                let type = 'query';\n                if (procedure._def.mutation) {\n                    type = 'mutation';\n                } else if (procedure._def.subscription) {\n                    type = 'subscription';\n                }\n                return procedure({\n                    path: fullPath,\n                    rawInput: args[0],\n                    ctx,\n                    type\n                });\n            });\n            return proxy;\n        };\n    };\n}\n\n/**\n * The default check to see if we're in a server\n */ const isServerDefault = typeof window === 'undefined' || 'Deno' in window || globalThis.process?.env?.NODE_ENV === 'test' || !!globalThis.process?.env?.JEST_WORKER_ID || !!globalThis.process?.env?.VITEST_WORKER_ID;\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzL0B0cnBjL3NlcnZlci9kaXN0L2NvbmZpZy1kNWZkYmQzOS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBMEQ7QUFDd0M7QUFDOUI7O0FBRXBFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw0QkFBNEIsUUFBUTtBQUNwQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmLGlCQUFpQjtBQUNqQixxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RDtBQUM5RDtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBLGtGQUFrRjtBQUNsRixtQ0FBbUMsS0FBSyxFQUFFLElBQUk7QUFDOUM7QUFDQSw0RUFBNEUsUUFBUTtBQUNwRjtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsUUFBUTtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLEtBQUs7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLEtBQUs7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLEtBQUs7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0Esd0JBQXdCLGdCQUFnQjtBQUN4Qyx3QkFBd0IsUUFBUTtBQUNoQztBQUNBO0FBQ0EsMEJBQTBCLGtEQUF1QjtBQUNqRDtBQUNBO0FBQ0Esb0NBQW9DLHNEQUEwQjtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGVBQWU7QUFDM0I7QUFDQSxrQkFBa0Isc0RBQVM7QUFDM0I7QUFDQSw0QkFBNEIsS0FBSyx1QkFBdUIsS0FBSztBQUM3RCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixzREFBb0IsSUFBSSxjQUFjO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRXNNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGJvaWxlcnBsYXRlL25leHRqcy8uLi8uLi9ub2RlX21vZHVsZXMvQHRycGMvc2VydmVyL2Rpc3QvY29uZmlnLWQ1ZmRiZDM5Lm1qcz9lOWRhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFQgYXMgVFJQQ0Vycm9yIH0gZnJvbSAnLi9UUlBDRXJyb3ItOThkNDQ3NTgubWpzJztcbmltcG9ydCB7IGEgYXMgY3JlYXRlUmVjdXJzaXZlUHJveHksIGcgYXMgZ2V0SFRUUFN0YXR1c0NvZGVGcm9tRXJyb3IgfSBmcm9tICcuL2luZGV4LWY5MWQ3MjBjLm1qcyc7XG5pbXBvcnQgeyBUIGFzIFRSUENfRVJST1JfQ09ERVNfQllfS0VZIH0gZnJvbSAnLi9jb2Rlcy1jOTI0YzNkYi5tanMnO1xuXG4vKipcbiAqIEBwdWJsaWNcbiAqLyAvKipcbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIGdldERhdGFUcmFuc2Zvcm1lcih0cmFuc2Zvcm1lcikge1xuICAgIGlmICgnaW5wdXQnIGluIHRyYW5zZm9ybWVyKSB7XG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1lcjtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5wdXQ6IHRyYW5zZm9ybWVyLFxuICAgICAgICBvdXRwdXQ6IHRyYW5zZm9ybWVyXG4gICAgfTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi8gY29uc3QgZGVmYXVsdFRyYW5zZm9ybWVyID0ge1xuICAgIF9kZWZhdWx0OiB0cnVlLFxuICAgIGlucHV0OiB7XG4gICAgICAgIHNlcmlhbGl6ZTogKG9iaik9Pm9iaixcbiAgICAgICAgZGVzZXJpYWxpemU6IChvYmopPT5vYmpcbiAgICB9LFxuICAgIG91dHB1dDoge1xuICAgICAgICBzZXJpYWxpemU6IChvYmopPT5vYmosXG4gICAgICAgIGRlc2VyaWFsaXplOiAob2JqKT0+b2JqXG4gICAgfVxufTtcblxuY29uc3QgZGVmYXVsdEZvcm1hdHRlciA9ICh7IHNoYXBlICB9KT0+e1xuICAgIHJldHVybiBzaGFwZTtcbn07XG5cbi8qKlxuICogQ3JlYXRlIGFuIG9iamVjdCB3aXRob3V0IGluaGVyaXRpbmcgYW55dGhpbmcgZnJvbSBgT2JqZWN0LnByb3RvdHlwZWBcbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIG9taXRQcm90b3R5cGUob2JqKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShudWxsKSwgb2JqKTtcbn1cblxuY29uc3QgcHJvY2VkdXJlVHlwZXMgPSBbXG4gICAgJ3F1ZXJ5JyxcbiAgICAnbXV0YXRpb24nLFxuICAgICdzdWJzY3JpcHRpb24nXG5dO1xuXG5mdW5jdGlvbiBpc1JvdXRlcihwcm9jZWR1cmVPclJvdXRlcikge1xuICAgIHJldHVybiAncm91dGVyJyBpbiBwcm9jZWR1cmVPclJvdXRlci5fZGVmO1xufVxuY29uc3QgZW1wdHlSb3V0ZXIgPSB7XG4gICAgX2N0eDogbnVsbCxcbiAgICBfZXJyb3JTaGFwZTogbnVsbCxcbiAgICBfbWV0YTogbnVsbCxcbiAgICBxdWVyaWVzOiB7fSxcbiAgICBtdXRhdGlvbnM6IHt9LFxuICAgIHN1YnNjcmlwdGlvbnM6IHt9LFxuICAgIGVycm9yRm9ybWF0dGVyOiBkZWZhdWx0Rm9ybWF0dGVyLFxuICAgIHRyYW5zZm9ybWVyOiBkZWZhdWx0VHJhbnNmb3JtZXJcbn07XG4vKipcbiAqIFJlc2VydmVkIHdvcmRzIHRoYXQgY2FuJ3QgYmUgdXNlZCBhcyByb3V0ZXIgb3IgcHJvY2VkdXJlIG5hbWVzXG4gKi8gY29uc3QgcmVzZXJ2ZWRXb3JkcyA9IFtcbiAgICAvKipcbiAgICogVGhlbiBpcyBhIHJlc2VydmVkIHdvcmQgYmVjYXVzZSBvdGhlcndpc2Ugd2UgY2FuJ3QgcmV0dXJuIGEgcHJvbWlzZSB0aGF0IHJldHVybnMgYSBQcm94eVxuICAgKiBzaW5jZSBKUyB3aWxsIHRoaW5rIHRoYXQgYC50aGVuYCBpcyBzb21ldGhpbmcgdGhhdCBleGlzdHNcbiAgICovICd0aGVuJ1xuXTtcbi8qKlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gY3JlYXRlUm91dGVyRmFjdG9yeShjb25maWcpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gY3JlYXRlUm91dGVySW5uZXIocHJvY2VkdXJlcykge1xuICAgICAgICBjb25zdCByZXNlcnZlZFdvcmRzVXNlZCA9IG5ldyBTZXQoT2JqZWN0LmtleXMocHJvY2VkdXJlcykuZmlsdGVyKCh2KT0+cmVzZXJ2ZWRXb3Jkcy5pbmNsdWRlcyh2KSkpO1xuICAgICAgICBpZiAocmVzZXJ2ZWRXb3Jkc1VzZWQuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVzZXJ2ZWQgd29yZHMgdXNlZCBpbiBgcm91dGVyKHt9KWAgY2FsbDogJyArIEFycmF5LmZyb20ocmVzZXJ2ZWRXb3Jkc1VzZWQpLmpvaW4oJywgJykpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJvdXRlclByb2NlZHVyZXMgPSBvbWl0UHJvdG90eXBlKHt9KTtcbiAgICAgICAgZnVuY3Rpb24gcmVjdXJzaXZlR2V0UGF0aHMocHJvY2VkdXJlcywgcGF0aCA9ICcnKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHByb2NlZHVyZU9yUm91dGVyXSBvZiBPYmplY3QuZW50cmllcyhwcm9jZWR1cmVzID8/IHt9KSl7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3UGF0aCA9IGAke3BhdGh9JHtrZXl9YDtcbiAgICAgICAgICAgICAgICBpZiAoaXNSb3V0ZXIocHJvY2VkdXJlT3JSb3V0ZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZUdldFBhdGhzKHByb2NlZHVyZU9yUm91dGVyLl9kZWYucHJvY2VkdXJlcywgYCR7bmV3UGF0aH0uYCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocm91dGVyUHJvY2VkdXJlc1tuZXdQYXRoXSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYER1cGxpY2F0ZSBrZXk6ICR7bmV3UGF0aH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcm91dGVyUHJvY2VkdXJlc1tuZXdQYXRoXSA9IHByb2NlZHVyZU9yUm91dGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlY3Vyc2l2ZUdldFBhdGhzKHByb2NlZHVyZXMpO1xuICAgICAgICBjb25zdCBfZGVmID0ge1xuICAgICAgICAgICAgX2NvbmZpZzogY29uZmlnLFxuICAgICAgICAgICAgcm91dGVyOiB0cnVlLFxuICAgICAgICAgICAgcHJvY2VkdXJlczogcm91dGVyUHJvY2VkdXJlcyxcbiAgICAgICAgICAgIC4uLmVtcHR5Um91dGVyLFxuICAgICAgICAgICAgcmVjb3JkOiBwcm9jZWR1cmVzLFxuICAgICAgICAgICAgcXVlcmllczogT2JqZWN0LmVudHJpZXMocm91dGVyUHJvY2VkdXJlcykuZmlsdGVyKChwYWlyKT0+cGFpclsxXS5fZGVmLnF1ZXJ5KS5yZWR1Y2UoKGFjYywgW2tleSwgdmFsXSk9Pih7XG4gICAgICAgICAgICAgICAgICAgIC4uLmFjYyxcbiAgICAgICAgICAgICAgICAgICAgW2tleV06IHZhbFxuICAgICAgICAgICAgICAgIH0pLCB7fSksXG4gICAgICAgICAgICBtdXRhdGlvbnM6IE9iamVjdC5lbnRyaWVzKHJvdXRlclByb2NlZHVyZXMpLmZpbHRlcigocGFpcik9PnBhaXJbMV0uX2RlZi5tdXRhdGlvbikucmVkdWNlKChhY2MsIFtrZXksIHZhbF0pPT4oe1xuICAgICAgICAgICAgICAgICAgICAuLi5hY2MsXG4gICAgICAgICAgICAgICAgICAgIFtrZXldOiB2YWxcbiAgICAgICAgICAgICAgICB9KSwge30pLFxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uczogT2JqZWN0LmVudHJpZXMocm91dGVyUHJvY2VkdXJlcykuZmlsdGVyKChwYWlyKT0+cGFpclsxXS5fZGVmLnN1YnNjcmlwdGlvbikucmVkdWNlKChhY2MsIFtrZXksIHZhbF0pPT4oe1xuICAgICAgICAgICAgICAgICAgICAuLi5hY2MsXG4gICAgICAgICAgICAgICAgICAgIFtrZXldOiB2YWxcbiAgICAgICAgICAgICAgICB9KSwge30pXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJvdXRlciA9IHtcbiAgICAgICAgICAgIC4uLnByb2NlZHVyZXMsXG4gICAgICAgICAgICBfZGVmLFxuICAgICAgICAgICAgY3JlYXRlQ2FsbGVyIChjdHgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlQ2FsbGVyRmFjdG9yeSgpKHJvdXRlcikoY3R4KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRFcnJvclNoYXBlIChvcHRzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBwYXRoICwgZXJyb3IgIH0gPSBvcHRzO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgY29kZSAgfSA9IG9wdHMuZXJyb3I7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2hhcGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFRSUENfRVJST1JfQ09ERVNfQllfS0VZW2NvZGVdLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaHR0cFN0YXR1czogZ2V0SFRUUFN0YXR1c0NvZGVGcm9tRXJyb3IoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChjb25maWcuaXNEZXYgJiYgdHlwZW9mIG9wdHMuZXJyb3Iuc3RhY2sgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoYXBlLmRhdGEuc3RhY2sgPSBvcHRzLmVycm9yLnN0YWNrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoYXBlLmRhdGEucGF0aCA9IHBhdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuX2NvbmZpZy5lcnJvckZvcm1hdHRlcih7XG4gICAgICAgICAgICAgICAgICAgIC4uLm9wdHMsXG4gICAgICAgICAgICAgICAgICAgIHNoYXBlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiByb3V0ZXI7XG4gICAgfTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gY2FsbFByb2NlZHVyZShvcHRzKSB7XG4gICAgY29uc3QgeyB0eXBlICwgcGF0aCAgfSA9IG9wdHM7XG4gICAgaWYgKCEocGF0aCBpbiBvcHRzLnByb2NlZHVyZXMpIHx8ICFvcHRzLnByb2NlZHVyZXNbcGF0aF0/Ll9kZWZbdHlwZV0pIHtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgICBjb2RlOiAnTk9UX0ZPVU5EJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBObyBcIiR7dHlwZX1cIi1wcm9jZWR1cmUgb24gcGF0aCBcIiR7cGF0aH1cImBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHByb2NlZHVyZSA9IG9wdHMucHJvY2VkdXJlc1twYXRoXTtcbiAgICByZXR1cm4gcHJvY2VkdXJlKG9wdHMpO1xufVxuZnVuY3Rpb24gY3JlYXRlQ2FsbGVyRmFjdG9yeSgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gY3JlYXRlQ2FsbGVySW5uZXIocm91dGVyKSB7XG4gICAgICAgIGNvbnN0IGRlZiA9IHJvdXRlci5fZGVmO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gY3JlYXRlQ2FsbGVyKGN0eCkge1xuICAgICAgICAgICAgY29uc3QgcHJveHkgPSBjcmVhdGVSZWN1cnNpdmVQcm94eSgoeyBwYXRoICwgYXJncyAgfSk9PntcbiAgICAgICAgICAgICAgICAvLyBpbnRlcm9wIG1vZGVcbiAgICAgICAgICAgICAgICBpZiAocGF0aC5sZW5ndGggPT09IDEgJiYgcHJvY2VkdXJlVHlwZXMuaW5jbHVkZXMocGF0aFswXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxQcm9jZWR1cmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2VkdXJlczogZGVmLnByb2NlZHVyZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBhcmdzWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmF3SW5wdXQ6IGFyZ3NbMV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBwYXRoWzBdXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBmdWxsUGF0aCA9IHBhdGguam9pbignLicpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb2NlZHVyZSA9IGRlZi5wcm9jZWR1cmVzW2Z1bGxQYXRoXTtcbiAgICAgICAgICAgICAgICBsZXQgdHlwZSA9ICdxdWVyeSc7XG4gICAgICAgICAgICAgICAgaWYgKHByb2NlZHVyZS5fZGVmLm11dGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSAnbXV0YXRpb24nO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvY2VkdXJlLl9kZWYuc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSAnc3Vic2NyaXB0aW9uJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb2NlZHVyZSh7XG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGZ1bGxQYXRoLFxuICAgICAgICAgICAgICAgICAgICByYXdJbnB1dDogYXJnc1swXSxcbiAgICAgICAgICAgICAgICAgICAgY3R4LFxuICAgICAgICAgICAgICAgICAgICB0eXBlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBwcm94eTtcbiAgICAgICAgfTtcbiAgICB9O1xufVxuXG4vKipcbiAqIFRoZSBkZWZhdWx0IGNoZWNrIHRvIHNlZSBpZiB3ZSdyZSBpbiBhIHNlcnZlclxuICovIGNvbnN0IGlzU2VydmVyRGVmYXVsdCA9IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnIHx8ICdEZW5vJyBpbiB3aW5kb3cgfHwgZ2xvYmFsVGhpcy5wcm9jZXNzPy5lbnY/Lk5PREVfRU5WID09PSAndGVzdCcgfHwgISFnbG9iYWxUaGlzLnByb2Nlc3M/LmVudj8uSkVTVF9XT1JLRVJfSUQgfHwgISFnbG9iYWxUaGlzLnByb2Nlc3M/LmVudj8uVklURVNUX1dPUktFUl9JRDtcblxuZXhwb3J0IHsgZGVmYXVsdFRyYW5zZm9ybWVyIGFzIGEsIGNyZWF0ZUNhbGxlckZhY3RvcnkgYXMgYiwgY3JlYXRlUm91dGVyRmFjdG9yeSBhcyBjLCBkZWZhdWx0Rm9ybWF0dGVyIGFzIGQsIGNhbGxQcm9jZWR1cmUgYXMgZSwgZ2V0RGF0YVRyYW5zZm9ybWVyIGFzIGcsIGlzU2VydmVyRGVmYXVsdCBhcyBpLCBwcm9jZWR1cmVUeXBlcyBhcyBwIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/@trpc/server/dist/config-d5fdbd39.mjs\n");

/***/ }),

/***/ "(rsc)/../../node_modules/@trpc/server/dist/contentType-9fd995d3.mjs":
/*!*********************************************************************!*\
  !*** ../../node_modules/@trpc/server/dist/contentType-9fd995d3.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   g: () => (/* binding */ getJsonContentTypeInputs)\n/* harmony export */ });\n/* harmony import */ var _TRPCError_98d44758_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./TRPCError-98d44758.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/TRPCError-98d44758.mjs\");\n\n\nfunction getRawProcedureInputOrThrow(opts) {\n    const { req  } = opts;\n    try {\n        if (req.method === 'GET') {\n            if (!req.query.has('input')) {\n                return undefined;\n            }\n            const raw = req.query.get('input');\n            return JSON.parse(raw);\n        }\n        if (!opts.preprocessedBody && typeof req.body === 'string') {\n            // A mutation with no inputs will have req.body === ''\n            return req.body.length === 0 ? undefined : JSON.parse(req.body);\n        }\n        return req.body;\n    } catch (cause) {\n        throw new _TRPCError_98d44758_mjs__WEBPACK_IMPORTED_MODULE_0__.T({\n            code: 'PARSE_ERROR',\n            cause\n        });\n    }\n}\nconst deserializeInputValue = (rawValue, transformer)=>{\n    return typeof rawValue !== 'undefined' ? transformer.input.deserialize(rawValue) : rawValue;\n};\nconst getJsonContentTypeInputs = (opts)=>{\n    const rawInput = getRawProcedureInputOrThrow(opts);\n    const transformer = opts.router._def._config.transformer;\n    if (!opts.isBatchCall) {\n        return {\n            0: deserializeInputValue(rawInput, transformer)\n        };\n    }\n    /* istanbul ignore if  */ if (rawInput == null || typeof rawInput !== 'object' || Array.isArray(rawInput)) {\n        throw new _TRPCError_98d44758_mjs__WEBPACK_IMPORTED_MODULE_0__.T({\n            code: 'BAD_REQUEST',\n            message: '\"input\" needs to be an object when doing a batch call'\n        });\n    }\n    const input = {};\n    for(const key in rawInput){\n        const k = key;\n        const rawValue = rawInput[k];\n        const value = deserializeInputValue(rawValue, transformer);\n        input[k] = value;\n    }\n    return input;\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzL0B0cnBjL3NlcnZlci9kaXN0L2NvbnRlbnRUeXBlLTlmZDk5NWQzLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUEwRDs7QUFFMUQ7QUFDQSxZQUFZLE9BQU87QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sa0JBQWtCLHNEQUFTO0FBQzNCO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixzREFBUztBQUMzQjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUV5QyIsInNvdXJjZXMiOlsid2VicGFjazovL0Bib2lsZXJwbGF0ZS9uZXh0anMvLi4vLi4vbm9kZV9tb2R1bGVzL0B0cnBjL3NlcnZlci9kaXN0L2NvbnRlbnRUeXBlLTlmZDk5NWQzLm1qcz8zMTc0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFQgYXMgVFJQQ0Vycm9yIH0gZnJvbSAnLi9UUlBDRXJyb3ItOThkNDQ3NTgubWpzJztcblxuZnVuY3Rpb24gZ2V0UmF3UHJvY2VkdXJlSW5wdXRPclRocm93KG9wdHMpIHtcbiAgICBjb25zdCB7IHJlcSAgfSA9IG9wdHM7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHJlcS5tZXRob2QgPT09ICdHRVQnKSB7XG4gICAgICAgICAgICBpZiAoIXJlcS5xdWVyeS5oYXMoJ2lucHV0JykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmF3ID0gcmVxLnF1ZXJ5LmdldCgnaW5wdXQnKTtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHJhdyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvcHRzLnByZXByb2Nlc3NlZEJvZHkgJiYgdHlwZW9mIHJlcS5ib2R5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgLy8gQSBtdXRhdGlvbiB3aXRoIG5vIGlucHV0cyB3aWxsIGhhdmUgcmVxLmJvZHkgPT09ICcnXG4gICAgICAgICAgICByZXR1cm4gcmVxLmJvZHkubGVuZ3RoID09PSAwID8gdW5kZWZpbmVkIDogSlNPTi5wYXJzZShyZXEuYm9keSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcS5ib2R5O1xuICAgIH0gY2F0Y2ggKGNhdXNlKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgICAgY29kZTogJ1BBUlNFX0VSUk9SJyxcbiAgICAgICAgICAgIGNhdXNlXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmNvbnN0IGRlc2VyaWFsaXplSW5wdXRWYWx1ZSA9IChyYXdWYWx1ZSwgdHJhbnNmb3JtZXIpPT57XG4gICAgcmV0dXJuIHR5cGVvZiByYXdWYWx1ZSAhPT0gJ3VuZGVmaW5lZCcgPyB0cmFuc2Zvcm1lci5pbnB1dC5kZXNlcmlhbGl6ZShyYXdWYWx1ZSkgOiByYXdWYWx1ZTtcbn07XG5jb25zdCBnZXRKc29uQ29udGVudFR5cGVJbnB1dHMgPSAob3B0cyk9PntcbiAgICBjb25zdCByYXdJbnB1dCA9IGdldFJhd1Byb2NlZHVyZUlucHV0T3JUaHJvdyhvcHRzKTtcbiAgICBjb25zdCB0cmFuc2Zvcm1lciA9IG9wdHMucm91dGVyLl9kZWYuX2NvbmZpZy50cmFuc2Zvcm1lcjtcbiAgICBpZiAoIW9wdHMuaXNCYXRjaENhbGwpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIDA6IGRlc2VyaWFsaXplSW5wdXRWYWx1ZShyYXdJbnB1dCwgdHJhbnNmb3JtZXIpXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi8gaWYgKHJhd0lucHV0ID09IG51bGwgfHwgdHlwZW9mIHJhd0lucHV0ICE9PSAnb2JqZWN0JyB8fCBBcnJheS5pc0FycmF5KHJhd0lucHV0KSkge1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICAgIGNvZGU6ICdCQURfUkVRVUVTVCcsXG4gICAgICAgICAgICBtZXNzYWdlOiAnXCJpbnB1dFwiIG5lZWRzIHRvIGJlIGFuIG9iamVjdCB3aGVuIGRvaW5nIGEgYmF0Y2ggY2FsbCdcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGlucHV0ID0ge307XG4gICAgZm9yKGNvbnN0IGtleSBpbiByYXdJbnB1dCl7XG4gICAgICAgIGNvbnN0IGsgPSBrZXk7XG4gICAgICAgIGNvbnN0IHJhd1ZhbHVlID0gcmF3SW5wdXRba107XG4gICAgICAgIGNvbnN0IHZhbHVlID0gZGVzZXJpYWxpemVJbnB1dFZhbHVlKHJhd1ZhbHVlLCB0cmFuc2Zvcm1lcik7XG4gICAgICAgIGlucHV0W2tdID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBpbnB1dDtcbn07XG5cbmV4cG9ydCB7IGdldEpzb25Db250ZW50VHlwZUlucHV0cyBhcyBnIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/@trpc/server/dist/contentType-9fd995d3.mjs\n");

/***/ }),

/***/ "(rsc)/../../node_modules/@trpc/server/dist/getCauseFromUnknown-2d66414a.mjs":
/*!*****************************************************************************!*\
  !*** ../../node_modules/@trpc/server/dist/getCauseFromUnknown-2d66414a.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   g: () => (/* binding */ getCauseFromUnknown)\n/* harmony export */ });\n/**\n * @internal\n */ function isObject(value) {\n    // check that value is object\n    return !!value && !Array.isArray(value) && typeof value === 'object';\n}\n\nclass UnknownCauseError extends Error {\n}\nfunction getCauseFromUnknown(cause) {\n    if (cause instanceof Error) {\n        return cause;\n    }\n    const type = typeof cause;\n    if (type === 'undefined' || type === 'function' || cause === null) {\n        return undefined;\n    }\n    // Primitive types just get wrapped in an error\n    if (type !== 'object') {\n        return new Error(String(cause));\n    }\n    // If it's an object, we'll create a synthetic error\n    if (isObject(cause)) {\n        const err = new UnknownCauseError();\n        for(const key in cause){\n            err[key] = cause[key];\n        }\n        return err;\n    }\n    return undefined;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzL0B0cnBjL3NlcnZlci9kaXN0L2dldENhdXNlRnJvbVVua25vd24tMmQ2NjQxNGEubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVvQyIsInNvdXJjZXMiOlsid2VicGFjazovL0Bib2lsZXJwbGF0ZS9uZXh0anMvLi4vLi4vbm9kZV9tb2R1bGVzL0B0cnBjL3NlcnZlci9kaXN0L2dldENhdXNlRnJvbVVua25vd24tMmQ2NjQxNGEubWpzPzVjZTciXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAgIC8vIGNoZWNrIHRoYXQgdmFsdWUgaXMgb2JqZWN0XG4gICAgcmV0dXJuICEhdmFsdWUgJiYgIUFycmF5LmlzQXJyYXkodmFsdWUpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCc7XG59XG5cbmNsYXNzIFVua25vd25DYXVzZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xufVxuZnVuY3Rpb24gZ2V0Q2F1c2VGcm9tVW5rbm93bihjYXVzZSkge1xuICAgIGlmIChjYXVzZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIHJldHVybiBjYXVzZTtcbiAgICB9XG4gICAgY29uc3QgdHlwZSA9IHR5cGVvZiBjYXVzZTtcbiAgICBpZiAodHlwZSA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZSA9PT0gJ2Z1bmN0aW9uJyB8fCBjYXVzZSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvLyBQcmltaXRpdmUgdHlwZXMganVzdCBnZXQgd3JhcHBlZCBpbiBhbiBlcnJvclxuICAgIGlmICh0eXBlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gbmV3IEVycm9yKFN0cmluZyhjYXVzZSkpO1xuICAgIH1cbiAgICAvLyBJZiBpdCdzIGFuIG9iamVjdCwgd2UnbGwgY3JlYXRlIGEgc3ludGhldGljIGVycm9yXG4gICAgaWYgKGlzT2JqZWN0KGNhdXNlKSkge1xuICAgICAgICBjb25zdCBlcnIgPSBuZXcgVW5rbm93bkNhdXNlRXJyb3IoKTtcbiAgICAgICAgZm9yKGNvbnN0IGtleSBpbiBjYXVzZSl7XG4gICAgICAgICAgICBlcnJba2V5XSA9IGNhdXNlW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVycjtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IHsgZ2V0Q2F1c2VGcm9tVW5rbm93biBhcyBnIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/@trpc/server/dist/getCauseFromUnknown-2d66414a.mjs\n");

/***/ }),

/***/ "(rsc)/../../node_modules/@trpc/server/dist/index-f91d720c.mjs":
/*!***************************************************************!*\
  !*** ../../node_modules/@trpc/server/dist/index-f91d720c.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   T: () => (/* binding */ TRPC_ERROR_CODES_BY_NUMBER),\n/* harmony export */   a: () => (/* binding */ createRecursiveProxy),\n/* harmony export */   b: () => (/* binding */ getHTTPStatusCode),\n/* harmony export */   c: () => (/* binding */ createFlatProxy),\n/* harmony export */   g: () => (/* binding */ getHTTPStatusCodeFromError)\n/* harmony export */ });\n/* harmony import */ var _codes_c924c3db_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./codes-c924c3db.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/codes-c924c3db.mjs\");\n\n\nconst TRPC_ERROR_CODES_BY_NUMBER = (0,_codes_c924c3db_mjs__WEBPACK_IMPORTED_MODULE_0__.i)(_codes_c924c3db_mjs__WEBPACK_IMPORTED_MODULE_0__.T);\nconst JSONRPC2_TO_HTTP_CODE = {\n    PARSE_ERROR: 400,\n    BAD_REQUEST: 400,\n    UNAUTHORIZED: 401,\n    NOT_FOUND: 404,\n    FORBIDDEN: 403,\n    METHOD_NOT_SUPPORTED: 405,\n    TIMEOUT: 408,\n    CONFLICT: 409,\n    PRECONDITION_FAILED: 412,\n    PAYLOAD_TOO_LARGE: 413,\n    UNPROCESSABLE_CONTENT: 422,\n    TOO_MANY_REQUESTS: 429,\n    CLIENT_CLOSED_REQUEST: 499,\n    INTERNAL_SERVER_ERROR: 500,\n    NOT_IMPLEMENTED: 501\n};\nfunction getStatusCodeFromKey(code) {\n    return JSONRPC2_TO_HTTP_CODE[code] ?? 500;\n}\nfunction getHTTPStatusCode(json) {\n    const arr = Array.isArray(json) ? json : [\n        json\n    ];\n    const httpStatuses = new Set(arr.map((res)=>{\n        if ('error' in res) {\n            const data = res.error.data;\n            if (typeof data.httpStatus === 'number') {\n                return data.httpStatus;\n            }\n            const code = TRPC_ERROR_CODES_BY_NUMBER[res.error.code];\n            return getStatusCodeFromKey(code);\n        }\n        return 200;\n    }));\n    if (httpStatuses.size !== 1) {\n        return 207;\n    }\n    const httpStatus = httpStatuses.values().next().value;\n    return httpStatus;\n}\nfunction getHTTPStatusCodeFromError(error) {\n    return getStatusCodeFromKey(error.code);\n}\n\nconst noop = ()=>{\n// noop\n};\nfunction createInnerProxy(callback, path) {\n    const proxy = new Proxy(noop, {\n        get (_obj, key) {\n            if (typeof key !== 'string' || key === 'then') {\n                // special case for if the proxy is accidentally treated\n                // like a PromiseLike (like in `Promise.resolve(proxy)`)\n                return undefined;\n            }\n            return createInnerProxy(callback, [\n                ...path,\n                key\n            ]);\n        },\n        apply (_1, _2, args) {\n            const isApply = path[path.length - 1] === 'apply';\n            return callback({\n                args: isApply ? args.length >= 2 ? args[1] : [] : args,\n                path: isApply ? path.slice(0, -1) : path\n            });\n        }\n    });\n    return proxy;\n}\n/**\n * Creates a proxy that calls the callback with the path and arguments\n *\n * @internal\n */ const createRecursiveProxy = (callback)=>createInnerProxy(callback, []);\n/**\n * Used in place of `new Proxy` where each handler will map 1 level deep to another value.\n *\n * @internal\n */ const createFlatProxy = (callback)=>{\n    return new Proxy(noop, {\n        get (_obj, name) {\n            if (typeof name !== 'string' || name === 'then') {\n                // special case for if the proxy is accidentally treated\n                // like a PromiseLike (like in `Promise.resolve(proxy)`)\n                return undefined;\n            }\n            return callback(name);\n        }\n    });\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzL0B0cnBjL3NlcnZlci9kaXN0L2luZGV4LWY5MWQ3MjBjLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBaUY7O0FBRWpGLG1DQUFtQyxzREFBTSxDQUFDLGtEQUF1QjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVxSiIsInNvdXJjZXMiOlsid2VicGFjazovL0Bib2lsZXJwbGF0ZS9uZXh0anMvLi4vLi4vbm9kZV9tb2R1bGVzL0B0cnBjL3NlcnZlci9kaXN0L2luZGV4LWY5MWQ3MjBjLm1qcz9hODBmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGkgYXMgaW52ZXJ0LCBUIGFzIFRSUENfRVJST1JfQ09ERVNfQllfS0VZIH0gZnJvbSAnLi9jb2Rlcy1jOTI0YzNkYi5tanMnO1xuXG5jb25zdCBUUlBDX0VSUk9SX0NPREVTX0JZX05VTUJFUiA9IGludmVydChUUlBDX0VSUk9SX0NPREVTX0JZX0tFWSk7XG5jb25zdCBKU09OUlBDMl9UT19IVFRQX0NPREUgPSB7XG4gICAgUEFSU0VfRVJST1I6IDQwMCxcbiAgICBCQURfUkVRVUVTVDogNDAwLFxuICAgIFVOQVVUSE9SSVpFRDogNDAxLFxuICAgIE5PVF9GT1VORDogNDA0LFxuICAgIEZPUkJJRERFTjogNDAzLFxuICAgIE1FVEhPRF9OT1RfU1VQUE9SVEVEOiA0MDUsXG4gICAgVElNRU9VVDogNDA4LFxuICAgIENPTkZMSUNUOiA0MDksXG4gICAgUFJFQ09ORElUSU9OX0ZBSUxFRDogNDEyLFxuICAgIFBBWUxPQURfVE9PX0xBUkdFOiA0MTMsXG4gICAgVU5QUk9DRVNTQUJMRV9DT05URU5UOiA0MjIsXG4gICAgVE9PX01BTllfUkVRVUVTVFM6IDQyOSxcbiAgICBDTElFTlRfQ0xPU0VEX1JFUVVFU1Q6IDQ5OSxcbiAgICBJTlRFUk5BTF9TRVJWRVJfRVJST1I6IDUwMCxcbiAgICBOT1RfSU1QTEVNRU5URUQ6IDUwMVxufTtcbmZ1bmN0aW9uIGdldFN0YXR1c0NvZGVGcm9tS2V5KGNvZGUpIHtcbiAgICByZXR1cm4gSlNPTlJQQzJfVE9fSFRUUF9DT0RFW2NvZGVdID8/IDUwMDtcbn1cbmZ1bmN0aW9uIGdldEhUVFBTdGF0dXNDb2RlKGpzb24pIHtcbiAgICBjb25zdCBhcnIgPSBBcnJheS5pc0FycmF5KGpzb24pID8ganNvbiA6IFtcbiAgICAgICAganNvblxuICAgIF07XG4gICAgY29uc3QgaHR0cFN0YXR1c2VzID0gbmV3IFNldChhcnIubWFwKChyZXMpPT57XG4gICAgICAgIGlmICgnZXJyb3InIGluIHJlcykge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHJlcy5lcnJvci5kYXRhO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRhLmh0dHBTdGF0dXMgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuaHR0cFN0YXR1cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNvZGUgPSBUUlBDX0VSUk9SX0NPREVTX0JZX05VTUJFUltyZXMuZXJyb3IuY29kZV07XG4gICAgICAgICAgICByZXR1cm4gZ2V0U3RhdHVzQ29kZUZyb21LZXkoY29kZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDIwMDtcbiAgICB9KSk7XG4gICAgaWYgKGh0dHBTdGF0dXNlcy5zaXplICE9PSAxKSB7XG4gICAgICAgIHJldHVybiAyMDc7XG4gICAgfVxuICAgIGNvbnN0IGh0dHBTdGF0dXMgPSBodHRwU3RhdHVzZXMudmFsdWVzKCkubmV4dCgpLnZhbHVlO1xuICAgIHJldHVybiBodHRwU3RhdHVzO1xufVxuZnVuY3Rpb24gZ2V0SFRUUFN0YXR1c0NvZGVGcm9tRXJyb3IoZXJyb3IpIHtcbiAgICByZXR1cm4gZ2V0U3RhdHVzQ29kZUZyb21LZXkoZXJyb3IuY29kZSk7XG59XG5cbmNvbnN0IG5vb3AgPSAoKT0+e1xuLy8gbm9vcFxufTtcbmZ1bmN0aW9uIGNyZWF0ZUlubmVyUHJveHkoY2FsbGJhY2ssIHBhdGgpIHtcbiAgICBjb25zdCBwcm94eSA9IG5ldyBQcm94eShub29wLCB7XG4gICAgICAgIGdldCAoX29iaiwga2V5KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGtleSAhPT0gJ3N0cmluZycgfHwga2V5ID09PSAndGhlbicpIHtcbiAgICAgICAgICAgICAgICAvLyBzcGVjaWFsIGNhc2UgZm9yIGlmIHRoZSBwcm94eSBpcyBhY2NpZGVudGFsbHkgdHJlYXRlZFxuICAgICAgICAgICAgICAgIC8vIGxpa2UgYSBQcm9taXNlTGlrZSAobGlrZSBpbiBgUHJvbWlzZS5yZXNvbHZlKHByb3h5KWApXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVJbm5lclByb3h5KGNhbGxiYWNrLCBbXG4gICAgICAgICAgICAgICAgLi4ucGF0aCxcbiAgICAgICAgICAgICAgICBrZXlcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9LFxuICAgICAgICBhcHBseSAoXzEsIF8yLCBhcmdzKSB7XG4gICAgICAgICAgICBjb25zdCBpc0FwcGx5ID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdID09PSAnYXBwbHknO1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHtcbiAgICAgICAgICAgICAgICBhcmdzOiBpc0FwcGx5ID8gYXJncy5sZW5ndGggPj0gMiA/IGFyZ3NbMV0gOiBbXSA6IGFyZ3MsXG4gICAgICAgICAgICAgICAgcGF0aDogaXNBcHBseSA/IHBhdGguc2xpY2UoMCwgLTEpIDogcGF0aFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcHJveHk7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBwcm94eSB0aGF0IGNhbGxzIHRoZSBjYWxsYmFjayB3aXRoIHRoZSBwYXRoIGFuZCBhcmd1bWVudHNcbiAqXG4gKiBAaW50ZXJuYWxcbiAqLyBjb25zdCBjcmVhdGVSZWN1cnNpdmVQcm94eSA9IChjYWxsYmFjayk9PmNyZWF0ZUlubmVyUHJveHkoY2FsbGJhY2ssIFtdKTtcbi8qKlxuICogVXNlZCBpbiBwbGFjZSBvZiBgbmV3IFByb3h5YCB3aGVyZSBlYWNoIGhhbmRsZXIgd2lsbCBtYXAgMSBsZXZlbCBkZWVwIHRvIGFub3RoZXIgdmFsdWUuXG4gKlxuICogQGludGVybmFsXG4gKi8gY29uc3QgY3JlYXRlRmxhdFByb3h5ID0gKGNhbGxiYWNrKT0+e1xuICAgIHJldHVybiBuZXcgUHJveHkobm9vcCwge1xuICAgICAgICBnZXQgKF9vYmosIG5hbWUpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycgfHwgbmFtZSA9PT0gJ3RoZW4nKSB7XG4gICAgICAgICAgICAgICAgLy8gc3BlY2lhbCBjYXNlIGZvciBpZiB0aGUgcHJveHkgaXMgYWNjaWRlbnRhbGx5IHRyZWF0ZWRcbiAgICAgICAgICAgICAgICAvLyBsaWtlIGEgUHJvbWlzZUxpa2UgKGxpa2UgaW4gYFByb21pc2UucmVzb2x2ZShwcm94eSlgKVxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmFtZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbmV4cG9ydCB7IFRSUENfRVJST1JfQ09ERVNfQllfTlVNQkVSIGFzIFQsIGNyZWF0ZVJlY3Vyc2l2ZVByb3h5IGFzIGEsIGdldEhUVFBTdGF0dXNDb2RlIGFzIGIsIGNyZWF0ZUZsYXRQcm94eSBhcyBjLCBnZXRIVFRQU3RhdHVzQ29kZUZyb21FcnJvciBhcyBnIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/@trpc/server/dist/index-f91d720c.mjs\n");

/***/ }),

/***/ "(rsc)/../../node_modules/@trpc/server/dist/index.mjs":
/*!******************************************************!*\
  !*** ../../node_modules/@trpc/server/dist/index.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TRPCError: () => (/* reexport safe */ _TRPCError_98d44758_mjs__WEBPACK_IMPORTED_MODULE_1__.T),\n/* harmony export */   callProcedure: () => (/* reexport safe */ _config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__.e),\n/* harmony export */   createCallerFactory: () => (/* reexport safe */ _config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__.b),\n/* harmony export */   createInputMiddleware: () => (/* binding */ createInputMiddleware),\n/* harmony export */   createOutputMiddleware: () => (/* binding */ createOutputMiddleware),\n/* harmony export */   defaultTransformer: () => (/* reexport safe */ _config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__.a),\n/* harmony export */   experimental_standaloneMiddleware: () => (/* binding */ experimental_standaloneMiddleware),\n/* harmony export */   getDataTransformer: () => (/* reexport safe */ _config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__.g),\n/* harmony export */   getTRPCErrorFromUnknown: () => (/* reexport safe */ _TRPCError_98d44758_mjs__WEBPACK_IMPORTED_MODULE_1__.g),\n/* harmony export */   initTRPC: () => (/* binding */ initTRPC),\n/* harmony export */   procedureTypes: () => (/* reexport safe */ _config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__.p),\n/* harmony export */   router: () => (/* binding */ router)\n/* harmony export */ });\n/* harmony import */ var _config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config-d5fdbd39.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/config-d5fdbd39.mjs\");\n/* harmony import */ var _TRPCError_98d44758_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TRPCError-98d44758.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/TRPCError-98d44758.mjs\");\n/* harmony import */ var _index_f91d720c_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index-f91d720c.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/index-f91d720c.mjs\");\n/* harmony import */ var _codes_c924c3db_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./codes-c924c3db.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/codes-c924c3db.mjs\");\n/* harmony import */ var _getCauseFromUnknown_2d66414a_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./getCauseFromUnknown-2d66414a.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/getCauseFromUnknown-2d66414a.mjs\");\n\n\n\n\n\n\n\n\n/**\n * @deprecated\n */ const middlewareMarker$1 = 'middlewareMarker';\n\nfunction getParseFn$1(procedureParser) {\n    const parser = procedureParser;\n    if (typeof parser === 'function') {\n        // ProcedureParserCustomValidatorEsque\n        return parser;\n    }\n    if (typeof parser.parseAsync === 'function') {\n        // ProcedureParserZodEsque\n        return parser.parseAsync.bind(parser);\n    }\n    if (typeof parser.parse === 'function') {\n        // ProcedureParserZodEsque\n        return parser.parse.bind(parser);\n    }\n    if (typeof parser.validateSync === 'function') {\n        // ProcedureParserYupEsque\n        return parser.validateSync.bind(parser);\n    }\n    if (typeof parser.create === 'function') {\n        // ProcedureParserSuperstructEsque\n        return parser.create.bind(parser);\n    }\n    throw new Error('Could not find a validator fn');\n}\n/**\n * @internal\n * @deprecated\n */ class Procedure {\n    _def() {\n        return {\n            middlewares: this.middlewares,\n            resolver: this.resolver,\n            inputParser: this.inputParser,\n            outputParser: this.outputParser,\n            meta: this.meta\n        };\n    }\n    async parseInput(rawInput) {\n        try {\n            return await this.parseInputFn(rawInput);\n        } catch (cause) {\n            throw new _TRPCError_98d44758_mjs__WEBPACK_IMPORTED_MODULE_1__.T({\n                code: 'BAD_REQUEST',\n                cause\n            });\n        }\n    }\n    async parseOutput(rawOutput) {\n        try {\n            return await this.parseOutputFn(rawOutput);\n        } catch (cause) {\n            throw new _TRPCError_98d44758_mjs__WEBPACK_IMPORTED_MODULE_1__.T({\n                code: 'INTERNAL_SERVER_ERROR',\n                cause,\n                message: 'Output validation failed'\n            });\n        }\n    }\n    /**\n   * Trigger middlewares in order, parse raw input, call resolver & parse raw output\n   * @internal\n   */ async call(opts) {\n        // wrap the actual resolver and treat as the last \"middleware\"\n        const middlewaresWithResolver = this.middlewares.concat([\n            async ({ ctx  })=>{\n                const input = await this.parseInput(opts.rawInput);\n                const rawOutput = await this.resolver({\n                    ...opts,\n                    ctx,\n                    input\n                });\n                const data = await this.parseOutput(rawOutput);\n                return {\n                    marker: middlewareMarker$1,\n                    ok: true,\n                    data,\n                    ctx\n                };\n            }\n        ]);\n        // run the middlewares recursively with the resolver as the last one\n        const callRecursive = async (callOpts = {\n            index: 0,\n            ctx: opts.ctx\n        })=>{\n            try {\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                const result = await middlewaresWithResolver[callOpts.index]({\n                    ctx: callOpts.ctx,\n                    type: opts.type,\n                    path: opts.path,\n                    rawInput: opts.rawInput,\n                    meta: this.meta,\n                    next: async (nextOpts)=>{\n                        return await callRecursive({\n                            index: callOpts.index + 1,\n                            ctx: nextOpts ? nextOpts.ctx : callOpts.ctx\n                        });\n                    }\n                });\n                return result;\n            } catch (cause) {\n                return {\n                    ctx: callOpts.ctx,\n                    ok: false,\n                    error: (0,_TRPCError_98d44758_mjs__WEBPACK_IMPORTED_MODULE_1__.g)(cause),\n                    marker: middlewareMarker$1\n                };\n            }\n        };\n        // there's always at least one \"next\" since we wrap this.resolver in a middleware\n        const result = await callRecursive();\n        if (!result) {\n            throw new _TRPCError_98d44758_mjs__WEBPACK_IMPORTED_MODULE_1__.T({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'No result from middlewares - did you forget to `return next()`?'\n            });\n        }\n        if (!result.ok) {\n            // re-throw original error\n            throw result.error;\n        }\n        return result.data;\n    }\n    /**\n   * Create new procedure with passed middlewares\n   * @param middlewares\n   */ inheritMiddlewares(middlewares) {\n        const Constructor = this.constructor;\n        const instance = new Constructor({\n            middlewares: [\n                ...middlewares,\n                ...this.middlewares\n            ],\n            resolver: this.resolver,\n            inputParser: this.inputParser,\n            outputParser: this.outputParser,\n            meta: this.meta\n        });\n        return instance;\n    }\n    constructor(opts){\n        this.middlewares = opts.middlewares;\n        this.resolver = opts.resolver;\n        this.inputParser = opts.inputParser;\n        this.parseInputFn = getParseFn$1(this.inputParser);\n        this.outputParser = opts.outputParser;\n        this.parseOutputFn = getParseFn$1(this.outputParser);\n        this.meta = opts.meta;\n    }\n}\nfunction createProcedure(opts) {\n    const inputParser = 'input' in opts ? opts.input : (input)=>{\n        if (input != null) {\n            throw new _TRPCError_98d44758_mjs__WEBPACK_IMPORTED_MODULE_1__.T({\n                code: 'BAD_REQUEST',\n                message: 'No input expected'\n            });\n        }\n        return undefined;\n    };\n    const outputParser = 'output' in opts && opts.output ? opts.output : (output)=>output;\n    return new Procedure({\n        inputParser: inputParser,\n        resolver: opts.resolve,\n        middlewares: [],\n        outputParser: outputParser,\n        meta: opts.meta\n    });\n}\n\nfunction getParseFn(procedureParser) {\n    const parser = procedureParser;\n    if (typeof parser === 'function') {\n        // ParserCustomValidatorEsque\n        return parser;\n    }\n    if (typeof parser.parseAsync === 'function') {\n        // ParserZodEsque\n        return parser.parseAsync.bind(parser);\n    }\n    if (typeof parser.parse === 'function') {\n        // ParserZodEsque\n        // ParserValibotEsque (<= v0.12.X)\n        return parser.parse.bind(parser);\n    }\n    if (typeof parser.validateSync === 'function') {\n        // ParserYupEsque\n        return parser.validateSync.bind(parser);\n    }\n    if (typeof parser.create === 'function') {\n        // ParserSuperstructEsque\n        return parser.create.bind(parser);\n    }\n    if (typeof parser.assert === 'function') {\n        // ParserScaleEsque\n        return (value)=>{\n            parser.assert(value);\n            return value;\n        };\n    }\n    throw new Error('Could not find a validator fn');\n}\n/**\n * @deprecated only for backwards compat\n * @internal\n */ function getParseFnOrPassThrough(procedureParser) {\n    if (!procedureParser) {\n        return (v)=>v;\n    }\n    return getParseFn(procedureParser);\n}\n\n/**\n * Ensures there are no duplicate keys when building a procedure.\n */ function mergeWithoutOverrides(obj1, ...objs) {\n    const newObj = Object.assign(Object.create(null), obj1);\n    for (const overrides of objs){\n        for(const key in overrides){\n            if (key in newObj && newObj[key] !== overrides[key]) {\n                throw new Error(`Duplicate key ${key}`);\n            }\n            newObj[key] = overrides[key];\n        }\n    }\n    return newObj;\n}\n\n/**\n * @internal\n */ function createMiddlewareFactory() {\n    function createMiddlewareInner(middlewares) {\n        return {\n            _middlewares: middlewares,\n            unstable_pipe (middlewareBuilderOrFn) {\n                const pipedMiddleware = '_middlewares' in middlewareBuilderOrFn ? middlewareBuilderOrFn._middlewares : [\n                    middlewareBuilderOrFn\n                ];\n                return createMiddlewareInner([\n                    ...middlewares,\n                    ...pipedMiddleware\n                ]);\n            }\n        };\n    }\n    function createMiddleware(fn) {\n        return createMiddlewareInner([\n            fn\n        ]);\n    }\n    return createMiddleware;\n}\nconst experimental_standaloneMiddleware = ()=>({\n        create: createMiddlewareFactory()\n    });\nfunction isPlainObject(obj) {\n    return obj && typeof obj === 'object' && !Array.isArray(obj);\n}\n/**\n * @internal\n * Please note, `trpc-openapi` uses this function.\n */ function createInputMiddleware(parse) {\n    const inputMiddleware = async ({ next , rawInput , input ,  })=>{\n        let parsedInput;\n        try {\n            parsedInput = await parse(rawInput);\n        } catch (cause) {\n            throw new _TRPCError_98d44758_mjs__WEBPACK_IMPORTED_MODULE_1__.T({\n                code: 'BAD_REQUEST',\n                cause\n            });\n        }\n        // Multiple input parsers\n        const combinedInput = isPlainObject(input) && isPlainObject(parsedInput) ? {\n            ...input,\n            ...parsedInput\n        } : parsedInput;\n        // TODO fix this typing?\n        return next({\n            input: combinedInput\n        });\n    };\n    inputMiddleware._type = 'input';\n    return inputMiddleware;\n}\n/**\n * @internal\n */ function createOutputMiddleware(parse) {\n    const outputMiddleware = async ({ next  })=>{\n        const result = await next();\n        if (!result.ok) {\n            // pass through failures without validating\n            return result;\n        }\n        try {\n            const data = await parse(result.data);\n            return {\n                ...result,\n                data\n            };\n        } catch (cause) {\n            throw new _TRPCError_98d44758_mjs__WEBPACK_IMPORTED_MODULE_1__.T({\n                message: 'Output validation failed',\n                code: 'INTERNAL_SERVER_ERROR',\n                cause\n            });\n        }\n    };\n    outputMiddleware._type = 'output';\n    return outputMiddleware;\n}\n\n/**\n * @internal\n */ const middlewareMarker = 'middlewareMarker';\n\nfunction createNewBuilder(def1, def2) {\n    const { middlewares =[] , inputs , meta , ...rest } = def2;\n    // TODO: maybe have a fn here to warn about calls\n    return createBuilder({\n        ...mergeWithoutOverrides(def1, rest),\n        inputs: [\n            ...def1.inputs,\n            ...inputs ?? []\n        ],\n        middlewares: [\n            ...def1.middlewares,\n            ...middlewares\n        ],\n        meta: def1.meta && meta ? {\n            ...def1.meta,\n            ...meta\n        } : meta ?? def1.meta\n    });\n}\nfunction createBuilder(initDef = {}) {\n    const _def = {\n        inputs: [],\n        middlewares: [],\n        ...initDef\n    };\n    return {\n        _def,\n        input (input) {\n            const parser = getParseFn(input);\n            return createNewBuilder(_def, {\n                inputs: [\n                    input\n                ],\n                middlewares: [\n                    createInputMiddleware(parser)\n                ]\n            });\n        },\n        output (output) {\n            const parseOutput = getParseFn(output);\n            return createNewBuilder(_def, {\n                output,\n                middlewares: [\n                    createOutputMiddleware(parseOutput)\n                ]\n            });\n        },\n        meta (meta) {\n            return createNewBuilder(_def, {\n                meta: meta\n            });\n        },\n        /**\n     * @deprecated\n     * This functionality is deprecated and will be removed in the next major version.\n     */ unstable_concat (builder) {\n            return createNewBuilder(_def, builder._def);\n        },\n        use (middlewareBuilderOrFn) {\n            // Distinguish between a middleware builder and a middleware function\n            const middlewares = '_middlewares' in middlewareBuilderOrFn ? middlewareBuilderOrFn._middlewares : [\n                middlewareBuilderOrFn\n            ];\n            return createNewBuilder(_def, {\n                middlewares: middlewares\n            });\n        },\n        query (resolver) {\n            return createResolver({\n                ..._def,\n                query: true\n            }, resolver);\n        },\n        mutation (resolver) {\n            return createResolver({\n                ..._def,\n                mutation: true\n            }, resolver);\n        },\n        subscription (resolver) {\n            return createResolver({\n                ..._def,\n                subscription: true\n            }, resolver);\n        }\n    };\n}\nfunction createResolver(_def, resolver) {\n    const finalBuilder = createNewBuilder(_def, {\n        resolver,\n        middlewares: [\n            async function resolveMiddleware(opts) {\n                const data = await resolver(opts);\n                return {\n                    marker: middlewareMarker,\n                    ok: true,\n                    data,\n                    ctx: opts.ctx\n                };\n            }\n        ]\n    });\n    return createProcedureCaller(finalBuilder._def);\n}\nconst codeblock = `\nThis is a client-only function.\nIf you want to call this function on the server, see https://trpc.io/docs/server/server-side-calls\n`.trim();\nfunction createProcedureCaller(_def) {\n    const procedure = async function resolve(opts) {\n        // is direct server-side call\n        if (!opts || !('rawInput' in opts)) {\n            throw new Error(codeblock);\n        }\n        // run the middlewares recursively with the resolver as the last one\n        const callRecursive = async (callOpts = {\n            index: 0,\n            ctx: opts.ctx\n        })=>{\n            try {\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                const middleware = _def.middlewares[callOpts.index];\n                const result = await middleware({\n                    ctx: callOpts.ctx,\n                    type: opts.type,\n                    path: opts.path,\n                    rawInput: callOpts.rawInput ?? opts.rawInput,\n                    meta: _def.meta,\n                    input: callOpts.input,\n                    next (_nextOpts) {\n                        const nextOpts = _nextOpts;\n                        return callRecursive({\n                            index: callOpts.index + 1,\n                            ctx: nextOpts && 'ctx' in nextOpts ? {\n                                ...callOpts.ctx,\n                                ...nextOpts.ctx\n                            } : callOpts.ctx,\n                            input: nextOpts && 'input' in nextOpts ? nextOpts.input : callOpts.input,\n                            rawInput: nextOpts && 'rawInput' in nextOpts ? nextOpts.rawInput : callOpts.rawInput\n                        });\n                    }\n                });\n                return result;\n            } catch (cause) {\n                return {\n                    ok: false,\n                    error: (0,_TRPCError_98d44758_mjs__WEBPACK_IMPORTED_MODULE_1__.g)(cause),\n                    marker: middlewareMarker\n                };\n            }\n        };\n        // there's always at least one \"next\" since we wrap this.resolver in a middleware\n        const result = await callRecursive();\n        if (!result) {\n            throw new _TRPCError_98d44758_mjs__WEBPACK_IMPORTED_MODULE_1__.T({\n                code: 'INTERNAL_SERVER_ERROR',\n                message: 'No result from middlewares - did you forget to `return next()`?'\n            });\n        }\n        if (!result.ok) {\n            // re-throw original error\n            throw result.error;\n        }\n        return result.data;\n    };\n    procedure._def = _def;\n    procedure.meta = _def.meta;\n    return procedure;\n}\n\nfunction migrateProcedure(oldProc, type) {\n    const def = oldProc._def();\n    const inputParser = getParseFnOrPassThrough(def.inputParser);\n    const outputParser = getParseFnOrPassThrough(def.outputParser);\n    const inputMiddleware = createInputMiddleware(inputParser);\n    const builder = createBuilder({\n        inputs: [\n            def.inputParser\n        ],\n        middlewares: [\n            ...def.middlewares,\n            inputMiddleware,\n            createOutputMiddleware(outputParser)\n        ],\n        meta: def.meta,\n        output: def.outputParser,\n        mutation: type === 'mutation',\n        query: type === 'query',\n        subscription: type === 'subscription'\n    });\n    const proc = builder[type]((opts)=>def.resolver(opts));\n    return proc;\n}\nfunction migrateRouter(oldRouter) {\n    const errorFormatter = oldRouter._def.errorFormatter;\n    const transformer = oldRouter._def.transformer;\n    const queries = {};\n    const mutations = {};\n    const subscriptions = {};\n    for (const [name, procedure] of Object.entries(oldRouter._def.queries)){\n        queries[name] = migrateProcedure(procedure, 'query');\n    }\n    for (const [name1, procedure1] of Object.entries(oldRouter._def.mutations)){\n        mutations[name1] = migrateProcedure(procedure1, 'mutation');\n    }\n    for (const [name2, procedure2] of Object.entries(oldRouter._def.subscriptions)){\n        subscriptions[name2] = migrateProcedure(procedure2, 'subscription');\n    }\n    const procedures = mergeWithoutOverrides(queries, mutations, subscriptions);\n    const newRouter = (0,_config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__.c)({\n        transformer,\n        errorFormatter,\n        isDev: \"development\" !== 'production'\n    })(procedures);\n    return newRouter;\n}\n\nfunction getDataTransformer(transformer) {\n    if ('input' in transformer) {\n        return transformer;\n    }\n    return {\n        input: transformer,\n        output: transformer\n    };\n}\nconst PROCEDURE_DEFINITION_MAP = {\n    query: 'queries',\n    mutation: 'mutations',\n    subscription: 'subscriptions'\n};\nfunction safeObject(...args) {\n    return Object.assign(Object.create(null), ...args);\n}\n/**\n * @internal The type signature of this class may change without warning.\n * @deprecated\n */ class Router {\n    static prefixProcedures(procedures, prefix) {\n        const eps = safeObject();\n        for (const [key, procedure] of Object.entries(procedures)){\n            eps[prefix + key] = procedure;\n        }\n        return eps;\n    }\n    query(path, procedure) {\n        const router = new Router({\n            queries: safeObject({\n                [path]: createProcedure(procedure)\n            })\n        });\n        return this.merge(router);\n    }\n    mutation(path, procedure) {\n        const router = new Router({\n            mutations: safeObject({\n                [path]: createProcedure(procedure)\n            })\n        });\n        return this.merge(router);\n    }\n    subscription(path, procedure) {\n        const router = new Router({\n            subscriptions: safeObject({\n                [path]: createProcedure(procedure)\n            })\n        });\n        return this.merge(router);\n    }\n    merge(prefixOrRouter, maybeRouter) {\n        let prefix = '';\n        let childRouter;\n        if (typeof prefixOrRouter === 'string' && maybeRouter instanceof Router) {\n            prefix = prefixOrRouter;\n            childRouter = maybeRouter;\n        } else if (prefixOrRouter instanceof Router) {\n            childRouter = prefixOrRouter;\n        } else {\n            throw new Error('Invalid args');\n        }\n        const duplicateQueries = Object.keys(childRouter._def.queries).filter((key)=>!!this._def.queries[prefix + key]);\n        const duplicateMutations = Object.keys(childRouter._def.mutations).filter((key)=>!!this._def.mutations[prefix + key]);\n        const duplicateSubscriptions = Object.keys(childRouter._def.subscriptions).filter((key)=>!!this._def.subscriptions[prefix + key]);\n        const duplicates = [\n            ...duplicateQueries,\n            ...duplicateMutations,\n            ...duplicateSubscriptions\n        ];\n        if (duplicates.length) {\n            throw new Error(`Duplicate endpoint(s): ${duplicates.join(', ')}`);\n        }\n        const mergeProcedures = (defs)=>{\n            const newDefs = safeObject();\n            for (const [key, procedure] of Object.entries(defs)){\n                const newProcedure = procedure.inheritMiddlewares(this._def.middlewares);\n                newDefs[key] = newProcedure;\n            }\n            return Router.prefixProcedures(newDefs, prefix);\n        };\n        return new Router({\n            ...this._def,\n            queries: safeObject(this._def.queries, mergeProcedures(childRouter._def.queries)),\n            mutations: safeObject(this._def.mutations, mergeProcedures(childRouter._def.mutations)),\n            subscriptions: safeObject(this._def.subscriptions, mergeProcedures(childRouter._def.subscriptions))\n        });\n    }\n    /**\n   * Invoke procedure. Only for internal use within library.\n   */ async call(opts) {\n        const { type , path  } = opts;\n        const defTarget = PROCEDURE_DEFINITION_MAP[type];\n        const defs = this._def[defTarget];\n        const procedure = defs[path];\n        if (!procedure) {\n            throw new _TRPCError_98d44758_mjs__WEBPACK_IMPORTED_MODULE_1__.T({\n                code: 'NOT_FOUND',\n                message: `No \"${type}\"-procedure on path \"${path}\"`\n            });\n        }\n        return procedure.call(opts);\n    }\n    createCaller(ctx) {\n        return {\n            query: (path, ...args)=>{\n                return this.call({\n                    type: 'query',\n                    ctx,\n                    path,\n                    rawInput: args[0]\n                });\n            },\n            mutation: (path, ...args)=>{\n                return this.call({\n                    type: 'mutation',\n                    ctx,\n                    path,\n                    rawInput: args[0]\n                });\n            },\n            subscription: (path, ...args)=>{\n                return this.call({\n                    type: 'subscription',\n                    ctx,\n                    path,\n                    rawInput: args[0]\n                });\n            }\n        };\n    }\n    /**\n   * Function to be called before any procedure is invoked\n   * @link https://trpc.io/docs/middlewares\n   */ middleware(middleware) {\n        return new Router({\n            ...this._def,\n            middlewares: [\n                ...this._def.middlewares,\n                middleware\n            ]\n        });\n    }\n    /**\n   * Format errors\n   * @link https://trpc.io/docs/error-formatting\n   */ formatError(errorFormatter) {\n        if (this._def.errorFormatter !== _config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__.d) {\n            throw new Error('You seem to have double `formatError()`-calls in your router tree');\n        }\n        return new Router({\n            ...this._def,\n            errorFormatter: errorFormatter\n        });\n    }\n    getErrorShape(opts) {\n        const { path , error  } = opts;\n        const { code  } = opts.error;\n        const shape = {\n            message: error.message,\n            code: _codes_c924c3db_mjs__WEBPACK_IMPORTED_MODULE_3__.T[code],\n            data: {\n                code,\n                httpStatus: (0,_index_f91d720c_mjs__WEBPACK_IMPORTED_MODULE_2__.g)(error)\n            }\n        };\n        if (globalThis.process?.env?.NODE_ENV !== 'production' && typeof opts.error.stack === 'string') {\n            shape.data.stack = opts.error.stack;\n        }\n        if (typeof path === 'string') {\n            shape.data.path = path;\n        }\n        return this._def.errorFormatter({\n            ...opts,\n            shape\n        });\n    }\n    /**\n   * Add data transformer to serialize/deserialize input args + output\n   * @link https://trpc.io/docs/data-transformers\n   */ transformer(_transformer) {\n        const transformer = getDataTransformer(_transformer);\n        if (this._def.transformer !== _config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__.a) {\n            throw new Error('You seem to have double `transformer()`-calls in your router tree');\n        }\n        return new Router({\n            ...this._def,\n            transformer\n        });\n    }\n    /**\n   * Flattens the generics of TQueries/TMutations/TSubscriptions.\n   * ⚠️ Experimental - might disappear. ⚠️\n   *\n   * @alpha\n   */ flat() {\n        return this;\n    }\n    /**\n   * Interop mode for v9.x -> v10.x\n   */ interop() {\n        return migrateRouter(this);\n    }\n    constructor(def){\n        this._def = {\n            queries: def?.queries ?? safeObject(),\n            mutations: def?.mutations ?? safeObject(),\n            subscriptions: def?.subscriptions ?? safeObject(),\n            middlewares: def?.middlewares ?? [],\n            errorFormatter: def?.errorFormatter ?? _config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__.d,\n            transformer: def?.transformer ?? _config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__.a\n        };\n    }\n}\n/**\n * @deprecated\n */ function router() {\n    return new Router();\n}\n\nfunction mergeRouters(...routerList) {\n    const record = mergeWithoutOverrides({}, ...routerList.map((r)=>r._def.record));\n    const errorFormatter = routerList.reduce((currentErrorFormatter, nextRouter)=>{\n        if (nextRouter._def._config.errorFormatter && nextRouter._def._config.errorFormatter !== _config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__.d) {\n            if (currentErrorFormatter !== _config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__.d && currentErrorFormatter !== nextRouter._def._config.errorFormatter) {\n                throw new Error('You seem to have several error formatters');\n            }\n            return nextRouter._def._config.errorFormatter;\n        }\n        return currentErrorFormatter;\n    }, _config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__.d);\n    const transformer = routerList.reduce((prev, current)=>{\n        if (current._def._config.transformer && current._def._config.transformer !== _config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__.a) {\n            if (prev !== _config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__.a && prev !== current._def._config.transformer) {\n                throw new Error('You seem to have several transformers');\n            }\n            return current._def._config.transformer;\n        }\n        return prev;\n    }, _config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__.a);\n    const router = (0,_config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__.c)({\n        errorFormatter,\n        transformer,\n        isDev: routerList.some((r)=>r._def._config.isDev),\n        allowOutsideOfServer: routerList.some((r)=>r._def._config.allowOutsideOfServer),\n        isServer: routerList.some((r)=>r._def._config.isServer),\n        $types: routerList[0]?._def._config.$types\n    })(record);\n    return router;\n}\n\n/**\n * TODO: This can be improved:\n * - We should be able to chain `.meta()`/`.context()` only once\n * - Simplify typings\n * - Doesn't need to be a class but it doesn't really hurt either\n */ class TRPCBuilder {\n    context() {\n        return new TRPCBuilder();\n    }\n    meta() {\n        return new TRPCBuilder();\n    }\n    create(options) {\n        return createTRPCInner()(options);\n    }\n}\n/**\n * Initialize tRPC - done exactly once per backend\n */ const initTRPC = new TRPCBuilder();\nfunction createTRPCInner() {\n    return function initTRPCInner(runtime) {\n        const errorFormatter = runtime?.errorFormatter ?? _config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__.d;\n        const transformer = (0,_config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__.g)(runtime?.transformer ?? _config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__.a);\n        const config = {\n            transformer,\n            isDev: runtime?.isDev ?? globalThis.process?.env?.NODE_ENV !== 'production',\n            allowOutsideOfServer: runtime?.allowOutsideOfServer ?? false,\n            errorFormatter,\n            isServer: runtime?.isServer ?? _config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__.i,\n            /**\n       * @internal\n       */ $types: (0,_index_f91d720c_mjs__WEBPACK_IMPORTED_MODULE_2__.c)((key)=>{\n                throw new Error(`Tried to access \"$types.${key}\" which is not available at runtime`);\n            })\n        };\n        {\n            // Server check\n            const isServer = runtime?.isServer ?? _config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__.i;\n            if (!isServer && runtime?.allowOutsideOfServer !== true) {\n                throw new Error(`You're trying to use @trpc/server in a non-server environment. This is not supported by default.`);\n            }\n        }\n        return {\n            /**\n       * These are just types, they can't be used\n       * @internal\n       */ _config: config,\n            /**\n       * Builder object for creating procedures\n       * @see https://trpc.io/docs/server/procedures\n       */ procedure: createBuilder({\n                meta: runtime?.defaultMeta\n            }),\n            /**\n       * Create reusable middlewares\n       * @see https://trpc.io/docs/server/middlewares\n       */ middleware: createMiddlewareFactory(),\n            /**\n       * Create a router\n       * @see https://trpc.io/docs/server/routers\n       */ router: (0,_config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__.c)(config),\n            /**\n       * Merge Routers\n       * @see https://trpc.io/docs/server/merging-routers\n       */ mergeRouters,\n            /**\n       * Create a server-side caller for a router\n       * @see https://trpc.io/docs/server/server-side-calls\n       */ createCallerFactory: (0,_config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__.b)()\n        };\n    };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzL0B0cnBjL3NlcnZlci9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUE0TDtBQUNoQztBQUNwRTtBQUNBO0FBQ0s7QUFDekI7QUFDeEI7O0FBRTVDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixzQkFBc0Isc0RBQVM7QUFDL0I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLHNCQUFzQixzREFBUztBQUMvQjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixNQUFNO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiwwREFBdUI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isc0RBQVM7QUFDL0I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHNEQUFTO0FBQy9CO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxJQUFJO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLDRCQUE0QjtBQUNqRTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Ysc0JBQXNCLHNEQUFTO0FBQy9CO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsT0FBTztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLHNCQUFzQixzREFBUztBQUMvQjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxZQUFZLDRDQUE0QztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLEtBQUs7QUFDTDtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsMkJBQTJCLDBEQUF1QjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixzREFBUztBQUMvQjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsdURBQW1CO0FBQ3pDO0FBQ0E7QUFDQSxlQUFlLGFBQW9CO0FBQ25DLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Qsc0JBQXNCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsZUFBZTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixzREFBUztBQUMvQjtBQUNBLGdDQUFnQyxLQUFLLHVCQUF1QixLQUFLO0FBQ2pFLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLG1EQUFnQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxnQkFBZ0IsZ0JBQWdCO0FBQ2hDLGdCQUFnQixRQUFRO0FBQ3hCO0FBQ0E7QUFDQSxrQkFBa0Isa0RBQXVCO0FBQ3pDO0FBQ0E7QUFDQSw0QkFBNEIsc0RBQTBCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLG1EQUFrQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsbURBQWdCO0FBQ25FLDZDQUE2QyxtREFBa0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDJDQUEyQztBQUMzQztBQUNBLGlHQUFpRyxtREFBZ0I7QUFDakgsMENBQTBDLG1EQUFnQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxFQUFFLG1EQUFnQjtBQUN2QjtBQUNBLHFGQUFxRixtREFBa0I7QUFDdkcseUJBQXlCLG1EQUFrQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxFQUFFLG1EQUFrQjtBQUN6QixtQkFBbUIsdURBQW1CO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxtREFBZ0I7QUFDMUUsNEJBQTRCLHVEQUFvQix5QkFBeUIsbURBQWtCO0FBQzNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsbURBQWU7QUFDMUQ7QUFDQTtBQUNBLGtCQUFrQixzREFBZTtBQUNqQywyREFBMkQsSUFBSTtBQUMvRCxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELG1EQUFlO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsdURBQW1CO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHVEQUFtQjtBQUNsRDtBQUNBO0FBQ0E7O0FBRThHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGJvaWxlcnBsYXRlL25leHRqcy8uLi8uLi9ub2RlX21vZHVsZXMvQHRycGMvc2VydmVyL2Rpc3QvaW5kZXgubWpzPzI0MWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYyBhcyBjcmVhdGVSb3V0ZXJGYWN0b3J5LCBkIGFzIGRlZmF1bHRGb3JtYXR0ZXIsIGEgYXMgZGVmYXVsdFRyYW5zZm9ybWVyLCBnIGFzIGdldERhdGFUcmFuc2Zvcm1lciQxLCBpIGFzIGlzU2VydmVyRGVmYXVsdCwgYiBhcyBjcmVhdGVDYWxsZXJGYWN0b3J5IH0gZnJvbSAnLi9jb25maWctZDVmZGJkMzkubWpzJztcbmV4cG9ydCB7IGUgYXMgY2FsbFByb2NlZHVyZSwgYiBhcyBjcmVhdGVDYWxsZXJGYWN0b3J5LCBhIGFzIGRlZmF1bHRUcmFuc2Zvcm1lciwgZyBhcyBnZXREYXRhVHJhbnNmb3JtZXIsIHAgYXMgcHJvY2VkdXJlVHlwZXMgfSBmcm9tICcuL2NvbmZpZy1kNWZkYmQzOS5tanMnO1xuaW1wb3J0IHsgVCBhcyBUUlBDRXJyb3IsIGcgYXMgZ2V0VFJQQ0Vycm9yRnJvbVVua25vd24gfSBmcm9tICcuL1RSUENFcnJvci05OGQ0NDc1OC5tanMnO1xuZXhwb3J0IHsgVCBhcyBUUlBDRXJyb3IsIGcgYXMgZ2V0VFJQQ0Vycm9yRnJvbVVua25vd24gfSBmcm9tICcuL1RSUENFcnJvci05OGQ0NDc1OC5tanMnO1xuaW1wb3J0IHsgZyBhcyBnZXRIVFRQU3RhdHVzQ29kZUZyb21FcnJvciwgYyBhcyBjcmVhdGVGbGF0UHJveHkgfSBmcm9tICcuL2luZGV4LWY5MWQ3MjBjLm1qcyc7XG5pbXBvcnQgeyBUIGFzIFRSUENfRVJST1JfQ09ERVNfQllfS0VZIH0gZnJvbSAnLi9jb2Rlcy1jOTI0YzNkYi5tanMnO1xuaW1wb3J0ICcuL2dldENhdXNlRnJvbVVua25vd24tMmQ2NjQxNGEubWpzJztcblxuLyoqXG4gKiBAZGVwcmVjYXRlZFxuICovIGNvbnN0IG1pZGRsZXdhcmVNYXJrZXIkMSA9ICdtaWRkbGV3YXJlTWFya2VyJztcblxuZnVuY3Rpb24gZ2V0UGFyc2VGbiQxKHByb2NlZHVyZVBhcnNlcikge1xuICAgIGNvbnN0IHBhcnNlciA9IHByb2NlZHVyZVBhcnNlcjtcbiAgICBpZiAodHlwZW9mIHBhcnNlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyBQcm9jZWR1cmVQYXJzZXJDdXN0b21WYWxpZGF0b3JFc3F1ZVxuICAgICAgICByZXR1cm4gcGFyc2VyO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHBhcnNlci5wYXJzZUFzeW5jID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIFByb2NlZHVyZVBhcnNlclpvZEVzcXVlXG4gICAgICAgIHJldHVybiBwYXJzZXIucGFyc2VBc3luYy5iaW5kKHBhcnNlcik7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcGFyc2VyLnBhcnNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIFByb2NlZHVyZVBhcnNlclpvZEVzcXVlXG4gICAgICAgIHJldHVybiBwYXJzZXIucGFyc2UuYmluZChwYXJzZXIpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHBhcnNlci52YWxpZGF0ZVN5bmMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgLy8gUHJvY2VkdXJlUGFyc2VyWXVwRXNxdWVcbiAgICAgICAgcmV0dXJuIHBhcnNlci52YWxpZGF0ZVN5bmMuYmluZChwYXJzZXIpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHBhcnNlci5jcmVhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgLy8gUHJvY2VkdXJlUGFyc2VyU3VwZXJzdHJ1Y3RFc3F1ZVxuICAgICAgICByZXR1cm4gcGFyc2VyLmNyZWF0ZS5iaW5kKHBhcnNlcik7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGZpbmQgYSB2YWxpZGF0b3IgZm4nKTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBAZGVwcmVjYXRlZFxuICovIGNsYXNzIFByb2NlZHVyZSB7XG4gICAgX2RlZigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1pZGRsZXdhcmVzOiB0aGlzLm1pZGRsZXdhcmVzLFxuICAgICAgICAgICAgcmVzb2x2ZXI6IHRoaXMucmVzb2x2ZXIsXG4gICAgICAgICAgICBpbnB1dFBhcnNlcjogdGhpcy5pbnB1dFBhcnNlcixcbiAgICAgICAgICAgIG91dHB1dFBhcnNlcjogdGhpcy5vdXRwdXRQYXJzZXIsXG4gICAgICAgICAgICBtZXRhOiB0aGlzLm1ldGFcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgcGFyc2VJbnB1dChyYXdJbnB1dCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucGFyc2VJbnB1dEZuKHJhd0lucHV0KTtcbiAgICAgICAgfSBjYXRjaCAoY2F1c2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgICAgICAgIGNvZGU6ICdCQURfUkVRVUVTVCcsXG4gICAgICAgICAgICAgICAgY2F1c2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHBhcnNlT3V0cHV0KHJhd091dHB1dCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucGFyc2VPdXRwdXRGbihyYXdPdXRwdXQpO1xuICAgICAgICB9IGNhdGNoIChjYXVzZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgICAgICAgICAgY2F1c2UsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ091dHB1dCB2YWxpZGF0aW9uIGZhaWxlZCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgKiBUcmlnZ2VyIG1pZGRsZXdhcmVzIGluIG9yZGVyLCBwYXJzZSByYXcgaW5wdXQsIGNhbGwgcmVzb2x2ZXIgJiBwYXJzZSByYXcgb3V0cHV0XG4gICAqIEBpbnRlcm5hbFxuICAgKi8gYXN5bmMgY2FsbChvcHRzKSB7XG4gICAgICAgIC8vIHdyYXAgdGhlIGFjdHVhbCByZXNvbHZlciBhbmQgdHJlYXQgYXMgdGhlIGxhc3QgXCJtaWRkbGV3YXJlXCJcbiAgICAgICAgY29uc3QgbWlkZGxld2FyZXNXaXRoUmVzb2x2ZXIgPSB0aGlzLm1pZGRsZXdhcmVzLmNvbmNhdChbXG4gICAgICAgICAgICBhc3luYyAoeyBjdHggIH0pPT57XG4gICAgICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBhd2FpdCB0aGlzLnBhcnNlSW5wdXQob3B0cy5yYXdJbnB1dCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmF3T3V0cHV0ID0gYXdhaXQgdGhpcy5yZXNvbHZlcih7XG4gICAgICAgICAgICAgICAgICAgIC4uLm9wdHMsXG4gICAgICAgICAgICAgICAgICAgIGN0eCxcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5wYXJzZU91dHB1dChyYXdPdXRwdXQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtlcjogbWlkZGxld2FyZU1hcmtlciQxLFxuICAgICAgICAgICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgY3R4XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSk7XG4gICAgICAgIC8vIHJ1biB0aGUgbWlkZGxld2FyZXMgcmVjdXJzaXZlbHkgd2l0aCB0aGUgcmVzb2x2ZXIgYXMgdGhlIGxhc3Qgb25lXG4gICAgICAgIGNvbnN0IGNhbGxSZWN1cnNpdmUgPSBhc3luYyAoY2FsbE9wdHMgPSB7XG4gICAgICAgICAgICBpbmRleDogMCxcbiAgICAgICAgICAgIGN0eDogb3B0cy5jdHhcbiAgICAgICAgfSk9PntcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtaWRkbGV3YXJlc1dpdGhSZXNvbHZlcltjYWxsT3B0cy5pbmRleF0oe1xuICAgICAgICAgICAgICAgICAgICBjdHg6IGNhbGxPcHRzLmN0eCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogb3B0cy50eXBlLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBvcHRzLnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHJhd0lucHV0OiBvcHRzLnJhd0lucHV0LFxuICAgICAgICAgICAgICAgICAgICBtZXRhOiB0aGlzLm1ldGEsXG4gICAgICAgICAgICAgICAgICAgIG5leHQ6IGFzeW5jIChuZXh0T3B0cyk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBjYWxsUmVjdXJzaXZlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogY2FsbE9wdHMuaW5kZXggKyAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eDogbmV4dE9wdHMgPyBuZXh0T3B0cy5jdHggOiBjYWxsT3B0cy5jdHhcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGNhdXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4OiBjYWxsT3B0cy5jdHgsXG4gICAgICAgICAgICAgICAgICAgIG9rOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGdldFRSUENFcnJvckZyb21Vbmtub3duKGNhdXNlKSxcbiAgICAgICAgICAgICAgICAgICAgbWFya2VyOiBtaWRkbGV3YXJlTWFya2VyJDFcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyB0aGVyZSdzIGFsd2F5cyBhdCBsZWFzdCBvbmUgXCJuZXh0XCIgc2luY2Ugd2Ugd3JhcCB0aGlzLnJlc29sdmVyIGluIGEgbWlkZGxld2FyZVxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjYWxsUmVjdXJzaXZlKCk7XG4gICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTm8gcmVzdWx0IGZyb20gbWlkZGxld2FyZXMgLSBkaWQgeW91IGZvcmdldCB0byBgcmV0dXJuIG5leHQoKWA/J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyZXN1bHQub2spIHtcbiAgICAgICAgICAgIC8vIHJlLXRocm93IG9yaWdpbmFsIGVycm9yXG4gICAgICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICogQ3JlYXRlIG5ldyBwcm9jZWR1cmUgd2l0aCBwYXNzZWQgbWlkZGxld2FyZXNcbiAgICogQHBhcmFtIG1pZGRsZXdhcmVzXG4gICAqLyBpbmhlcml0TWlkZGxld2FyZXMobWlkZGxld2FyZXMpIHtcbiAgICAgICAgY29uc3QgQ29uc3RydWN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IG5ldyBDb25zdHJ1Y3Rvcih7XG4gICAgICAgICAgICBtaWRkbGV3YXJlczogW1xuICAgICAgICAgICAgICAgIC4uLm1pZGRsZXdhcmVzLFxuICAgICAgICAgICAgICAgIC4uLnRoaXMubWlkZGxld2FyZXNcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICByZXNvbHZlcjogdGhpcy5yZXNvbHZlcixcbiAgICAgICAgICAgIGlucHV0UGFyc2VyOiB0aGlzLmlucHV0UGFyc2VyLFxuICAgICAgICAgICAgb3V0cHV0UGFyc2VyOiB0aGlzLm91dHB1dFBhcnNlcixcbiAgICAgICAgICAgIG1ldGE6IHRoaXMubWV0YVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihvcHRzKXtcbiAgICAgICAgdGhpcy5taWRkbGV3YXJlcyA9IG9wdHMubWlkZGxld2FyZXM7XG4gICAgICAgIHRoaXMucmVzb2x2ZXIgPSBvcHRzLnJlc29sdmVyO1xuICAgICAgICB0aGlzLmlucHV0UGFyc2VyID0gb3B0cy5pbnB1dFBhcnNlcjtcbiAgICAgICAgdGhpcy5wYXJzZUlucHV0Rm4gPSBnZXRQYXJzZUZuJDEodGhpcy5pbnB1dFBhcnNlcik7XG4gICAgICAgIHRoaXMub3V0cHV0UGFyc2VyID0gb3B0cy5vdXRwdXRQYXJzZXI7XG4gICAgICAgIHRoaXMucGFyc2VPdXRwdXRGbiA9IGdldFBhcnNlRm4kMSh0aGlzLm91dHB1dFBhcnNlcik7XG4gICAgICAgIHRoaXMubWV0YSA9IG9wdHMubWV0YTtcbiAgICB9XG59XG5mdW5jdGlvbiBjcmVhdGVQcm9jZWR1cmUob3B0cykge1xuICAgIGNvbnN0IGlucHV0UGFyc2VyID0gJ2lucHV0JyBpbiBvcHRzID8gb3B0cy5pbnB1dCA6IChpbnB1dCk9PntcbiAgICAgICAgaWYgKGlucHV0ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgICAgICAgIGNvZGU6ICdCQURfUkVRVUVTVCcsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ05vIGlucHV0IGV4cGVjdGVkJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIGNvbnN0IG91dHB1dFBhcnNlciA9ICdvdXRwdXQnIGluIG9wdHMgJiYgb3B0cy5vdXRwdXQgPyBvcHRzLm91dHB1dCA6IChvdXRwdXQpPT5vdXRwdXQ7XG4gICAgcmV0dXJuIG5ldyBQcm9jZWR1cmUoe1xuICAgICAgICBpbnB1dFBhcnNlcjogaW5wdXRQYXJzZXIsXG4gICAgICAgIHJlc29sdmVyOiBvcHRzLnJlc29sdmUsXG4gICAgICAgIG1pZGRsZXdhcmVzOiBbXSxcbiAgICAgICAgb3V0cHV0UGFyc2VyOiBvdXRwdXRQYXJzZXIsXG4gICAgICAgIG1ldGE6IG9wdHMubWV0YVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBnZXRQYXJzZUZuKHByb2NlZHVyZVBhcnNlcikge1xuICAgIGNvbnN0IHBhcnNlciA9IHByb2NlZHVyZVBhcnNlcjtcbiAgICBpZiAodHlwZW9mIHBhcnNlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyBQYXJzZXJDdXN0b21WYWxpZGF0b3JFc3F1ZVxuICAgICAgICByZXR1cm4gcGFyc2VyO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHBhcnNlci5wYXJzZUFzeW5jID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIFBhcnNlclpvZEVzcXVlXG4gICAgICAgIHJldHVybiBwYXJzZXIucGFyc2VBc3luYy5iaW5kKHBhcnNlcik7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcGFyc2VyLnBhcnNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIFBhcnNlclpvZEVzcXVlXG4gICAgICAgIC8vIFBhcnNlclZhbGlib3RFc3F1ZSAoPD0gdjAuMTIuWClcbiAgICAgICAgcmV0dXJuIHBhcnNlci5wYXJzZS5iaW5kKHBhcnNlcik7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcGFyc2VyLnZhbGlkYXRlU3luYyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyBQYXJzZXJZdXBFc3F1ZVxuICAgICAgICByZXR1cm4gcGFyc2VyLnZhbGlkYXRlU3luYy5iaW5kKHBhcnNlcik7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcGFyc2VyLmNyZWF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyBQYXJzZXJTdXBlcnN0cnVjdEVzcXVlXG4gICAgICAgIHJldHVybiBwYXJzZXIuY3JlYXRlLmJpbmQocGFyc2VyKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwYXJzZXIuYXNzZXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIFBhcnNlclNjYWxlRXNxdWVcbiAgICAgICAgcmV0dXJuICh2YWx1ZSk9PntcbiAgICAgICAgICAgIHBhcnNlci5hc3NlcnQodmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9O1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBmaW5kIGEgdmFsaWRhdG9yIGZuJyk7XG59XG4vKipcbiAqIEBkZXByZWNhdGVkIG9ubHkgZm9yIGJhY2t3YXJkcyBjb21wYXRcbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIGdldFBhcnNlRm5PclBhc3NUaHJvdWdoKHByb2NlZHVyZVBhcnNlcikge1xuICAgIGlmICghcHJvY2VkdXJlUGFyc2VyKSB7XG4gICAgICAgIHJldHVybiAodik9PnY7XG4gICAgfVxuICAgIHJldHVybiBnZXRQYXJzZUZuKHByb2NlZHVyZVBhcnNlcik7XG59XG5cbi8qKlxuICogRW5zdXJlcyB0aGVyZSBhcmUgbm8gZHVwbGljYXRlIGtleXMgd2hlbiBidWlsZGluZyBhIHByb2NlZHVyZS5cbiAqLyBmdW5jdGlvbiBtZXJnZVdpdGhvdXRPdmVycmlkZXMob2JqMSwgLi4ub2Jqcykge1xuICAgIGNvbnN0IG5ld09iaiA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShudWxsKSwgb2JqMSk7XG4gICAgZm9yIChjb25zdCBvdmVycmlkZXMgb2Ygb2Jqcyl7XG4gICAgICAgIGZvcihjb25zdCBrZXkgaW4gb3ZlcnJpZGVzKXtcbiAgICAgICAgICAgIGlmIChrZXkgaW4gbmV3T2JqICYmIG5ld09ialtrZXldICE9PSBvdmVycmlkZXNba2V5XSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRHVwbGljYXRlIGtleSAke2tleX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ld09ialtrZXldID0gb3ZlcnJpZGVzW2tleV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ld09iajtcbn1cblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBjcmVhdGVNaWRkbGV3YXJlRmFjdG9yeSgpIHtcbiAgICBmdW5jdGlvbiBjcmVhdGVNaWRkbGV3YXJlSW5uZXIobWlkZGxld2FyZXMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIF9taWRkbGV3YXJlczogbWlkZGxld2FyZXMsXG4gICAgICAgICAgICB1bnN0YWJsZV9waXBlIChtaWRkbGV3YXJlQnVpbGRlck9yRm4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwaXBlZE1pZGRsZXdhcmUgPSAnX21pZGRsZXdhcmVzJyBpbiBtaWRkbGV3YXJlQnVpbGRlck9yRm4gPyBtaWRkbGV3YXJlQnVpbGRlck9yRm4uX21pZGRsZXdhcmVzIDogW1xuICAgICAgICAgICAgICAgICAgICBtaWRkbGV3YXJlQnVpbGRlck9yRm5cbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVNaWRkbGV3YXJlSW5uZXIoW1xuICAgICAgICAgICAgICAgICAgICAuLi5taWRkbGV3YXJlcyxcbiAgICAgICAgICAgICAgICAgICAgLi4ucGlwZWRNaWRkbGV3YXJlXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZU1pZGRsZXdhcmUoZm4pIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZU1pZGRsZXdhcmVJbm5lcihbXG4gICAgICAgICAgICBmblxuICAgICAgICBdKTtcbiAgICB9XG4gICAgcmV0dXJuIGNyZWF0ZU1pZGRsZXdhcmU7XG59XG5jb25zdCBleHBlcmltZW50YWxfc3RhbmRhbG9uZU1pZGRsZXdhcmUgPSAoKT0+KHtcbiAgICAgICAgY3JlYXRlOiBjcmVhdGVNaWRkbGV3YXJlRmFjdG9yeSgpXG4gICAgfSk7XG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KG9iaikge1xuICAgIHJldHVybiBvYmogJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkob2JqKTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBQbGVhc2Ugbm90ZSwgYHRycGMtb3BlbmFwaWAgdXNlcyB0aGlzIGZ1bmN0aW9uLlxuICovIGZ1bmN0aW9uIGNyZWF0ZUlucHV0TWlkZGxld2FyZShwYXJzZSkge1xuICAgIGNvbnN0IGlucHV0TWlkZGxld2FyZSA9IGFzeW5jICh7IG5leHQgLCByYXdJbnB1dCAsIGlucHV0ICwgIH0pPT57XG4gICAgICAgIGxldCBwYXJzZWRJbnB1dDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHBhcnNlZElucHV0ID0gYXdhaXQgcGFyc2UocmF3SW5wdXQpO1xuICAgICAgICB9IGNhdGNoIChjYXVzZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgICAgICAgY29kZTogJ0JBRF9SRVFVRVNUJyxcbiAgICAgICAgICAgICAgICBjYXVzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTXVsdGlwbGUgaW5wdXQgcGFyc2Vyc1xuICAgICAgICBjb25zdCBjb21iaW5lZElucHV0ID0gaXNQbGFpbk9iamVjdChpbnB1dCkgJiYgaXNQbGFpbk9iamVjdChwYXJzZWRJbnB1dCkgPyB7XG4gICAgICAgICAgICAuLi5pbnB1dCxcbiAgICAgICAgICAgIC4uLnBhcnNlZElucHV0XG4gICAgICAgIH0gOiBwYXJzZWRJbnB1dDtcbiAgICAgICAgLy8gVE9ETyBmaXggdGhpcyB0eXBpbmc/XG4gICAgICAgIHJldHVybiBuZXh0KHtcbiAgICAgICAgICAgIGlucHV0OiBjb21iaW5lZElucHV0XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgaW5wdXRNaWRkbGV3YXJlLl90eXBlID0gJ2lucHV0JztcbiAgICByZXR1cm4gaW5wdXRNaWRkbGV3YXJlO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBjcmVhdGVPdXRwdXRNaWRkbGV3YXJlKHBhcnNlKSB7XG4gICAgY29uc3Qgb3V0cHV0TWlkZGxld2FyZSA9IGFzeW5jICh7IG5leHQgIH0pPT57XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG5leHQoKTtcbiAgICAgICAgaWYgKCFyZXN1bHQub2spIHtcbiAgICAgICAgICAgIC8vIHBhc3MgdGhyb3VnaCBmYWlsdXJlcyB3aXRob3V0IHZhbGlkYXRpbmdcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBwYXJzZShyZXN1bHQuZGF0YSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLnJlc3VsdCxcbiAgICAgICAgICAgICAgICBkYXRhXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChjYXVzZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ091dHB1dCB2YWxpZGF0aW9uIGZhaWxlZCcsXG4gICAgICAgICAgICAgICAgY29kZTogJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gICAgICAgICAgICAgICAgY2F1c2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBvdXRwdXRNaWRkbGV3YXJlLl90eXBlID0gJ291dHB1dCc7XG4gICAgcmV0dXJuIG91dHB1dE1pZGRsZXdhcmU7XG59XG5cbi8qKlxuICogQGludGVybmFsXG4gKi8gY29uc3QgbWlkZGxld2FyZU1hcmtlciA9ICdtaWRkbGV3YXJlTWFya2VyJztcblxuZnVuY3Rpb24gY3JlYXRlTmV3QnVpbGRlcihkZWYxLCBkZWYyKSB7XG4gICAgY29uc3QgeyBtaWRkbGV3YXJlcyA9W10gLCBpbnB1dHMgLCBtZXRhICwgLi4ucmVzdCB9ID0gZGVmMjtcbiAgICAvLyBUT0RPOiBtYXliZSBoYXZlIGEgZm4gaGVyZSB0byB3YXJuIGFib3V0IGNhbGxzXG4gICAgcmV0dXJuIGNyZWF0ZUJ1aWxkZXIoe1xuICAgICAgICAuLi5tZXJnZVdpdGhvdXRPdmVycmlkZXMoZGVmMSwgcmVzdCksXG4gICAgICAgIGlucHV0czogW1xuICAgICAgICAgICAgLi4uZGVmMS5pbnB1dHMsXG4gICAgICAgICAgICAuLi5pbnB1dHMgPz8gW11cbiAgICAgICAgXSxcbiAgICAgICAgbWlkZGxld2FyZXM6IFtcbiAgICAgICAgICAgIC4uLmRlZjEubWlkZGxld2FyZXMsXG4gICAgICAgICAgICAuLi5taWRkbGV3YXJlc1xuICAgICAgICBdLFxuICAgICAgICBtZXRhOiBkZWYxLm1ldGEgJiYgbWV0YSA/IHtcbiAgICAgICAgICAgIC4uLmRlZjEubWV0YSxcbiAgICAgICAgICAgIC4uLm1ldGFcbiAgICAgICAgfSA6IG1ldGEgPz8gZGVmMS5tZXRhXG4gICAgfSk7XG59XG5mdW5jdGlvbiBjcmVhdGVCdWlsZGVyKGluaXREZWYgPSB7fSkge1xuICAgIGNvbnN0IF9kZWYgPSB7XG4gICAgICAgIGlucHV0czogW10sXG4gICAgICAgIG1pZGRsZXdhcmVzOiBbXSxcbiAgICAgICAgLi4uaW5pdERlZlxuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgX2RlZixcbiAgICAgICAgaW5wdXQgKGlucHV0KSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZXIgPSBnZXRQYXJzZUZuKGlucHV0KTtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVOZXdCdWlsZGVyKF9kZWYsIHtcbiAgICAgICAgICAgICAgICBpbnB1dHM6IFtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIG1pZGRsZXdhcmVzOiBbXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUlucHV0TWlkZGxld2FyZShwYXJzZXIpXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIG91dHB1dCAob3V0cHV0KSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZU91dHB1dCA9IGdldFBhcnNlRm4ob3V0cHV0KTtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVOZXdCdWlsZGVyKF9kZWYsIHtcbiAgICAgICAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgICAgICAgbWlkZGxld2FyZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlT3V0cHV0TWlkZGxld2FyZShwYXJzZU91dHB1dClcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgbWV0YSAobWV0YSkge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU5ld0J1aWxkZXIoX2RlZiwge1xuICAgICAgICAgICAgICAgIG1ldGE6IG1ldGFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqIFRoaXMgZnVuY3Rpb25hbGl0eSBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgdmVyc2lvbi5cbiAgICAgKi8gdW5zdGFibGVfY29uY2F0IChidWlsZGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlTmV3QnVpbGRlcihfZGVmLCBidWlsZGVyLl9kZWYpO1xuICAgICAgICB9LFxuICAgICAgICB1c2UgKG1pZGRsZXdhcmVCdWlsZGVyT3JGbikge1xuICAgICAgICAgICAgLy8gRGlzdGluZ3Vpc2ggYmV0d2VlbiBhIG1pZGRsZXdhcmUgYnVpbGRlciBhbmQgYSBtaWRkbGV3YXJlIGZ1bmN0aW9uXG4gICAgICAgICAgICBjb25zdCBtaWRkbGV3YXJlcyA9ICdfbWlkZGxld2FyZXMnIGluIG1pZGRsZXdhcmVCdWlsZGVyT3JGbiA/IG1pZGRsZXdhcmVCdWlsZGVyT3JGbi5fbWlkZGxld2FyZXMgOiBbXG4gICAgICAgICAgICAgICAgbWlkZGxld2FyZUJ1aWxkZXJPckZuXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU5ld0J1aWxkZXIoX2RlZiwge1xuICAgICAgICAgICAgICAgIG1pZGRsZXdhcmVzOiBtaWRkbGV3YXJlc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHF1ZXJ5IChyZXNvbHZlcikge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVJlc29sdmVyKHtcbiAgICAgICAgICAgICAgICAuLi5fZGVmLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiB0cnVlXG4gICAgICAgICAgICB9LCByZXNvbHZlcik7XG4gICAgICAgIH0sXG4gICAgICAgIG11dGF0aW9uIChyZXNvbHZlcikge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVJlc29sdmVyKHtcbiAgICAgICAgICAgICAgICAuLi5fZGVmLFxuICAgICAgICAgICAgICAgIG11dGF0aW9uOiB0cnVlXG4gICAgICAgICAgICB9LCByZXNvbHZlcik7XG4gICAgICAgIH0sXG4gICAgICAgIHN1YnNjcmlwdGlvbiAocmVzb2x2ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVSZXNvbHZlcih7XG4gICAgICAgICAgICAgICAgLi4uX2RlZixcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb246IHRydWVcbiAgICAgICAgICAgIH0sIHJlc29sdmVyKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5mdW5jdGlvbiBjcmVhdGVSZXNvbHZlcihfZGVmLCByZXNvbHZlcikge1xuICAgIGNvbnN0IGZpbmFsQnVpbGRlciA9IGNyZWF0ZU5ld0J1aWxkZXIoX2RlZiwge1xuICAgICAgICByZXNvbHZlcixcbiAgICAgICAgbWlkZGxld2FyZXM6IFtcbiAgICAgICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJlc29sdmVNaWRkbGV3YXJlKG9wdHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzb2x2ZXIob3B0cyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbWFya2VyOiBtaWRkbGV3YXJlTWFya2VyLFxuICAgICAgICAgICAgICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgY3R4OiBvcHRzLmN0eFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICB9KTtcbiAgICByZXR1cm4gY3JlYXRlUHJvY2VkdXJlQ2FsbGVyKGZpbmFsQnVpbGRlci5fZGVmKTtcbn1cbmNvbnN0IGNvZGVibG9jayA9IGBcblRoaXMgaXMgYSBjbGllbnQtb25seSBmdW5jdGlvbi5cbklmIHlvdSB3YW50IHRvIGNhbGwgdGhpcyBmdW5jdGlvbiBvbiB0aGUgc2VydmVyLCBzZWUgaHR0cHM6Ly90cnBjLmlvL2RvY3Mvc2VydmVyL3NlcnZlci1zaWRlLWNhbGxzXG5gLnRyaW0oKTtcbmZ1bmN0aW9uIGNyZWF0ZVByb2NlZHVyZUNhbGxlcihfZGVmKSB7XG4gICAgY29uc3QgcHJvY2VkdXJlID0gYXN5bmMgZnVuY3Rpb24gcmVzb2x2ZShvcHRzKSB7XG4gICAgICAgIC8vIGlzIGRpcmVjdCBzZXJ2ZXItc2lkZSBjYWxsXG4gICAgICAgIGlmICghb3B0cyB8fCAhKCdyYXdJbnB1dCcgaW4gb3B0cykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihjb2RlYmxvY2spO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJ1biB0aGUgbWlkZGxld2FyZXMgcmVjdXJzaXZlbHkgd2l0aCB0aGUgcmVzb2x2ZXIgYXMgdGhlIGxhc3Qgb25lXG4gICAgICAgIGNvbnN0IGNhbGxSZWN1cnNpdmUgPSBhc3luYyAoY2FsbE9wdHMgPSB7XG4gICAgICAgICAgICBpbmRleDogMCxcbiAgICAgICAgICAgIGN0eDogb3B0cy5jdHhcbiAgICAgICAgfSk9PntcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgICAgICBjb25zdCBtaWRkbGV3YXJlID0gX2RlZi5taWRkbGV3YXJlc1tjYWxsT3B0cy5pbmRleF07XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbWlkZGxld2FyZSh7XG4gICAgICAgICAgICAgICAgICAgIGN0eDogY2FsbE9wdHMuY3R4LFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBvcHRzLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IG9wdHMucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcmF3SW5wdXQ6IGNhbGxPcHRzLnJhd0lucHV0ID8/IG9wdHMucmF3SW5wdXQsXG4gICAgICAgICAgICAgICAgICAgIG1ldGE6IF9kZWYubWV0YSxcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IGNhbGxPcHRzLmlucHV0LFxuICAgICAgICAgICAgICAgICAgICBuZXh0IChfbmV4dE9wdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRPcHRzID0gX25leHRPcHRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxSZWN1cnNpdmUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBjYWxsT3B0cy5pbmRleCArIDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4OiBuZXh0T3B0cyAmJiAnY3R4JyBpbiBuZXh0T3B0cyA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY2FsbE9wdHMuY3R4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5uZXh0T3B0cy5jdHhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogY2FsbE9wdHMuY3R4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiBuZXh0T3B0cyAmJiAnaW5wdXQnIGluIG5leHRPcHRzID8gbmV4dE9wdHMuaW5wdXQgOiBjYWxsT3B0cy5pbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXdJbnB1dDogbmV4dE9wdHMgJiYgJ3Jhd0lucHV0JyBpbiBuZXh0T3B0cyA/IG5leHRPcHRzLnJhd0lucHV0IDogY2FsbE9wdHMucmF3SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGNhdXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgb2s6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZ2V0VFJQQ0Vycm9yRnJvbVVua25vd24oY2F1c2UpLFxuICAgICAgICAgICAgICAgICAgICBtYXJrZXI6IG1pZGRsZXdhcmVNYXJrZXJcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyB0aGVyZSdzIGFsd2F5cyBhdCBsZWFzdCBvbmUgXCJuZXh0XCIgc2luY2Ugd2Ugd3JhcCB0aGlzLnJlc29sdmVyIGluIGEgbWlkZGxld2FyZVxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjYWxsUmVjdXJzaXZlKCk7XG4gICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICAgICAgICBjb2RlOiAnSU5URVJOQUxfU0VSVkVSX0VSUk9SJyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTm8gcmVzdWx0IGZyb20gbWlkZGxld2FyZXMgLSBkaWQgeW91IGZvcmdldCB0byBgcmV0dXJuIG5leHQoKWA/J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyZXN1bHQub2spIHtcbiAgICAgICAgICAgIC8vIHJlLXRocm93IG9yaWdpbmFsIGVycm9yXG4gICAgICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgIH07XG4gICAgcHJvY2VkdXJlLl9kZWYgPSBfZGVmO1xuICAgIHByb2NlZHVyZS5tZXRhID0gX2RlZi5tZXRhO1xuICAgIHJldHVybiBwcm9jZWR1cmU7XG59XG5cbmZ1bmN0aW9uIG1pZ3JhdGVQcm9jZWR1cmUob2xkUHJvYywgdHlwZSkge1xuICAgIGNvbnN0IGRlZiA9IG9sZFByb2MuX2RlZigpO1xuICAgIGNvbnN0IGlucHV0UGFyc2VyID0gZ2V0UGFyc2VGbk9yUGFzc1Rocm91Z2goZGVmLmlucHV0UGFyc2VyKTtcbiAgICBjb25zdCBvdXRwdXRQYXJzZXIgPSBnZXRQYXJzZUZuT3JQYXNzVGhyb3VnaChkZWYub3V0cHV0UGFyc2VyKTtcbiAgICBjb25zdCBpbnB1dE1pZGRsZXdhcmUgPSBjcmVhdGVJbnB1dE1pZGRsZXdhcmUoaW5wdXRQYXJzZXIpO1xuICAgIGNvbnN0IGJ1aWxkZXIgPSBjcmVhdGVCdWlsZGVyKHtcbiAgICAgICAgaW5wdXRzOiBbXG4gICAgICAgICAgICBkZWYuaW5wdXRQYXJzZXJcbiAgICAgICAgXSxcbiAgICAgICAgbWlkZGxld2FyZXM6IFtcbiAgICAgICAgICAgIC4uLmRlZi5taWRkbGV3YXJlcyxcbiAgICAgICAgICAgIGlucHV0TWlkZGxld2FyZSxcbiAgICAgICAgICAgIGNyZWF0ZU91dHB1dE1pZGRsZXdhcmUob3V0cHV0UGFyc2VyKVxuICAgICAgICBdLFxuICAgICAgICBtZXRhOiBkZWYubWV0YSxcbiAgICAgICAgb3V0cHV0OiBkZWYub3V0cHV0UGFyc2VyLFxuICAgICAgICBtdXRhdGlvbjogdHlwZSA9PT0gJ211dGF0aW9uJyxcbiAgICAgICAgcXVlcnk6IHR5cGUgPT09ICdxdWVyeScsXG4gICAgICAgIHN1YnNjcmlwdGlvbjogdHlwZSA9PT0gJ3N1YnNjcmlwdGlvbidcbiAgICB9KTtcbiAgICBjb25zdCBwcm9jID0gYnVpbGRlclt0eXBlXSgob3B0cyk9PmRlZi5yZXNvbHZlcihvcHRzKSk7XG4gICAgcmV0dXJuIHByb2M7XG59XG5mdW5jdGlvbiBtaWdyYXRlUm91dGVyKG9sZFJvdXRlcikge1xuICAgIGNvbnN0IGVycm9yRm9ybWF0dGVyID0gb2xkUm91dGVyLl9kZWYuZXJyb3JGb3JtYXR0ZXI7XG4gICAgY29uc3QgdHJhbnNmb3JtZXIgPSBvbGRSb3V0ZXIuX2RlZi50cmFuc2Zvcm1lcjtcbiAgICBjb25zdCBxdWVyaWVzID0ge307XG4gICAgY29uc3QgbXV0YXRpb25zID0ge307XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9ucyA9IHt9O1xuICAgIGZvciAoY29uc3QgW25hbWUsIHByb2NlZHVyZV0gb2YgT2JqZWN0LmVudHJpZXMob2xkUm91dGVyLl9kZWYucXVlcmllcykpe1xuICAgICAgICBxdWVyaWVzW25hbWVdID0gbWlncmF0ZVByb2NlZHVyZShwcm9jZWR1cmUsICdxdWVyeScpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtuYW1lMSwgcHJvY2VkdXJlMV0gb2YgT2JqZWN0LmVudHJpZXMob2xkUm91dGVyLl9kZWYubXV0YXRpb25zKSl7XG4gICAgICAgIG11dGF0aW9uc1tuYW1lMV0gPSBtaWdyYXRlUHJvY2VkdXJlKHByb2NlZHVyZTEsICdtdXRhdGlvbicpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtuYW1lMiwgcHJvY2VkdXJlMl0gb2YgT2JqZWN0LmVudHJpZXMob2xkUm91dGVyLl9kZWYuc3Vic2NyaXB0aW9ucykpe1xuICAgICAgICBzdWJzY3JpcHRpb25zW25hbWUyXSA9IG1pZ3JhdGVQcm9jZWR1cmUocHJvY2VkdXJlMiwgJ3N1YnNjcmlwdGlvbicpO1xuICAgIH1cbiAgICBjb25zdCBwcm9jZWR1cmVzID0gbWVyZ2VXaXRob3V0T3ZlcnJpZGVzKHF1ZXJpZXMsIG11dGF0aW9ucywgc3Vic2NyaXB0aW9ucyk7XG4gICAgY29uc3QgbmV3Um91dGVyID0gY3JlYXRlUm91dGVyRmFjdG9yeSh7XG4gICAgICAgIHRyYW5zZm9ybWVyLFxuICAgICAgICBlcnJvckZvcm1hdHRlcixcbiAgICAgICAgaXNEZXY6IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbidcbiAgICB9KShwcm9jZWR1cmVzKTtcbiAgICByZXR1cm4gbmV3Um91dGVyO1xufVxuXG5mdW5jdGlvbiBnZXREYXRhVHJhbnNmb3JtZXIodHJhbnNmb3JtZXIpIHtcbiAgICBpZiAoJ2lucHV0JyBpbiB0cmFuc2Zvcm1lcikge1xuICAgICAgICByZXR1cm4gdHJhbnNmb3JtZXI7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGlucHV0OiB0cmFuc2Zvcm1lcixcbiAgICAgICAgb3V0cHV0OiB0cmFuc2Zvcm1lclxuICAgIH07XG59XG5jb25zdCBQUk9DRURVUkVfREVGSU5JVElPTl9NQVAgPSB7XG4gICAgcXVlcnk6ICdxdWVyaWVzJyxcbiAgICBtdXRhdGlvbjogJ211dGF0aW9ucycsXG4gICAgc3Vic2NyaXB0aW9uOiAnc3Vic2NyaXB0aW9ucydcbn07XG5mdW5jdGlvbiBzYWZlT2JqZWN0KC4uLmFyZ3MpIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCAuLi5hcmdzKTtcbn1cbi8qKlxuICogQGludGVybmFsIFRoZSB0eXBlIHNpZ25hdHVyZSBvZiB0aGlzIGNsYXNzIG1heSBjaGFuZ2Ugd2l0aG91dCB3YXJuaW5nLlxuICogQGRlcHJlY2F0ZWRcbiAqLyBjbGFzcyBSb3V0ZXIge1xuICAgIHN0YXRpYyBwcmVmaXhQcm9jZWR1cmVzKHByb2NlZHVyZXMsIHByZWZpeCkge1xuICAgICAgICBjb25zdCBlcHMgPSBzYWZlT2JqZWN0KCk7XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgcHJvY2VkdXJlXSBvZiBPYmplY3QuZW50cmllcyhwcm9jZWR1cmVzKSl7XG4gICAgICAgICAgICBlcHNbcHJlZml4ICsga2V5XSA9IHByb2NlZHVyZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXBzO1xuICAgIH1cbiAgICBxdWVyeShwYXRoLCBwcm9jZWR1cmUpIHtcbiAgICAgICAgY29uc3Qgcm91dGVyID0gbmV3IFJvdXRlcih7XG4gICAgICAgICAgICBxdWVyaWVzOiBzYWZlT2JqZWN0KHtcbiAgICAgICAgICAgICAgICBbcGF0aF06IGNyZWF0ZVByb2NlZHVyZShwcm9jZWR1cmUpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVyZ2Uocm91dGVyKTtcbiAgICB9XG4gICAgbXV0YXRpb24ocGF0aCwgcHJvY2VkdXJlKSB7XG4gICAgICAgIGNvbnN0IHJvdXRlciA9IG5ldyBSb3V0ZXIoe1xuICAgICAgICAgICAgbXV0YXRpb25zOiBzYWZlT2JqZWN0KHtcbiAgICAgICAgICAgICAgICBbcGF0aF06IGNyZWF0ZVByb2NlZHVyZShwcm9jZWR1cmUpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVyZ2Uocm91dGVyKTtcbiAgICB9XG4gICAgc3Vic2NyaXB0aW9uKHBhdGgsIHByb2NlZHVyZSkge1xuICAgICAgICBjb25zdCByb3V0ZXIgPSBuZXcgUm91dGVyKHtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbnM6IHNhZmVPYmplY3Qoe1xuICAgICAgICAgICAgICAgIFtwYXRoXTogY3JlYXRlUHJvY2VkdXJlKHByb2NlZHVyZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5tZXJnZShyb3V0ZXIpO1xuICAgIH1cbiAgICBtZXJnZShwcmVmaXhPclJvdXRlciwgbWF5YmVSb3V0ZXIpIHtcbiAgICAgICAgbGV0IHByZWZpeCA9ICcnO1xuICAgICAgICBsZXQgY2hpbGRSb3V0ZXI7XG4gICAgICAgIGlmICh0eXBlb2YgcHJlZml4T3JSb3V0ZXIgPT09ICdzdHJpbmcnICYmIG1heWJlUm91dGVyIGluc3RhbmNlb2YgUm91dGVyKSB7XG4gICAgICAgICAgICBwcmVmaXggPSBwcmVmaXhPclJvdXRlcjtcbiAgICAgICAgICAgIGNoaWxkUm91dGVyID0gbWF5YmVSb3V0ZXI7XG4gICAgICAgIH0gZWxzZSBpZiAocHJlZml4T3JSb3V0ZXIgaW5zdGFuY2VvZiBSb3V0ZXIpIHtcbiAgICAgICAgICAgIGNoaWxkUm91dGVyID0gcHJlZml4T3JSb3V0ZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXJncycpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGR1cGxpY2F0ZVF1ZXJpZXMgPSBPYmplY3Qua2V5cyhjaGlsZFJvdXRlci5fZGVmLnF1ZXJpZXMpLmZpbHRlcigoa2V5KT0+ISF0aGlzLl9kZWYucXVlcmllc1twcmVmaXggKyBrZXldKTtcbiAgICAgICAgY29uc3QgZHVwbGljYXRlTXV0YXRpb25zID0gT2JqZWN0LmtleXMoY2hpbGRSb3V0ZXIuX2RlZi5tdXRhdGlvbnMpLmZpbHRlcigoa2V5KT0+ISF0aGlzLl9kZWYubXV0YXRpb25zW3ByZWZpeCArIGtleV0pO1xuICAgICAgICBjb25zdCBkdXBsaWNhdGVTdWJzY3JpcHRpb25zID0gT2JqZWN0LmtleXMoY2hpbGRSb3V0ZXIuX2RlZi5zdWJzY3JpcHRpb25zKS5maWx0ZXIoKGtleSk9PiEhdGhpcy5fZGVmLnN1YnNjcmlwdGlvbnNbcHJlZml4ICsga2V5XSk7XG4gICAgICAgIGNvbnN0IGR1cGxpY2F0ZXMgPSBbXG4gICAgICAgICAgICAuLi5kdXBsaWNhdGVRdWVyaWVzLFxuICAgICAgICAgICAgLi4uZHVwbGljYXRlTXV0YXRpb25zLFxuICAgICAgICAgICAgLi4uZHVwbGljYXRlU3Vic2NyaXB0aW9uc1xuICAgICAgICBdO1xuICAgICAgICBpZiAoZHVwbGljYXRlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRHVwbGljYXRlIGVuZHBvaW50KHMpOiAke2R1cGxpY2F0ZXMuam9pbignLCAnKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtZXJnZVByb2NlZHVyZXMgPSAoZGVmcyk9PntcbiAgICAgICAgICAgIGNvbnN0IG5ld0RlZnMgPSBzYWZlT2JqZWN0KCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHByb2NlZHVyZV0gb2YgT2JqZWN0LmVudHJpZXMoZGVmcykpe1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1Byb2NlZHVyZSA9IHByb2NlZHVyZS5pbmhlcml0TWlkZGxld2FyZXModGhpcy5fZGVmLm1pZGRsZXdhcmVzKTtcbiAgICAgICAgICAgICAgICBuZXdEZWZzW2tleV0gPSBuZXdQcm9jZWR1cmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUm91dGVyLnByZWZpeFByb2NlZHVyZXMobmV3RGVmcywgcHJlZml4KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIG5ldyBSb3V0ZXIoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgcXVlcmllczogc2FmZU9iamVjdCh0aGlzLl9kZWYucXVlcmllcywgbWVyZ2VQcm9jZWR1cmVzKGNoaWxkUm91dGVyLl9kZWYucXVlcmllcykpLFxuICAgICAgICAgICAgbXV0YXRpb25zOiBzYWZlT2JqZWN0KHRoaXMuX2RlZi5tdXRhdGlvbnMsIG1lcmdlUHJvY2VkdXJlcyhjaGlsZFJvdXRlci5fZGVmLm11dGF0aW9ucykpLFxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uczogc2FmZU9iamVjdCh0aGlzLl9kZWYuc3Vic2NyaXB0aW9ucywgbWVyZ2VQcm9jZWR1cmVzKGNoaWxkUm91dGVyLl9kZWYuc3Vic2NyaXB0aW9ucykpXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICogSW52b2tlIHByb2NlZHVyZS4gT25seSBmb3IgaW50ZXJuYWwgdXNlIHdpdGhpbiBsaWJyYXJ5LlxuICAgKi8gYXN5bmMgY2FsbChvcHRzKSB7XG4gICAgICAgIGNvbnN0IHsgdHlwZSAsIHBhdGggIH0gPSBvcHRzO1xuICAgICAgICBjb25zdCBkZWZUYXJnZXQgPSBQUk9DRURVUkVfREVGSU5JVElPTl9NQVBbdHlwZV07XG4gICAgICAgIGNvbnN0IGRlZnMgPSB0aGlzLl9kZWZbZGVmVGFyZ2V0XTtcbiAgICAgICAgY29uc3QgcHJvY2VkdXJlID0gZGVmc1twYXRoXTtcbiAgICAgICAgaWYgKCFwcm9jZWR1cmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgICAgICAgIGNvZGU6ICdOT1RfRk9VTkQnLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBObyBcIiR7dHlwZX1cIi1wcm9jZWR1cmUgb24gcGF0aCBcIiR7cGF0aH1cImBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcm9jZWR1cmUuY2FsbChvcHRzKTtcbiAgICB9XG4gICAgY3JlYXRlQ2FsbGVyKGN0eCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcXVlcnk6IChwYXRoLCAuLi5hcmdzKT0+e1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNhbGwoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncXVlcnknLFxuICAgICAgICAgICAgICAgICAgICBjdHgsXG4gICAgICAgICAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHJhd0lucHV0OiBhcmdzWzBdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbXV0YXRpb246IChwYXRoLCAuLi5hcmdzKT0+e1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNhbGwoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbXV0YXRpb24nLFxuICAgICAgICAgICAgICAgICAgICBjdHgsXG4gICAgICAgICAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHJhd0lucHV0OiBhcmdzWzBdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uOiAocGF0aCwgLi4uYXJncyk9PntcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jYWxsKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1YnNjcmlwdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIGN0eCxcbiAgICAgICAgICAgICAgICAgICAgcGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcmF3SW5wdXQ6IGFyZ3NbMF1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAqIEZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBiZWZvcmUgYW55IHByb2NlZHVyZSBpcyBpbnZva2VkXG4gICAqIEBsaW5rIGh0dHBzOi8vdHJwYy5pby9kb2NzL21pZGRsZXdhcmVzXG4gICAqLyBtaWRkbGV3YXJlKG1pZGRsZXdhcmUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSb3V0ZXIoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWlkZGxld2FyZXM6IFtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYubWlkZGxld2FyZXMsXG4gICAgICAgICAgICAgICAgbWlkZGxld2FyZVxuICAgICAgICAgICAgXVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAqIEZvcm1hdCBlcnJvcnNcbiAgICogQGxpbmsgaHR0cHM6Ly90cnBjLmlvL2RvY3MvZXJyb3ItZm9ybWF0dGluZ1xuICAgKi8gZm9ybWF0RXJyb3IoZXJyb3JGb3JtYXR0ZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5lcnJvckZvcm1hdHRlciAhPT0gZGVmYXVsdEZvcm1hdHRlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3Ugc2VlbSB0byBoYXZlIGRvdWJsZSBgZm9ybWF0RXJyb3IoKWAtY2FsbHMgaW4geW91ciByb3V0ZXIgdHJlZScpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUm91dGVyKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGVycm9yRm9ybWF0dGVyOiBlcnJvckZvcm1hdHRlclxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0RXJyb3JTaGFwZShvcHRzKSB7XG4gICAgICAgIGNvbnN0IHsgcGF0aCAsIGVycm9yICB9ID0gb3B0cztcbiAgICAgICAgY29uc3QgeyBjb2RlICB9ID0gb3B0cy5lcnJvcjtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB7XG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgICAgY29kZTogVFJQQ19FUlJPUl9DT0RFU19CWV9LRVlbY29kZV0sXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgY29kZSxcbiAgICAgICAgICAgICAgICBodHRwU3RhdHVzOiBnZXRIVFRQU3RhdHVzQ29kZUZyb21FcnJvcihlcnJvcilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGdsb2JhbFRoaXMucHJvY2Vzcz8uZW52Py5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHR5cGVvZiBvcHRzLmVycm9yLnN0YWNrID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgc2hhcGUuZGF0YS5zdGFjayA9IG9wdHMuZXJyb3Iuc3RhY2s7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgc2hhcGUuZGF0YS5wYXRoID0gcGF0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmVycm9yRm9ybWF0dGVyKHtcbiAgICAgICAgICAgIC4uLm9wdHMsXG4gICAgICAgICAgICBzaGFwZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAqIEFkZCBkYXRhIHRyYW5zZm9ybWVyIHRvIHNlcmlhbGl6ZS9kZXNlcmlhbGl6ZSBpbnB1dCBhcmdzICsgb3V0cHV0XG4gICAqIEBsaW5rIGh0dHBzOi8vdHJwYy5pby9kb2NzL2RhdGEtdHJhbnNmb3JtZXJzXG4gICAqLyB0cmFuc2Zvcm1lcihfdHJhbnNmb3JtZXIpIHtcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtZXIgPSBnZXREYXRhVHJhbnNmb3JtZXIoX3RyYW5zZm9ybWVyKTtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi50cmFuc2Zvcm1lciAhPT0gZGVmYXVsdFRyYW5zZm9ybWVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBzZWVtIHRvIGhhdmUgZG91YmxlIGB0cmFuc2Zvcm1lcigpYC1jYWxscyBpbiB5b3VyIHJvdXRlciB0cmVlJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBSb3V0ZXIoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgdHJhbnNmb3JtZXJcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgKiBGbGF0dGVucyB0aGUgZ2VuZXJpY3Mgb2YgVFF1ZXJpZXMvVE11dGF0aW9ucy9UU3Vic2NyaXB0aW9ucy5cbiAgICog4pqg77iPIEV4cGVyaW1lbnRhbCAtIG1pZ2h0IGRpc2FwcGVhci4g4pqg77iPXG4gICAqXG4gICAqIEBhbHBoYVxuICAgKi8gZmxhdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgKiBJbnRlcm9wIG1vZGUgZm9yIHY5LnggLT4gdjEwLnhcbiAgICovIGludGVyb3AoKSB7XG4gICAgICAgIHJldHVybiBtaWdyYXRlUm91dGVyKHRoaXMpO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihkZWYpe1xuICAgICAgICB0aGlzLl9kZWYgPSB7XG4gICAgICAgICAgICBxdWVyaWVzOiBkZWY/LnF1ZXJpZXMgPz8gc2FmZU9iamVjdCgpLFxuICAgICAgICAgICAgbXV0YXRpb25zOiBkZWY/Lm11dGF0aW9ucyA/PyBzYWZlT2JqZWN0KCksXG4gICAgICAgICAgICBzdWJzY3JpcHRpb25zOiBkZWY/LnN1YnNjcmlwdGlvbnMgPz8gc2FmZU9iamVjdCgpLFxuICAgICAgICAgICAgbWlkZGxld2FyZXM6IGRlZj8ubWlkZGxld2FyZXMgPz8gW10sXG4gICAgICAgICAgICBlcnJvckZvcm1hdHRlcjogZGVmPy5lcnJvckZvcm1hdHRlciA/PyBkZWZhdWx0Rm9ybWF0dGVyLFxuICAgICAgICAgICAgdHJhbnNmb3JtZXI6IGRlZj8udHJhbnNmb3JtZXIgPz8gZGVmYXVsdFRyYW5zZm9ybWVyXG4gICAgICAgIH07XG4gICAgfVxufVxuLyoqXG4gKiBAZGVwcmVjYXRlZFxuICovIGZ1bmN0aW9uIHJvdXRlcigpIHtcbiAgICByZXR1cm4gbmV3IFJvdXRlcigpO1xufVxuXG5mdW5jdGlvbiBtZXJnZVJvdXRlcnMoLi4ucm91dGVyTGlzdCkge1xuICAgIGNvbnN0IHJlY29yZCA9IG1lcmdlV2l0aG91dE92ZXJyaWRlcyh7fSwgLi4ucm91dGVyTGlzdC5tYXAoKHIpPT5yLl9kZWYucmVjb3JkKSk7XG4gICAgY29uc3QgZXJyb3JGb3JtYXR0ZXIgPSByb3V0ZXJMaXN0LnJlZHVjZSgoY3VycmVudEVycm9yRm9ybWF0dGVyLCBuZXh0Um91dGVyKT0+e1xuICAgICAgICBpZiAobmV4dFJvdXRlci5fZGVmLl9jb25maWcuZXJyb3JGb3JtYXR0ZXIgJiYgbmV4dFJvdXRlci5fZGVmLl9jb25maWcuZXJyb3JGb3JtYXR0ZXIgIT09IGRlZmF1bHRGb3JtYXR0ZXIpIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50RXJyb3JGb3JtYXR0ZXIgIT09IGRlZmF1bHRGb3JtYXR0ZXIgJiYgY3VycmVudEVycm9yRm9ybWF0dGVyICE9PSBuZXh0Um91dGVyLl9kZWYuX2NvbmZpZy5lcnJvckZvcm1hdHRlcikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWW91IHNlZW0gdG8gaGF2ZSBzZXZlcmFsIGVycm9yIGZvcm1hdHRlcnMnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXh0Um91dGVyLl9kZWYuX2NvbmZpZy5lcnJvckZvcm1hdHRlcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3VycmVudEVycm9yRm9ybWF0dGVyO1xuICAgIH0sIGRlZmF1bHRGb3JtYXR0ZXIpO1xuICAgIGNvbnN0IHRyYW5zZm9ybWVyID0gcm91dGVyTGlzdC5yZWR1Y2UoKHByZXYsIGN1cnJlbnQpPT57XG4gICAgICAgIGlmIChjdXJyZW50Ll9kZWYuX2NvbmZpZy50cmFuc2Zvcm1lciAmJiBjdXJyZW50Ll9kZWYuX2NvbmZpZy50cmFuc2Zvcm1lciAhPT0gZGVmYXVsdFRyYW5zZm9ybWVyKSB7XG4gICAgICAgICAgICBpZiAocHJldiAhPT0gZGVmYXVsdFRyYW5zZm9ybWVyICYmIHByZXYgIT09IGN1cnJlbnQuX2RlZi5fY29uZmlnLnRyYW5zZm9ybWVyKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3Ugc2VlbSB0byBoYXZlIHNldmVyYWwgdHJhbnNmb3JtZXJzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudC5fZGVmLl9jb25maWcudHJhbnNmb3JtZXI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgfSwgZGVmYXVsdFRyYW5zZm9ybWVyKTtcbiAgICBjb25zdCByb3V0ZXIgPSBjcmVhdGVSb3V0ZXJGYWN0b3J5KHtcbiAgICAgICAgZXJyb3JGb3JtYXR0ZXIsXG4gICAgICAgIHRyYW5zZm9ybWVyLFxuICAgICAgICBpc0Rldjogcm91dGVyTGlzdC5zb21lKChyKT0+ci5fZGVmLl9jb25maWcuaXNEZXYpLFxuICAgICAgICBhbGxvd091dHNpZGVPZlNlcnZlcjogcm91dGVyTGlzdC5zb21lKChyKT0+ci5fZGVmLl9jb25maWcuYWxsb3dPdXRzaWRlT2ZTZXJ2ZXIpLFxuICAgICAgICBpc1NlcnZlcjogcm91dGVyTGlzdC5zb21lKChyKT0+ci5fZGVmLl9jb25maWcuaXNTZXJ2ZXIpLFxuICAgICAgICAkdHlwZXM6IHJvdXRlckxpc3RbMF0/Ll9kZWYuX2NvbmZpZy4kdHlwZXNcbiAgICB9KShyZWNvcmQpO1xuICAgIHJldHVybiByb3V0ZXI7XG59XG5cbi8qKlxuICogVE9ETzogVGhpcyBjYW4gYmUgaW1wcm92ZWQ6XG4gKiAtIFdlIHNob3VsZCBiZSBhYmxlIHRvIGNoYWluIGAubWV0YSgpYC9gLmNvbnRleHQoKWAgb25seSBvbmNlXG4gKiAtIFNpbXBsaWZ5IHR5cGluZ3NcbiAqIC0gRG9lc24ndCBuZWVkIHRvIGJlIGEgY2xhc3MgYnV0IGl0IGRvZXNuJ3QgcmVhbGx5IGh1cnQgZWl0aGVyXG4gKi8gY2xhc3MgVFJQQ0J1aWxkZXIge1xuICAgIGNvbnRleHQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgVFJQQ0J1aWxkZXIoKTtcbiAgICB9XG4gICAgbWV0YSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUUlBDQnVpbGRlcigpO1xuICAgIH1cbiAgICBjcmVhdGUob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gY3JlYXRlVFJQQ0lubmVyKCkob3B0aW9ucyk7XG4gICAgfVxufVxuLyoqXG4gKiBJbml0aWFsaXplIHRSUEMgLSBkb25lIGV4YWN0bHkgb25jZSBwZXIgYmFja2VuZFxuICovIGNvbnN0IGluaXRUUlBDID0gbmV3IFRSUENCdWlsZGVyKCk7XG5mdW5jdGlvbiBjcmVhdGVUUlBDSW5uZXIoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGluaXRUUlBDSW5uZXIocnVudGltZSkge1xuICAgICAgICBjb25zdCBlcnJvckZvcm1hdHRlciA9IHJ1bnRpbWU/LmVycm9yRm9ybWF0dGVyID8/IGRlZmF1bHRGb3JtYXR0ZXI7XG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybWVyID0gZ2V0RGF0YVRyYW5zZm9ybWVyJDEocnVudGltZT8udHJhbnNmb3JtZXIgPz8gZGVmYXVsdFRyYW5zZm9ybWVyKTtcbiAgICAgICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgICAgICAgdHJhbnNmb3JtZXIsXG4gICAgICAgICAgICBpc0RldjogcnVudGltZT8uaXNEZXYgPz8gZ2xvYmFsVGhpcy5wcm9jZXNzPy5lbnY/Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicsXG4gICAgICAgICAgICBhbGxvd091dHNpZGVPZlNlcnZlcjogcnVudGltZT8uYWxsb3dPdXRzaWRlT2ZTZXJ2ZXIgPz8gZmFsc2UsXG4gICAgICAgICAgICBlcnJvckZvcm1hdHRlcixcbiAgICAgICAgICAgIGlzU2VydmVyOiBydW50aW1lPy5pc1NlcnZlciA/PyBpc1NlcnZlckRlZmF1bHQsXG4gICAgICAgICAgICAvKipcbiAgICAgICAqIEBpbnRlcm5hbFxuICAgICAgICovICR0eXBlczogY3JlYXRlRmxhdFByb3h5KChrZXkpPT57XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUcmllZCB0byBhY2Nlc3MgXCIkdHlwZXMuJHtrZXl9XCIgd2hpY2ggaXMgbm90IGF2YWlsYWJsZSBhdCBydW50aW1lYCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuICAgICAgICB7XG4gICAgICAgICAgICAvLyBTZXJ2ZXIgY2hlY2tcbiAgICAgICAgICAgIGNvbnN0IGlzU2VydmVyID0gcnVudGltZT8uaXNTZXJ2ZXIgPz8gaXNTZXJ2ZXJEZWZhdWx0O1xuICAgICAgICAgICAgaWYgKCFpc1NlcnZlciAmJiBydW50aW1lPy5hbGxvd091dHNpZGVPZlNlcnZlciAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgWW91J3JlIHRyeWluZyB0byB1c2UgQHRycGMvc2VydmVyIGluIGEgbm9uLXNlcnZlciBlbnZpcm9ubWVudC4gVGhpcyBpcyBub3Qgc3VwcG9ydGVkIGJ5IGRlZmF1bHQuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICogVGhlc2UgYXJlIGp1c3QgdHlwZXMsIHRoZXkgY2FuJ3QgYmUgdXNlZFxuICAgICAgICogQGludGVybmFsXG4gICAgICAgKi8gX2NvbmZpZzogY29uZmlnLFxuICAgICAgICAgICAgLyoqXG4gICAgICAgKiBCdWlsZGVyIG9iamVjdCBmb3IgY3JlYXRpbmcgcHJvY2VkdXJlc1xuICAgICAgICogQHNlZSBodHRwczovL3RycGMuaW8vZG9jcy9zZXJ2ZXIvcHJvY2VkdXJlc1xuICAgICAgICovIHByb2NlZHVyZTogY3JlYXRlQnVpbGRlcih7XG4gICAgICAgICAgICAgICAgbWV0YTogcnVudGltZT8uZGVmYXVsdE1ldGFcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgLyoqXG4gICAgICAgKiBDcmVhdGUgcmV1c2FibGUgbWlkZGxld2FyZXNcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90cnBjLmlvL2RvY3Mvc2VydmVyL21pZGRsZXdhcmVzXG4gICAgICAgKi8gbWlkZGxld2FyZTogY3JlYXRlTWlkZGxld2FyZUZhY3RvcnkoKSxcbiAgICAgICAgICAgIC8qKlxuICAgICAgICogQ3JlYXRlIGEgcm91dGVyXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdHJwYy5pby9kb2NzL3NlcnZlci9yb3V0ZXJzXG4gICAgICAgKi8gcm91dGVyOiBjcmVhdGVSb3V0ZXJGYWN0b3J5KGNvbmZpZyksXG4gICAgICAgICAgICAvKipcbiAgICAgICAqIE1lcmdlIFJvdXRlcnNcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90cnBjLmlvL2RvY3Mvc2VydmVyL21lcmdpbmctcm91dGVyc1xuICAgICAgICovIG1lcmdlUm91dGVycyxcbiAgICAgICAgICAgIC8qKlxuICAgICAgICogQ3JlYXRlIGEgc2VydmVyLXNpZGUgY2FsbGVyIGZvciBhIHJvdXRlclxuICAgICAgICogQHNlZSBodHRwczovL3RycGMuaW8vZG9jcy9zZXJ2ZXIvc2VydmVyLXNpZGUtY2FsbHNcbiAgICAgICAqLyBjcmVhdGVDYWxsZXJGYWN0b3J5OiBjcmVhdGVDYWxsZXJGYWN0b3J5KClcbiAgICAgICAgfTtcbiAgICB9O1xufVxuXG5leHBvcnQgeyBjcmVhdGVJbnB1dE1pZGRsZXdhcmUsIGNyZWF0ZU91dHB1dE1pZGRsZXdhcmUsIGV4cGVyaW1lbnRhbF9zdGFuZGFsb25lTWlkZGxld2FyZSwgaW5pdFRSUEMsIHJvdXRlciB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/@trpc/server/dist/index.mjs\n");

/***/ }),

/***/ "(rsc)/../../node_modules/@trpc/server/dist/resolveHTTPResponse-2fc435bb.mjs":
/*!*****************************************************************************!*\
  !*** ../../node_modules/@trpc/server/dist/resolveHTTPResponse-2fc435bb.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   r: () => (/* binding */ resolveHTTPResponse)\n/* harmony export */ });\n/* harmony import */ var _config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config-d5fdbd39.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/config-d5fdbd39.mjs\");\n/* harmony import */ var _TRPCError_98d44758_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TRPCError-98d44758.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/TRPCError-98d44758.mjs\");\n/* harmony import */ var _transformTRPCResponse_1153b421_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./transformTRPCResponse-1153b421.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/transformTRPCResponse-1153b421.mjs\");\n/* harmony import */ var _contentType_9fd995d3_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./contentType-9fd995d3.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/contentType-9fd995d3.mjs\");\n/* harmony import */ var _index_f91d720c_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./index-f91d720c.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/index-f91d720c.mjs\");\n\n\n\n\n\n\nconst HTTP_METHOD_PROCEDURE_TYPE_MAP = {\n    GET: 'query',\n    POST: 'mutation'\n};\nconst fallbackContentTypeHandler = {\n    getInputs: _contentType_9fd995d3_mjs__WEBPACK_IMPORTED_MODULE_3__.g\n};\nfunction initResponse(initOpts) {\n    const { ctx , paths , type , responseMeta , untransformedJSON , errors =[] ,  } = initOpts;\n    let status = untransformedJSON ? (0,_index_f91d720c_mjs__WEBPACK_IMPORTED_MODULE_4__.b)(untransformedJSON) : 200;\n    const headers = {\n        'Content-Type': 'application/json'\n    };\n    const eagerGeneration = !untransformedJSON;\n    const data = eagerGeneration ? [] : Array.isArray(untransformedJSON) ? untransformedJSON : [\n        untransformedJSON\n    ];\n    const meta = responseMeta?.({\n        ctx,\n        paths,\n        type,\n        data,\n        errors,\n        eagerGeneration\n    }) ?? {};\n    for (const [key, value] of Object.entries(meta.headers ?? {})){\n        headers[key] = value;\n    }\n    if (meta.status) {\n        status = meta.status;\n    }\n    return {\n        status,\n        headers\n    };\n}\nasync function inputToProcedureCall(procedureOpts) {\n    const { opts , ctx , type , input , path  } = procedureOpts;\n    try {\n        const data = await (0,_config_d5fdbd39_mjs__WEBPACK_IMPORTED_MODULE_0__.e)({\n            procedures: opts.router._def.procedures,\n            path,\n            rawInput: input,\n            ctx,\n            type\n        });\n        return {\n            result: {\n                data\n            }\n        };\n    } catch (cause) {\n        const error = (0,_TRPCError_98d44758_mjs__WEBPACK_IMPORTED_MODULE_1__.g)(cause);\n        opts.onError?.({\n            error,\n            path,\n            input,\n            ctx,\n            type: type,\n            req: opts.req\n        });\n        return {\n            error: (0,_transformTRPCResponse_1153b421_mjs__WEBPACK_IMPORTED_MODULE_2__.g)({\n                config: opts.router._def._config,\n                error,\n                type,\n                path,\n                input,\n                ctx\n            })\n        };\n    }\n}\nfunction caughtErrorToData(cause, errorOpts) {\n    const { router , req , onError  } = errorOpts.opts;\n    const error = (0,_TRPCError_98d44758_mjs__WEBPACK_IMPORTED_MODULE_1__.g)(cause);\n    onError?.({\n        error,\n        path: errorOpts.path,\n        input: errorOpts.input,\n        ctx: errorOpts.ctx,\n        type: errorOpts.type,\n        req\n    });\n    const untransformedJSON = {\n        error: (0,_transformTRPCResponse_1153b421_mjs__WEBPACK_IMPORTED_MODULE_2__.g)({\n            config: router._def._config,\n            error,\n            type: errorOpts.type,\n            path: errorOpts.path,\n            input: errorOpts.input,\n            ctx: errorOpts.ctx\n        })\n    };\n    const transformedJSON = (0,_transformTRPCResponse_1153b421_mjs__WEBPACK_IMPORTED_MODULE_2__.t)(router._def._config, untransformedJSON);\n    const body = JSON.stringify(transformedJSON);\n    return {\n        error,\n        untransformedJSON,\n        body\n    };\n}\n// implementation\nasync function resolveHTTPResponse(opts) {\n    const { router , req , unstable_onHead , unstable_onChunk  } = opts;\n    if (req.method === 'HEAD') {\n        // can be used for lambda warmup\n        const headResponse = {\n            status: 204\n        };\n        unstable_onHead?.(headResponse, false);\n        unstable_onChunk?.([\n            -1,\n            ''\n        ]);\n        return headResponse;\n    }\n    const contentTypeHandler = opts.contentTypeHandler ?? fallbackContentTypeHandler;\n    const batchingEnabled = opts.batching?.enabled ?? true;\n    const type = HTTP_METHOD_PROCEDURE_TYPE_MAP[req.method] ?? 'unknown';\n    let ctx = undefined;\n    let paths;\n    const isBatchCall = !!req.query.get('batch');\n    const isStreamCall = isBatchCall && unstable_onHead && unstable_onChunk && req.headers['trpc-batch-mode'] === 'stream';\n    try {\n        // we create context first so that (unless `createContext()` throws)\n        // error handler may access context information\n        //\n        // this way even if the client sends malformed input that might cause an exception:\n        //  - `opts.error` has value,\n        //  - batching is not enabled,\n        //  - `type` is unknown,\n        //  - `getInputs` throws because of malformed JSON,\n        // context value is still available to the error handler\n        ctx = await opts.createContext();\n        if (opts.error) {\n            throw opts.error;\n        }\n        if (isBatchCall && !batchingEnabled) {\n            throw new Error(`Batching is not enabled on the server`);\n        }\n        /* istanbul ignore if -- @preserve */ if (type === 'subscription') {\n            throw new _TRPCError_98d44758_mjs__WEBPACK_IMPORTED_MODULE_1__.T({\n                message: 'Subscriptions should use wsLink',\n                code: 'METHOD_NOT_SUPPORTED'\n            });\n        }\n        if (type === 'unknown') {\n            throw new _TRPCError_98d44758_mjs__WEBPACK_IMPORTED_MODULE_1__.T({\n                message: `Unexpected request method ${req.method}`,\n                code: 'METHOD_NOT_SUPPORTED'\n            });\n        }\n        const inputs = await contentTypeHandler.getInputs({\n            isBatchCall,\n            req,\n            router,\n            preprocessedBody: opts.preprocessedBody ?? false\n        });\n        paths = isBatchCall ? decodeURIComponent(opts.path).split(',') : [\n            opts.path\n        ];\n        const promises = paths.map((path, index)=>inputToProcedureCall({\n                opts,\n                ctx,\n                type,\n                input: inputs[index],\n                path\n            }));\n        if (!isStreamCall) {\n            /**\n       * Non-streaming response:\n       * - await all responses in parallel, blocking on the slowest one\n       * - create headers with known response body\n       * - return a complete HTTPResponse\n       */ const untransformedJSON = await Promise.all(promises);\n            const errors = untransformedJSON.flatMap((response)=>'error' in response ? [\n                    response.error\n                ] : []);\n            const headResponse1 = initResponse({\n                ctx,\n                paths,\n                type,\n                responseMeta: opts.responseMeta,\n                untransformedJSON,\n                errors\n            });\n            unstable_onHead?.(headResponse1, false);\n            // return body stuff\n            const result = isBatchCall ? untransformedJSON : untransformedJSON[0]; // eslint-disable-line @typescript-eslint/no-non-null-assertion -- `untransformedJSON` should be the length of `paths` which should be at least 1 otherwise there wouldn't be a request at all\n            const transformedJSON = (0,_transformTRPCResponse_1153b421_mjs__WEBPACK_IMPORTED_MODULE_2__.t)(router._def._config, result);\n            const body = JSON.stringify(transformedJSON);\n            unstable_onChunk?.([\n                -1,\n                body\n            ]);\n            return {\n                status: headResponse1.status,\n                headers: headResponse1.headers,\n                body\n            };\n        }\n        /**\n     * Streaming response:\n     * - block on none, call `onChunk` as soon as each response is ready\n     * - create headers with minimal data (cannot know the response body in advance)\n     * - return void\n     */ const headResponse2 = initResponse({\n            ctx,\n            paths,\n            type,\n            responseMeta: opts.responseMeta\n        });\n        unstable_onHead(headResponse2, true);\n        const indexedPromises = new Map(promises.map((promise, index)=>[\n                index,\n                promise.then((r)=>[\n                        index,\n                        r\n                    ])\n            ]));\n        for (const _ of paths){\n            const [index, untransformedJSON1] = await Promise.race(indexedPromises.values());\n            indexedPromises.delete(index);\n            try {\n                const transformedJSON1 = (0,_transformTRPCResponse_1153b421_mjs__WEBPACK_IMPORTED_MODULE_2__.t)(router._def._config, untransformedJSON1);\n                const body1 = JSON.stringify(transformedJSON1);\n                unstable_onChunk([\n                    index,\n                    body1\n                ]);\n            } catch (cause) {\n                const path = paths[index];\n                const input = inputs[index];\n                const { body: body2  } = caughtErrorToData(cause, {\n                    opts,\n                    ctx,\n                    type,\n                    path,\n                    input\n                });\n                unstable_onChunk([\n                    index,\n                    body2\n                ]);\n            }\n        }\n        return;\n    } catch (cause1) {\n        // we get here if\n        // - batching is called when it's not enabled\n        // - `createContext()` throws\n        // - `router._def._config.transformer.output.serialize()` throws\n        // - post body is too large\n        // - input deserialization fails\n        // - `errorFormatter` return value is malformed\n        const { error , untransformedJSON: untransformedJSON2 , body: body3  } = caughtErrorToData(cause1, {\n            opts,\n            ctx,\n            type\n        });\n        const headResponse3 = initResponse({\n            ctx,\n            paths,\n            type,\n            responseMeta: opts.responseMeta,\n            untransformedJSON: untransformedJSON2,\n            errors: [\n                error\n            ]\n        });\n        unstable_onHead?.(headResponse3, false);\n        unstable_onChunk?.([\n            -1,\n            body3\n        ]);\n        return {\n            status: headResponse3.status,\n            headers: headResponse3.headers,\n            body: body3\n        };\n    }\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzL0B0cnBjL3NlcnZlci9kaXN0L3Jlc29sdmVIVFRQUmVzcG9uc2UtMmZjNDM1YmIubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUEyRDtBQUM2QjtBQUNjO0FBQzNCO0FBQ2I7O0FBRTlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHdEQUF3QjtBQUN2QztBQUNBO0FBQ0EsWUFBWSx3RUFBd0U7QUFDcEYscUNBQXFDLHNEQUFpQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLGdFQUFnRTtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxvQ0FBb0M7QUFDaEQ7QUFDQSwyQkFBMkIsdURBQWE7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLHNCQUFzQiwwREFBdUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxtQkFBbUIsc0VBQWE7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSwwQkFBMEI7QUFDdEMsa0JBQWtCLDBEQUF1QjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGVBQWUsc0VBQWE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsNEJBQTRCLHNFQUFxQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHFEQUFxRDtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixzREFBUztBQUMvQjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxzQkFBc0Isc0RBQVM7QUFDL0Isc0RBQXNELFdBQVc7QUFDakU7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxtRkFBbUY7QUFDbkYsb0NBQW9DLHNFQUFxQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLHNFQUFxQjtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSx3QkFBd0IsZUFBZTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLCtEQUErRDtBQUMvRTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFb0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYm9pbGVycGxhdGUvbmV4dGpzLy4uLy4uL25vZGVfbW9kdWxlcy9AdHJwYy9zZXJ2ZXIvZGlzdC9yZXNvbHZlSFRUUFJlc3BvbnNlLTJmYzQzNWJiLm1qcz8zZGRhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGUgYXMgY2FsbFByb2NlZHVyZSB9IGZyb20gJy4vY29uZmlnLWQ1ZmRiZDM5Lm1qcyc7XG5pbXBvcnQgeyBUIGFzIFRSUENFcnJvciwgZyBhcyBnZXRUUlBDRXJyb3JGcm9tVW5rbm93biB9IGZyb20gJy4vVFJQQ0Vycm9yLTk4ZDQ0NzU4Lm1qcyc7XG5pbXBvcnQgeyB0IGFzIHRyYW5zZm9ybVRSUENSZXNwb25zZSwgZyBhcyBnZXRFcnJvclNoYXBlIH0gZnJvbSAnLi90cmFuc2Zvcm1UUlBDUmVzcG9uc2UtMTE1M2I0MjEubWpzJztcbmltcG9ydCB7IGcgYXMgZ2V0SnNvbkNvbnRlbnRUeXBlSW5wdXRzIH0gZnJvbSAnLi9jb250ZW50VHlwZS05ZmQ5OTVkMy5tanMnO1xuaW1wb3J0IHsgYiBhcyBnZXRIVFRQU3RhdHVzQ29kZSB9IGZyb20gJy4vaW5kZXgtZjkxZDcyMGMubWpzJztcblxuY29uc3QgSFRUUF9NRVRIT0RfUFJPQ0VEVVJFX1RZUEVfTUFQID0ge1xuICAgIEdFVDogJ3F1ZXJ5JyxcbiAgICBQT1NUOiAnbXV0YXRpb24nXG59O1xuY29uc3QgZmFsbGJhY2tDb250ZW50VHlwZUhhbmRsZXIgPSB7XG4gICAgZ2V0SW5wdXRzOiBnZXRKc29uQ29udGVudFR5cGVJbnB1dHNcbn07XG5mdW5jdGlvbiBpbml0UmVzcG9uc2UoaW5pdE9wdHMpIHtcbiAgICBjb25zdCB7IGN0eCAsIHBhdGhzICwgdHlwZSAsIHJlc3BvbnNlTWV0YSAsIHVudHJhbnNmb3JtZWRKU09OICwgZXJyb3JzID1bXSAsICB9ID0gaW5pdE9wdHM7XG4gICAgbGV0IHN0YXR1cyA9IHVudHJhbnNmb3JtZWRKU09OID8gZ2V0SFRUUFN0YXR1c0NvZGUodW50cmFuc2Zvcm1lZEpTT04pIDogMjAwO1xuICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICB9O1xuICAgIGNvbnN0IGVhZ2VyR2VuZXJhdGlvbiA9ICF1bnRyYW5zZm9ybWVkSlNPTjtcbiAgICBjb25zdCBkYXRhID0gZWFnZXJHZW5lcmF0aW9uID8gW10gOiBBcnJheS5pc0FycmF5KHVudHJhbnNmb3JtZWRKU09OKSA/IHVudHJhbnNmb3JtZWRKU09OIDogW1xuICAgICAgICB1bnRyYW5zZm9ybWVkSlNPTlxuICAgIF07XG4gICAgY29uc3QgbWV0YSA9IHJlc3BvbnNlTWV0YT8uKHtcbiAgICAgICAgY3R4LFxuICAgICAgICBwYXRocyxcbiAgICAgICAgdHlwZSxcbiAgICAgICAgZGF0YSxcbiAgICAgICAgZXJyb3JzLFxuICAgICAgICBlYWdlckdlbmVyYXRpb25cbiAgICB9KSA/PyB7fTtcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhtZXRhLmhlYWRlcnMgPz8ge30pKXtcbiAgICAgICAgaGVhZGVyc1trZXldID0gdmFsdWU7XG4gICAgfVxuICAgIGlmIChtZXRhLnN0YXR1cykge1xuICAgICAgICBzdGF0dXMgPSBtZXRhLnN0YXR1cztcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc3RhdHVzLFxuICAgICAgICBoZWFkZXJzXG4gICAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGlucHV0VG9Qcm9jZWR1cmVDYWxsKHByb2NlZHVyZU9wdHMpIHtcbiAgICBjb25zdCB7IG9wdHMgLCBjdHggLCB0eXBlICwgaW5wdXQgLCBwYXRoICB9ID0gcHJvY2VkdXJlT3B0cztcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgY2FsbFByb2NlZHVyZSh7XG4gICAgICAgICAgICBwcm9jZWR1cmVzOiBvcHRzLnJvdXRlci5fZGVmLnByb2NlZHVyZXMsXG4gICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgcmF3SW5wdXQ6IGlucHV0LFxuICAgICAgICAgICAgY3R4LFxuICAgICAgICAgICAgdHlwZVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3VsdDoge1xuICAgICAgICAgICAgICAgIGRhdGFcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9IGNhdGNoIChjYXVzZSkge1xuICAgICAgICBjb25zdCBlcnJvciA9IGdldFRSUENFcnJvckZyb21Vbmtub3duKGNhdXNlKTtcbiAgICAgICAgb3B0cy5vbkVycm9yPy4oe1xuICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICBjdHgsXG4gICAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgICAgcmVxOiBvcHRzLnJlcVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVycm9yOiBnZXRFcnJvclNoYXBlKHtcbiAgICAgICAgICAgICAgICBjb25maWc6IG9wdHMucm91dGVyLl9kZWYuX2NvbmZpZyxcbiAgICAgICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICAgICAgY3R4XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNhdWdodEVycm9yVG9EYXRhKGNhdXNlLCBlcnJvck9wdHMpIHtcbiAgICBjb25zdCB7IHJvdXRlciAsIHJlcSAsIG9uRXJyb3IgIH0gPSBlcnJvck9wdHMub3B0cztcbiAgICBjb25zdCBlcnJvciA9IGdldFRSUENFcnJvckZyb21Vbmtub3duKGNhdXNlKTtcbiAgICBvbkVycm9yPy4oe1xuICAgICAgICBlcnJvcixcbiAgICAgICAgcGF0aDogZXJyb3JPcHRzLnBhdGgsXG4gICAgICAgIGlucHV0OiBlcnJvck9wdHMuaW5wdXQsXG4gICAgICAgIGN0eDogZXJyb3JPcHRzLmN0eCxcbiAgICAgICAgdHlwZTogZXJyb3JPcHRzLnR5cGUsXG4gICAgICAgIHJlcVxuICAgIH0pO1xuICAgIGNvbnN0IHVudHJhbnNmb3JtZWRKU09OID0ge1xuICAgICAgICBlcnJvcjogZ2V0RXJyb3JTaGFwZSh7XG4gICAgICAgICAgICBjb25maWc6IHJvdXRlci5fZGVmLl9jb25maWcsXG4gICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgIHR5cGU6IGVycm9yT3B0cy50eXBlLFxuICAgICAgICAgICAgcGF0aDogZXJyb3JPcHRzLnBhdGgsXG4gICAgICAgICAgICBpbnB1dDogZXJyb3JPcHRzLmlucHV0LFxuICAgICAgICAgICAgY3R4OiBlcnJvck9wdHMuY3R4XG4gICAgICAgIH0pXG4gICAgfTtcbiAgICBjb25zdCB0cmFuc2Zvcm1lZEpTT04gPSB0cmFuc2Zvcm1UUlBDUmVzcG9uc2Uocm91dGVyLl9kZWYuX2NvbmZpZywgdW50cmFuc2Zvcm1lZEpTT04pO1xuICAgIGNvbnN0IGJvZHkgPSBKU09OLnN0cmluZ2lmeSh0cmFuc2Zvcm1lZEpTT04pO1xuICAgIHJldHVybiB7XG4gICAgICAgIGVycm9yLFxuICAgICAgICB1bnRyYW5zZm9ybWVkSlNPTixcbiAgICAgICAgYm9keVxuICAgIH07XG59XG4vLyBpbXBsZW1lbnRhdGlvblxuYXN5bmMgZnVuY3Rpb24gcmVzb2x2ZUhUVFBSZXNwb25zZShvcHRzKSB7XG4gICAgY29uc3QgeyByb3V0ZXIgLCByZXEgLCB1bnN0YWJsZV9vbkhlYWQgLCB1bnN0YWJsZV9vbkNodW5rICB9ID0gb3B0cztcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ0hFQUQnKSB7XG4gICAgICAgIC8vIGNhbiBiZSB1c2VkIGZvciBsYW1iZGEgd2FybXVwXG4gICAgICAgIGNvbnN0IGhlYWRSZXNwb25zZSA9IHtcbiAgICAgICAgICAgIHN0YXR1czogMjA0XG4gICAgICAgIH07XG4gICAgICAgIHVuc3RhYmxlX29uSGVhZD8uKGhlYWRSZXNwb25zZSwgZmFsc2UpO1xuICAgICAgICB1bnN0YWJsZV9vbkNodW5rPy4oW1xuICAgICAgICAgICAgLTEsXG4gICAgICAgICAgICAnJ1xuICAgICAgICBdKTtcbiAgICAgICAgcmV0dXJuIGhlYWRSZXNwb25zZTtcbiAgICB9XG4gICAgY29uc3QgY29udGVudFR5cGVIYW5kbGVyID0gb3B0cy5jb250ZW50VHlwZUhhbmRsZXIgPz8gZmFsbGJhY2tDb250ZW50VHlwZUhhbmRsZXI7XG4gICAgY29uc3QgYmF0Y2hpbmdFbmFibGVkID0gb3B0cy5iYXRjaGluZz8uZW5hYmxlZCA/PyB0cnVlO1xuICAgIGNvbnN0IHR5cGUgPSBIVFRQX01FVEhPRF9QUk9DRURVUkVfVFlQRV9NQVBbcmVxLm1ldGhvZF0gPz8gJ3Vua25vd24nO1xuICAgIGxldCBjdHggPSB1bmRlZmluZWQ7XG4gICAgbGV0IHBhdGhzO1xuICAgIGNvbnN0IGlzQmF0Y2hDYWxsID0gISFyZXEucXVlcnkuZ2V0KCdiYXRjaCcpO1xuICAgIGNvbnN0IGlzU3RyZWFtQ2FsbCA9IGlzQmF0Y2hDYWxsICYmIHVuc3RhYmxlX29uSGVhZCAmJiB1bnN0YWJsZV9vbkNodW5rICYmIHJlcS5oZWFkZXJzWyd0cnBjLWJhdGNoLW1vZGUnXSA9PT0gJ3N0cmVhbSc7XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2UgY3JlYXRlIGNvbnRleHQgZmlyc3Qgc28gdGhhdCAodW5sZXNzIGBjcmVhdGVDb250ZXh0KClgIHRocm93cylcbiAgICAgICAgLy8gZXJyb3IgaGFuZGxlciBtYXkgYWNjZXNzIGNvbnRleHQgaW5mb3JtYXRpb25cbiAgICAgICAgLy9cbiAgICAgICAgLy8gdGhpcyB3YXkgZXZlbiBpZiB0aGUgY2xpZW50IHNlbmRzIG1hbGZvcm1lZCBpbnB1dCB0aGF0IG1pZ2h0IGNhdXNlIGFuIGV4Y2VwdGlvbjpcbiAgICAgICAgLy8gIC0gYG9wdHMuZXJyb3JgIGhhcyB2YWx1ZSxcbiAgICAgICAgLy8gIC0gYmF0Y2hpbmcgaXMgbm90IGVuYWJsZWQsXG4gICAgICAgIC8vICAtIGB0eXBlYCBpcyB1bmtub3duLFxuICAgICAgICAvLyAgLSBgZ2V0SW5wdXRzYCB0aHJvd3MgYmVjYXVzZSBvZiBtYWxmb3JtZWQgSlNPTixcbiAgICAgICAgLy8gY29udGV4dCB2YWx1ZSBpcyBzdGlsbCBhdmFpbGFibGUgdG8gdGhlIGVycm9yIGhhbmRsZXJcbiAgICAgICAgY3R4ID0gYXdhaXQgb3B0cy5jcmVhdGVDb250ZXh0KCk7XG4gICAgICAgIGlmIChvcHRzLmVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBvcHRzLmVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0JhdGNoQ2FsbCAmJiAhYmF0Y2hpbmdFbmFibGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEJhdGNoaW5nIGlzIG5vdCBlbmFibGVkIG9uIHRoZSBzZXJ2ZXJgKTtcbiAgICAgICAgfVxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgLS0gQHByZXNlcnZlICovIGlmICh0eXBlID09PSAnc3Vic2NyaXB0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ1N1YnNjcmlwdGlvbnMgc2hvdWxkIHVzZSB3c0xpbmsnLFxuICAgICAgICAgICAgICAgIGNvZGU6ICdNRVRIT0RfTk9UX1NVUFBPUlRFRCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlID09PSAndW5rbm93bicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBVbmV4cGVjdGVkIHJlcXVlc3QgbWV0aG9kICR7cmVxLm1ldGhvZH1gLFxuICAgICAgICAgICAgICAgIGNvZGU6ICdNRVRIT0RfTk9UX1NVUFBPUlRFRCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlucHV0cyA9IGF3YWl0IGNvbnRlbnRUeXBlSGFuZGxlci5nZXRJbnB1dHMoe1xuICAgICAgICAgICAgaXNCYXRjaENhbGwsXG4gICAgICAgICAgICByZXEsXG4gICAgICAgICAgICByb3V0ZXIsXG4gICAgICAgICAgICBwcmVwcm9jZXNzZWRCb2R5OiBvcHRzLnByZXByb2Nlc3NlZEJvZHkgPz8gZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIHBhdGhzID0gaXNCYXRjaENhbGwgPyBkZWNvZGVVUklDb21wb25lbnQob3B0cy5wYXRoKS5zcGxpdCgnLCcpIDogW1xuICAgICAgICAgICAgb3B0cy5wYXRoXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gcGF0aHMubWFwKChwYXRoLCBpbmRleCk9PmlucHV0VG9Qcm9jZWR1cmVDYWxsKHtcbiAgICAgICAgICAgICAgICBvcHRzLFxuICAgICAgICAgICAgICAgIGN0eCxcbiAgICAgICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgICAgIGlucHV0OiBpbnB1dHNbaW5kZXhdLFxuICAgICAgICAgICAgICAgIHBhdGhcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgaWYgKCFpc1N0cmVhbUNhbGwpIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICogTm9uLXN0cmVhbWluZyByZXNwb25zZTpcbiAgICAgICAqIC0gYXdhaXQgYWxsIHJlc3BvbnNlcyBpbiBwYXJhbGxlbCwgYmxvY2tpbmcgb24gdGhlIHNsb3dlc3Qgb25lXG4gICAgICAgKiAtIGNyZWF0ZSBoZWFkZXJzIHdpdGgga25vd24gcmVzcG9uc2UgYm9keVxuICAgICAgICogLSByZXR1cm4gYSBjb21wbGV0ZSBIVFRQUmVzcG9uc2VcbiAgICAgICAqLyBjb25zdCB1bnRyYW5zZm9ybWVkSlNPTiA9IGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICAgICAgICAgIGNvbnN0IGVycm9ycyA9IHVudHJhbnNmb3JtZWRKU09OLmZsYXRNYXAoKHJlc3BvbnNlKT0+J2Vycm9yJyBpbiByZXNwb25zZSA/IFtcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZXJyb3JcbiAgICAgICAgICAgICAgICBdIDogW10pO1xuICAgICAgICAgICAgY29uc3QgaGVhZFJlc3BvbnNlMSA9IGluaXRSZXNwb25zZSh7XG4gICAgICAgICAgICAgICAgY3R4LFxuICAgICAgICAgICAgICAgIHBhdGhzLFxuICAgICAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VNZXRhOiBvcHRzLnJlc3BvbnNlTWV0YSxcbiAgICAgICAgICAgICAgICB1bnRyYW5zZm9ybWVkSlNPTixcbiAgICAgICAgICAgICAgICBlcnJvcnNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdW5zdGFibGVfb25IZWFkPy4oaGVhZFJlc3BvbnNlMSwgZmFsc2UpO1xuICAgICAgICAgICAgLy8gcmV0dXJuIGJvZHkgc3R1ZmZcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGlzQmF0Y2hDYWxsID8gdW50cmFuc2Zvcm1lZEpTT04gOiB1bnRyYW5zZm9ybWVkSlNPTlswXTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uIC0tIGB1bnRyYW5zZm9ybWVkSlNPTmAgc2hvdWxkIGJlIHRoZSBsZW5ndGggb2YgYHBhdGhzYCB3aGljaCBzaG91bGQgYmUgYXQgbGVhc3QgMSBvdGhlcndpc2UgdGhlcmUgd291bGRuJ3QgYmUgYSByZXF1ZXN0IGF0IGFsbFxuICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtZWRKU09OID0gdHJhbnNmb3JtVFJQQ1Jlc3BvbnNlKHJvdXRlci5fZGVmLl9jb25maWcsIHJlc3VsdCk7XG4gICAgICAgICAgICBjb25zdCBib2R5ID0gSlNPTi5zdHJpbmdpZnkodHJhbnNmb3JtZWRKU09OKTtcbiAgICAgICAgICAgIHVuc3RhYmxlX29uQ2h1bms/LihbXG4gICAgICAgICAgICAgICAgLTEsXG4gICAgICAgICAgICAgICAgYm9keVxuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogaGVhZFJlc3BvbnNlMS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZFJlc3BvbnNlMS5oZWFkZXJzLFxuICAgICAgICAgICAgICAgIGJvZHlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICogU3RyZWFtaW5nIHJlc3BvbnNlOlxuICAgICAqIC0gYmxvY2sgb24gbm9uZSwgY2FsbCBgb25DaHVua2AgYXMgc29vbiBhcyBlYWNoIHJlc3BvbnNlIGlzIHJlYWR5XG4gICAgICogLSBjcmVhdGUgaGVhZGVycyB3aXRoIG1pbmltYWwgZGF0YSAoY2Fubm90IGtub3cgdGhlIHJlc3BvbnNlIGJvZHkgaW4gYWR2YW5jZSlcbiAgICAgKiAtIHJldHVybiB2b2lkXG4gICAgICovIGNvbnN0IGhlYWRSZXNwb25zZTIgPSBpbml0UmVzcG9uc2Uoe1xuICAgICAgICAgICAgY3R4LFxuICAgICAgICAgICAgcGF0aHMsXG4gICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgcmVzcG9uc2VNZXRhOiBvcHRzLnJlc3BvbnNlTWV0YVxuICAgICAgICB9KTtcbiAgICAgICAgdW5zdGFibGVfb25IZWFkKGhlYWRSZXNwb25zZTIsIHRydWUpO1xuICAgICAgICBjb25zdCBpbmRleGVkUHJvbWlzZXMgPSBuZXcgTWFwKHByb21pc2VzLm1hcCgocHJvbWlzZSwgaW5kZXgpPT5bXG4gICAgICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICAgICAgcHJvbWlzZS50aGVuKChyKT0+W1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICByXG4gICAgICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICBdKSk7XG4gICAgICAgIGZvciAoY29uc3QgXyBvZiBwYXRocyl7XG4gICAgICAgICAgICBjb25zdCBbaW5kZXgsIHVudHJhbnNmb3JtZWRKU09OMV0gPSBhd2FpdCBQcm9taXNlLnJhY2UoaW5kZXhlZFByb21pc2VzLnZhbHVlcygpKTtcbiAgICAgICAgICAgIGluZGV4ZWRQcm9taXNlcy5kZWxldGUoaW5kZXgpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm1lZEpTT04xID0gdHJhbnNmb3JtVFJQQ1Jlc3BvbnNlKHJvdXRlci5fZGVmLl9jb25maWcsIHVudHJhbnNmb3JtZWRKU09OMSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYm9keTEgPSBKU09OLnN0cmluZ2lmeSh0cmFuc2Zvcm1lZEpTT04xKTtcbiAgICAgICAgICAgICAgICB1bnN0YWJsZV9vbkNodW5rKFtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIGJvZHkxXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB9IGNhdGNoIChjYXVzZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGggPSBwYXRoc1tpbmRleF07XG4gICAgICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBpbnB1dHNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgYm9keTogYm9keTIgIH0gPSBjYXVnaHRFcnJvclRvRGF0YShjYXVzZSwge1xuICAgICAgICAgICAgICAgICAgICBvcHRzLFxuICAgICAgICAgICAgICAgICAgICBjdHgsXG4gICAgICAgICAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICAgICAgICAgIGlucHV0XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdW5zdGFibGVfb25DaHVuayhbXG4gICAgICAgICAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgICAgICAgICBib2R5MlxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9IGNhdGNoIChjYXVzZTEpIHtcbiAgICAgICAgLy8gd2UgZ2V0IGhlcmUgaWZcbiAgICAgICAgLy8gLSBiYXRjaGluZyBpcyBjYWxsZWQgd2hlbiBpdCdzIG5vdCBlbmFibGVkXG4gICAgICAgIC8vIC0gYGNyZWF0ZUNvbnRleHQoKWAgdGhyb3dzXG4gICAgICAgIC8vIC0gYHJvdXRlci5fZGVmLl9jb25maWcudHJhbnNmb3JtZXIub3V0cHV0LnNlcmlhbGl6ZSgpYCB0aHJvd3NcbiAgICAgICAgLy8gLSBwb3N0IGJvZHkgaXMgdG9vIGxhcmdlXG4gICAgICAgIC8vIC0gaW5wdXQgZGVzZXJpYWxpemF0aW9uIGZhaWxzXG4gICAgICAgIC8vIC0gYGVycm9yRm9ybWF0dGVyYCByZXR1cm4gdmFsdWUgaXMgbWFsZm9ybWVkXG4gICAgICAgIGNvbnN0IHsgZXJyb3IgLCB1bnRyYW5zZm9ybWVkSlNPTjogdW50cmFuc2Zvcm1lZEpTT04yICwgYm9keTogYm9keTMgIH0gPSBjYXVnaHRFcnJvclRvRGF0YShjYXVzZTEsIHtcbiAgICAgICAgICAgIG9wdHMsXG4gICAgICAgICAgICBjdHgsXG4gICAgICAgICAgICB0eXBlXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBoZWFkUmVzcG9uc2UzID0gaW5pdFJlc3BvbnNlKHtcbiAgICAgICAgICAgIGN0eCxcbiAgICAgICAgICAgIHBhdGhzLFxuICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgIHJlc3BvbnNlTWV0YTogb3B0cy5yZXNwb25zZU1ldGEsXG4gICAgICAgICAgICB1bnRyYW5zZm9ybWVkSlNPTjogdW50cmFuc2Zvcm1lZEpTT04yLFxuICAgICAgICAgICAgZXJyb3JzOiBbXG4gICAgICAgICAgICAgICAgZXJyb3JcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSk7XG4gICAgICAgIHVuc3RhYmxlX29uSGVhZD8uKGhlYWRSZXNwb25zZTMsIGZhbHNlKTtcbiAgICAgICAgdW5zdGFibGVfb25DaHVuaz8uKFtcbiAgICAgICAgICAgIC0xLFxuICAgICAgICAgICAgYm9keTNcbiAgICAgICAgXSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IGhlYWRSZXNwb25zZTMuc3RhdHVzLFxuICAgICAgICAgICAgaGVhZGVyczogaGVhZFJlc3BvbnNlMy5oZWFkZXJzLFxuICAgICAgICAgICAgYm9keTogYm9keTNcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IHJlc29sdmVIVFRQUmVzcG9uc2UgYXMgciB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/@trpc/server/dist/resolveHTTPResponse-2fc435bb.mjs\n");

/***/ }),

/***/ "(rsc)/../../node_modules/@trpc/server/dist/toURL-8f0ea228.mjs":
/*!***************************************************************!*\
  !*** ../../node_modules/@trpc/server/dist/toURL-8f0ea228.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   t: () => (/* binding */ toURL)\n/* harmony export */ });\nfunction toURL(urlOrPathname) {\n    const url = urlOrPathname.startsWith('/') ? `http://127.0.0.1${urlOrPathname}` : urlOrPathname;\n    return new URL(url);\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzL0B0cnBjL3NlcnZlci9kaXN0L3RvVVJMLThmMGVhMjI4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQSxtRUFBbUUsY0FBYztBQUNqRjtBQUNBOztBQUVzQiIsInNvdXJjZXMiOlsid2VicGFjazovL0Bib2lsZXJwbGF0ZS9uZXh0anMvLi4vLi4vbm9kZV9tb2R1bGVzL0B0cnBjL3NlcnZlci9kaXN0L3RvVVJMLThmMGVhMjI4Lm1qcz9kZTFlIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHRvVVJMKHVybE9yUGF0aG5hbWUpIHtcbiAgICBjb25zdCB1cmwgPSB1cmxPclBhdGhuYW1lLnN0YXJ0c1dpdGgoJy8nKSA/IGBodHRwOi8vMTI3LjAuMC4xJHt1cmxPclBhdGhuYW1lfWAgOiB1cmxPclBhdGhuYW1lO1xuICAgIHJldHVybiBuZXcgVVJMKHVybCk7XG59XG5cbmV4cG9ydCB7IHRvVVJMIGFzIHQgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/@trpc/server/dist/toURL-8f0ea228.mjs\n");

/***/ }),

/***/ "(rsc)/../../node_modules/@trpc/server/dist/transformTRPCResponse-1153b421.mjs":
/*!*******************************************************************************!*\
  !*** ../../node_modules/@trpc/server/dist/transformTRPCResponse-1153b421.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   g: () => (/* binding */ getErrorShape),\n/* harmony export */   t: () => (/* binding */ transformTRPCResponse)\n/* harmony export */ });\n/* harmony import */ var _index_f91d720c_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-f91d720c.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/index-f91d720c.mjs\");\n/* harmony import */ var _codes_c924c3db_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./codes-c924c3db.mjs */ \"(rsc)/../../node_modules/@trpc/server/dist/codes-c924c3db.mjs\");\n\n\n\n/**\n * @internal\n */ function getErrorShape(opts) {\n    const { path , error , config  } = opts;\n    const { code  } = opts.error;\n    const shape = {\n        message: error.message,\n        code: _codes_c924c3db_mjs__WEBPACK_IMPORTED_MODULE_1__.T[code],\n        data: {\n            code,\n            httpStatus: (0,_index_f91d720c_mjs__WEBPACK_IMPORTED_MODULE_0__.g)(error)\n        }\n    };\n    if (config.isDev && typeof opts.error.stack === 'string') {\n        shape.data.stack = opts.error.stack;\n    }\n    if (typeof path === 'string') {\n        shape.data.path = path;\n    }\n    return config.errorFormatter({\n        ...opts,\n        shape\n    });\n}\n\nfunction transformTRPCResponseItem(config, item) {\n    if ('error' in item) {\n        return {\n            ...item,\n            error: config.transformer.output.serialize(item.error)\n        };\n    }\n    if ('data' in item.result) {\n        return {\n            ...item,\n            result: {\n                ...item.result,\n                data: config.transformer.output.serialize(item.result.data)\n            }\n        };\n    }\n    return item;\n}\n/**\n * Takes a unserialized `TRPCResponse` and serializes it with the router's transformers\n **/ function transformTRPCResponse(config, itemOrItems) {\n    return Array.isArray(itemOrItems) ? itemOrItems.map((item)=>transformTRPCResponseItem(config, item)) : transformTRPCResponseItem(config, itemOrItems);\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzL0B0cnBjL3NlcnZlci9kaXN0L3RyYW5zZm9ybVRSUENSZXNwb25zZS0xMTUzYjQyMS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF1RTtBQUNIOztBQUVwRTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHlCQUF5QjtBQUNyQyxZQUFZLFFBQVE7QUFDcEI7QUFDQTtBQUNBLGNBQWMsa0RBQXVCO0FBQ3JDO0FBQ0E7QUFDQSx3QkFBd0Isc0RBQTBCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFMEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYm9pbGVycGxhdGUvbmV4dGpzLy4uLy4uL25vZGVfbW9kdWxlcy9AdHJwYy9zZXJ2ZXIvZGlzdC90cmFuc2Zvcm1UUlBDUmVzcG9uc2UtMTE1M2I0MjEubWpzP2VhZTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZyBhcyBnZXRIVFRQU3RhdHVzQ29kZUZyb21FcnJvciB9IGZyb20gJy4vaW5kZXgtZjkxZDcyMGMubWpzJztcbmltcG9ydCB7IFQgYXMgVFJQQ19FUlJPUl9DT0RFU19CWV9LRVkgfSBmcm9tICcuL2NvZGVzLWM5MjRjM2RiLm1qcyc7XG5cbi8qKlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gZ2V0RXJyb3JTaGFwZShvcHRzKSB7XG4gICAgY29uc3QgeyBwYXRoICwgZXJyb3IgLCBjb25maWcgIH0gPSBvcHRzO1xuICAgIGNvbnN0IHsgY29kZSAgfSA9IG9wdHMuZXJyb3I7XG4gICAgY29uc3Qgc2hhcGUgPSB7XG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGNvZGU6IFRSUENfRVJST1JfQ09ERVNfQllfS0VZW2NvZGVdLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBjb2RlLFxuICAgICAgICAgICAgaHR0cFN0YXR1czogZ2V0SFRUUFN0YXR1c0NvZGVGcm9tRXJyb3IoZXJyb3IpXG4gICAgICAgIH1cbiAgICB9O1xuICAgIGlmIChjb25maWcuaXNEZXYgJiYgdHlwZW9mIG9wdHMuZXJyb3Iuc3RhY2sgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHNoYXBlLmRhdGEuc3RhY2sgPSBvcHRzLmVycm9yLnN0YWNrO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHNoYXBlLmRhdGEucGF0aCA9IHBhdGg7XG4gICAgfVxuICAgIHJldHVybiBjb25maWcuZXJyb3JGb3JtYXR0ZXIoe1xuICAgICAgICAuLi5vcHRzLFxuICAgICAgICBzaGFwZVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1UUlBDUmVzcG9uc2VJdGVtKGNvbmZpZywgaXRlbSkge1xuICAgIGlmICgnZXJyb3InIGluIGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICBlcnJvcjogY29uZmlnLnRyYW5zZm9ybWVyLm91dHB1dC5zZXJpYWxpemUoaXRlbS5lcnJvcilcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKCdkYXRhJyBpbiBpdGVtLnJlc3VsdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgIHJlc3VsdDoge1xuICAgICAgICAgICAgICAgIC4uLml0ZW0ucmVzdWx0LFxuICAgICAgICAgICAgICAgIGRhdGE6IGNvbmZpZy50cmFuc2Zvcm1lci5vdXRwdXQuc2VyaWFsaXplKGl0ZW0ucmVzdWx0LmRhdGEpXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBpdGVtO1xufVxuLyoqXG4gKiBUYWtlcyBhIHVuc2VyaWFsaXplZCBgVFJQQ1Jlc3BvbnNlYCBhbmQgc2VyaWFsaXplcyBpdCB3aXRoIHRoZSByb3V0ZXIncyB0cmFuc2Zvcm1lcnNcbiAqKi8gZnVuY3Rpb24gdHJhbnNmb3JtVFJQQ1Jlc3BvbnNlKGNvbmZpZywgaXRlbU9ySXRlbXMpIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShpdGVtT3JJdGVtcykgPyBpdGVtT3JJdGVtcy5tYXAoKGl0ZW0pPT50cmFuc2Zvcm1UUlBDUmVzcG9uc2VJdGVtKGNvbmZpZywgaXRlbSkpIDogdHJhbnNmb3JtVFJQQ1Jlc3BvbnNlSXRlbShjb25maWcsIGl0ZW1Pckl0ZW1zKTtcbn1cblxuZXhwb3J0IHsgZ2V0RXJyb3JTaGFwZSBhcyBnLCB0cmFuc2Zvcm1UUlBDUmVzcG9uc2UgYXMgdCB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/@trpc/server/dist/transformTRPCResponse-1153b421.mjs\n");

/***/ })

};
;